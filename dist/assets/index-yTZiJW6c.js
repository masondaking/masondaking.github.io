function qx(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function Zx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Mm={exports:{}},ga={},Lm={exports:{}},Q={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ni=Symbol.for("react.element"),e1=Symbol.for("react.portal"),t1=Symbol.for("react.fragment"),n1=Symbol.for("react.strict_mode"),r1=Symbol.for("react.profiler"),s1=Symbol.for("react.provider"),i1=Symbol.for("react.context"),o1=Symbol.for("react.forward_ref"),a1=Symbol.for("react.suspense"),l1=Symbol.for("react.memo"),c1=Symbol.for("react.lazy"),fh=Symbol.iterator;function u1(e){return e===null||typeof e!="object"?null:(e=fh&&e[fh]||e["@@iterator"],typeof e=="function"?e:null)}var Dm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Im=Object.assign,Om={};function us(e,t,n){this.props=e,this.context=t,this.refs=Om,this.updater=n||Dm}us.prototype.isReactComponent={};us.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};us.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Vm(){}Vm.prototype=us.prototype;function ju(e,t,n){this.props=e,this.context=t,this.refs=Om,this.updater=n||Dm}var Su=ju.prototype=new Vm;Su.constructor=ju;Im(Su,us.prototype);Su.isPureReactComponent=!0;var mh=Array.isArray,Fm=Object.prototype.hasOwnProperty,ku={current:null},Bm={key:!0,ref:!0,__self:!0,__source:!0};function zm(e,t,n){var r,s={},i=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)Fm.call(t,r)&&!Bm.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Ni,type:e,key:i,ref:a,props:s,_owner:ku.current}}function d1(e,t){return{$$typeof:Ni,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function bu(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ni}function h1(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var yh=/\/+/g;function nl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?h1(""+e.key):t.toString(36)}function vo(e,t,n,r,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Ni:case e1:a=!0}}if(a)return a=e,s=s(a),e=r===""?"."+nl(a,0):r,mh(s)?(n="",e!=null&&(n=e.replace(yh,"$&/")+"/"),vo(s,t,n,"",function(u){return u})):s!=null&&(bu(s)&&(s=d1(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(yh,"$&/")+"/")+e)),t.push(s)),1;if(a=0,r=r===""?".":r+":",mh(e))for(var l=0;l<e.length;l++){i=e[l];var c=r+nl(i,l);a+=vo(i,t,n,c,s)}else if(c=u1(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=r+nl(i,l++),a+=vo(i,t,n,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Hi(e,t,n){if(e==null)return e;var r=[],s=0;return vo(e,r,"","",function(i){return t.call(n,i,s++)}),r}function p1(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var He={current:null},xo={transition:null},f1={ReactCurrentDispatcher:He,ReactCurrentBatchConfig:xo,ReactCurrentOwner:ku};function Um(){throw Error("act(...) is not supported in production builds of React.")}Q.Children={map:Hi,forEach:function(e,t,n){Hi(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Hi(e,function(){t++}),t},toArray:function(e){return Hi(e,function(t){return t})||[]},only:function(e){if(!bu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Q.Component=us;Q.Fragment=t1;Q.Profiler=r1;Q.PureComponent=ju;Q.StrictMode=n1;Q.Suspense=a1;Q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=f1;Q.act=Um;Q.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Im({},e.props),s=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=ku.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)Fm.call(t,c)&&!Bm.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Ni,type:e.type,key:s,ref:i,props:r,_owner:a}};Q.createContext=function(e){return e={$$typeof:i1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:s1,_context:e},e.Consumer=e};Q.createElement=zm;Q.createFactory=function(e){var t=zm.bind(null,e);return t.type=e,t};Q.createRef=function(){return{current:null}};Q.forwardRef=function(e){return{$$typeof:o1,render:e}};Q.isValidElement=bu;Q.lazy=function(e){return{$$typeof:c1,_payload:{_status:-1,_result:e},_init:p1}};Q.memo=function(e,t){return{$$typeof:l1,type:e,compare:t===void 0?null:t}};Q.startTransition=function(e){var t=xo.transition;xo.transition={};try{e()}finally{xo.transition=t}};Q.unstable_act=Um;Q.useCallback=function(e,t){return He.current.useCallback(e,t)};Q.useContext=function(e){return He.current.useContext(e)};Q.useDebugValue=function(){};Q.useDeferredValue=function(e){return He.current.useDeferredValue(e)};Q.useEffect=function(e,t){return He.current.useEffect(e,t)};Q.useId=function(){return He.current.useId()};Q.useImperativeHandle=function(e,t,n){return He.current.useImperativeHandle(e,t,n)};Q.useInsertionEffect=function(e,t){return He.current.useInsertionEffect(e,t)};Q.useLayoutEffect=function(e,t){return He.current.useLayoutEffect(e,t)};Q.useMemo=function(e,t){return He.current.useMemo(e,t)};Q.useReducer=function(e,t,n){return He.current.useReducer(e,t,n)};Q.useRef=function(e){return He.current.useRef(e)};Q.useState=function(e){return He.current.useState(e)};Q.useSyncExternalStore=function(e,t,n){return He.current.useSyncExternalStore(e,t,n)};Q.useTransition=function(){return He.current.useTransition()};Q.version="18.3.1";Lm.exports=Q;var g=Lm.exports;const $m=Zx(g),m1=qx({__proto__:null,default:$m},[g]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y1=g,g1=Symbol.for("react.element"),v1=Symbol.for("react.fragment"),x1=Object.prototype.hasOwnProperty,w1=y1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,j1={key:!0,ref:!0,__self:!0,__source:!0};function Wm(e,t,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)x1.call(t,r)&&!j1.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:g1,type:e,key:i,ref:a,props:s,_owner:w1.current}}ga.Fragment=v1;ga.jsx=Wm;ga.jsxs=Wm;Mm.exports=ga;var o=Mm.exports,ql={},Hm={exports:{}},ct={},Km={exports:{}},Gm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,U){var W=O.length;O.push(U);e:for(;0<W;){var te=W-1>>>1,X=O[te];if(0<s(X,U))O[te]=U,O[W]=X,W=te;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var U=O[0],W=O.pop();if(W!==U){O[0]=W;e:for(var te=0,X=O.length,Qe=X>>>1;te<Qe;){var ke=2*(te+1)-1,Ct=O[ke],Le=ke+1,Ue=O[Le];if(0>s(Ct,W))Le<X&&0>s(Ue,Ct)?(O[te]=Ue,O[Le]=W,te=Le):(O[te]=Ct,O[ke]=W,te=ke);else if(Le<X&&0>s(Ue,W))O[te]=Ue,O[Le]=W,te=Le;else break e}}return U}function s(O,U){var W=O.sortIndex-U.sortIndex;return W!==0?W:O.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,f=null,m=3,S=!1,b=!1,w=!1,k=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(O){for(var U=n(u);U!==null;){if(U.callback===null)r(u);else if(U.startTime<=O)r(u),U.sortIndex=U.expirationTime,t(c,U);else break;U=n(u)}}function j(O){if(w=!1,y(O),!b)if(n(c)!==null)b=!0,Se(x);else{var U=n(u);U!==null&&q(j,U.startTime-O)}}function x(O,U){b=!1,w&&(w=!1,h(P),P=-1),S=!0;var W=m;try{for(y(U),f=n(c);f!==null&&(!(f.expirationTime>U)||O&&!T());){var te=f.callback;if(typeof te=="function"){f.callback=null,m=f.priorityLevel;var X=te(f.expirationTime<=U);U=e.unstable_now(),typeof X=="function"?f.callback=X:f===n(c)&&r(c),y(U)}else r(c);f=n(c)}if(f!==null)var Qe=!0;else{var ke=n(u);ke!==null&&q(j,ke.startTime-U),Qe=!1}return Qe}finally{f=null,m=W,S=!1}}var N=!1,A=null,P=-1,C=5,E=-1;function T(){return!(e.unstable_now()-E<C)}function M(){if(A!==null){var O=e.unstable_now();E=O;var U=!0;try{U=A(!0,O)}finally{U?D():(N=!1,A=null)}}else N=!1}var D;if(typeof p=="function")D=function(){p(M)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,Ye=$.port2;$.port1.onmessage=M,D=function(){Ye.postMessage(null)}}else D=function(){k(M,0)};function Se(O){A=O,N||(N=!0,D())}function q(O,U){P=k(function(){O(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){b||S||(b=!0,Se(x))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(O){switch(m){case 1:case 2:case 3:var U=3;break;default:U=m}var W=m;m=U;try{return O()}finally{m=W}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,U){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var W=m;m=O;try{return U()}finally{m=W}},e.unstable_scheduleCallback=function(O,U,W){var te=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?te+W:te):W=te,O){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=W+X,O={id:d++,callback:U,priorityLevel:O,startTime:W,expirationTime:X,sortIndex:-1},W>te?(O.sortIndex=W,t(u,O),n(c)===null&&O===n(u)&&(w?(h(P),P=-1):w=!0,q(j,W-te))):(O.sortIndex=X,t(c,O),b||S||(b=!0,Se(x))),O},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(O){var U=m;return function(){var W=m;m=U;try{return O.apply(this,arguments)}finally{m=W}}}})(Gm);Km.exports=Gm;var S1=Km.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var k1=g,at=S1;function I(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ym=new Set,ri={};function mr(e,t){qr(e,t),qr(e+"Capture",t)}function qr(e,t){for(ri[e]=t,e=0;e<t.length;e++)Ym.add(t[e])}var tn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zl=Object.prototype.hasOwnProperty,b1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gh={},vh={};function C1(e){return Zl.call(vh,e)?!0:Zl.call(gh,e)?!1:b1.test(e)?vh[e]=!0:(gh[e]=!0,!1)}function N1(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function A1(e,t,n,r){if(t===null||typeof t>"u"||N1(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ke(e,t,n,r,s,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var Me={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Me[e]=new Ke(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Me[t]=new Ke(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Me[e]=new Ke(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Me[e]=new Ke(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Me[e]=new Ke(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Me[e]=new Ke(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Me[e]=new Ke(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Me[e]=new Ke(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Me[e]=new Ke(e,5,!1,e.toLowerCase(),null,!1,!1)});var Cu=/[\-:]([a-z])/g;function Nu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Cu,Nu);Me[t]=new Ke(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Cu,Nu);Me[t]=new Ke(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Cu,Nu);Me[t]=new Ke(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Me[e]=new Ke(e,1,!1,e.toLowerCase(),null,!1,!1)});Me.xlinkHref=new Ke("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Me[e]=new Ke(e,1,!1,e.toLowerCase(),null,!0,!0)});function Au(e,t,n,r){var s=Me.hasOwnProperty(t)?Me[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(A1(t,n,s,r)&&(n=null),r||s===null?C1(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ln=k1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ki=Symbol.for("react.element"),Pr=Symbol.for("react.portal"),Tr=Symbol.for("react.fragment"),Pu=Symbol.for("react.strict_mode"),ec=Symbol.for("react.profiler"),Qm=Symbol.for("react.provider"),Xm=Symbol.for("react.context"),Tu=Symbol.for("react.forward_ref"),tc=Symbol.for("react.suspense"),nc=Symbol.for("react.suspense_list"),Eu=Symbol.for("react.memo"),jn=Symbol.for("react.lazy"),Jm=Symbol.for("react.offscreen"),xh=Symbol.iterator;function js(e){return e===null||typeof e!="object"?null:(e=xh&&e[xh]||e["@@iterator"],typeof e=="function"?e:null)}var fe=Object.assign,rl;function Ls(e){if(rl===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);rl=t&&t[1]||""}return`
`+rl+e}var sl=!1;function il(e,t){if(!e||sl)return"";sl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{sl=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ls(e):""}function P1(e){switch(e.tag){case 5:return Ls(e.type);case 16:return Ls("Lazy");case 13:return Ls("Suspense");case 19:return Ls("SuspenseList");case 0:case 2:case 15:return e=il(e.type,!1),e;case 11:return e=il(e.type.render,!1),e;case 1:return e=il(e.type,!0),e;default:return""}}function rc(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Tr:return"Fragment";case Pr:return"Portal";case ec:return"Profiler";case Pu:return"StrictMode";case tc:return"Suspense";case nc:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Xm:return(e.displayName||"Context")+".Consumer";case Qm:return(e._context.displayName||"Context")+".Provider";case Tu:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Eu:return t=e.displayName||null,t!==null?t:rc(e.type)||"Memo";case jn:t=e._payload,e=e._init;try{return rc(e(t))}catch{}}return null}function T1(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return rc(t);case 8:return t===Pu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function On(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function qm(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function E1(e){var t=qm(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Gi(e){e._valueTracker||(e._valueTracker=E1(e))}function Zm(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=qm(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Mo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function sc(e,t){var n=t.checked;return fe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function wh(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=On(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ey(e,t){t=t.checked,t!=null&&Au(e,"checked",t,!1)}function ic(e,t){ey(e,t);var n=On(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?oc(e,t.type,n):t.hasOwnProperty("defaultValue")&&oc(e,t.type,On(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function jh(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function oc(e,t,n){(t!=="number"||Mo(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ds=Array.isArray;function Hr(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+On(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function ac(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(I(91));return fe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Sh(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(I(92));if(Ds(n)){if(1<n.length)throw Error(I(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:On(n)}}function ty(e,t){var n=On(t.value),r=On(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function kh(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function ny(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lc(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?ny(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Yi,ry=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Yi=Yi||document.createElement("div"),Yi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Yi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function si(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Us={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_1=["Webkit","ms","Moz","O"];Object.keys(Us).forEach(function(e){_1.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Us[t]=Us[e]})});function sy(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Us.hasOwnProperty(e)&&Us[e]?(""+t).trim():t+"px"}function iy(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=sy(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var R1=fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cc(e,t){if(t){if(R1[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(I(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(I(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(I(61))}if(t.style!=null&&typeof t.style!="object")throw Error(I(62))}}function uc(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dc=null;function _u(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var hc=null,Kr=null,Gr=null;function bh(e){if(e=Ti(e)){if(typeof hc!="function")throw Error(I(280));var t=e.stateNode;t&&(t=Sa(t),hc(e.stateNode,e.type,t))}}function oy(e){Kr?Gr?Gr.push(e):Gr=[e]:Kr=e}function ay(){if(Kr){var e=Kr,t=Gr;if(Gr=Kr=null,bh(e),t)for(e=0;e<t.length;e++)bh(t[e])}}function ly(e,t){return e(t)}function cy(){}var ol=!1;function uy(e,t,n){if(ol)return e(t,n);ol=!0;try{return ly(e,t,n)}finally{ol=!1,(Kr!==null||Gr!==null)&&(cy(),ay())}}function ii(e,t){var n=e.stateNode;if(n===null)return null;var r=Sa(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(I(231,t,typeof n));return n}var pc=!1;if(tn)try{var Ss={};Object.defineProperty(Ss,"passive",{get:function(){pc=!0}}),window.addEventListener("test",Ss,Ss),window.removeEventListener("test",Ss,Ss)}catch{pc=!1}function M1(e,t,n,r,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(d){this.onError(d)}}var $s=!1,Lo=null,Do=!1,fc=null,L1={onError:function(e){$s=!0,Lo=e}};function D1(e,t,n,r,s,i,a,l,c){$s=!1,Lo=null,M1.apply(L1,arguments)}function I1(e,t,n,r,s,i,a,l,c){if(D1.apply(this,arguments),$s){if($s){var u=Lo;$s=!1,Lo=null}else throw Error(I(198));Do||(Do=!0,fc=u)}}function yr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function dy(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ch(e){if(yr(e)!==e)throw Error(I(188))}function O1(e){var t=e.alternate;if(!t){if(t=yr(e),t===null)throw Error(I(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Ch(s),e;if(i===r)return Ch(s),t;i=i.sibling}throw Error(I(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(I(189))}}if(n.alternate!==r)throw Error(I(190))}if(n.tag!==3)throw Error(I(188));return n.stateNode.current===n?e:t}function hy(e){return e=O1(e),e!==null?py(e):null}function py(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=py(e);if(t!==null)return t;e=e.sibling}return null}var fy=at.unstable_scheduleCallback,Nh=at.unstable_cancelCallback,V1=at.unstable_shouldYield,F1=at.unstable_requestPaint,ve=at.unstable_now,B1=at.unstable_getCurrentPriorityLevel,Ru=at.unstable_ImmediatePriority,my=at.unstable_UserBlockingPriority,Io=at.unstable_NormalPriority,z1=at.unstable_LowPriority,yy=at.unstable_IdlePriority,va=null,Ut=null;function U1(e){if(Ut&&typeof Ut.onCommitFiberRoot=="function")try{Ut.onCommitFiberRoot(va,e,void 0,(e.current.flags&128)===128)}catch{}}var _t=Math.clz32?Math.clz32:H1,$1=Math.log,W1=Math.LN2;function H1(e){return e>>>=0,e===0?32:31-($1(e)/W1|0)|0}var Qi=64,Xi=4194304;function Is(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Oo(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=Is(l):(i&=a,i!==0&&(r=Is(i)))}else a=n&~s,a!==0?r=Is(a):i!==0&&(r=Is(i));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-_t(t),s=1<<n,r|=e[n],t&=~s;return r}function K1(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function G1(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-_t(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=K1(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function mc(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function gy(){var e=Qi;return Qi<<=1,!(Qi&4194240)&&(Qi=64),e}function al(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ai(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-_t(t),e[t]=n}function Y1(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-_t(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}function Mu(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-_t(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var re=0;function vy(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var xy,Lu,wy,jy,Sy,yc=!1,Ji=[],Pn=null,Tn=null,En=null,oi=new Map,ai=new Map,kn=[],Q1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ah(e,t){switch(e){case"focusin":case"focusout":Pn=null;break;case"dragenter":case"dragleave":Tn=null;break;case"mouseover":case"mouseout":En=null;break;case"pointerover":case"pointerout":oi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ai.delete(t.pointerId)}}function ks(e,t,n,r,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Ti(t),t!==null&&Lu(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function X1(e,t,n,r,s){switch(t){case"focusin":return Pn=ks(Pn,e,t,n,r,s),!0;case"dragenter":return Tn=ks(Tn,e,t,n,r,s),!0;case"mouseover":return En=ks(En,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return oi.set(i,ks(oi.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ai.set(i,ks(ai.get(i)||null,e,t,n,r,s)),!0}return!1}function ky(e){var t=rr(e.target);if(t!==null){var n=yr(t);if(n!==null){if(t=n.tag,t===13){if(t=dy(n),t!==null){e.blockedOn=t,Sy(e.priority,function(){wy(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function wo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=gc(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);dc=r,n.target.dispatchEvent(r),dc=null}else return t=Ti(n),t!==null&&Lu(t),e.blockedOn=n,!1;t.shift()}return!0}function Ph(e,t,n){wo(e)&&n.delete(t)}function J1(){yc=!1,Pn!==null&&wo(Pn)&&(Pn=null),Tn!==null&&wo(Tn)&&(Tn=null),En!==null&&wo(En)&&(En=null),oi.forEach(Ph),ai.forEach(Ph)}function bs(e,t){e.blockedOn===t&&(e.blockedOn=null,yc||(yc=!0,at.unstable_scheduleCallback(at.unstable_NormalPriority,J1)))}function li(e){function t(s){return bs(s,e)}if(0<Ji.length){bs(Ji[0],e);for(var n=1;n<Ji.length;n++){var r=Ji[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Pn!==null&&bs(Pn,e),Tn!==null&&bs(Tn,e),En!==null&&bs(En,e),oi.forEach(t),ai.forEach(t),n=0;n<kn.length;n++)r=kn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<kn.length&&(n=kn[0],n.blockedOn===null);)ky(n),n.blockedOn===null&&kn.shift()}var Yr=ln.ReactCurrentBatchConfig,Vo=!0;function q1(e,t,n,r){var s=re,i=Yr.transition;Yr.transition=null;try{re=1,Du(e,t,n,r)}finally{re=s,Yr.transition=i}}function Z1(e,t,n,r){var s=re,i=Yr.transition;Yr.transition=null;try{re=4,Du(e,t,n,r)}finally{re=s,Yr.transition=i}}function Du(e,t,n,r){if(Vo){var s=gc(e,t,n,r);if(s===null)gl(e,t,r,Fo,n),Ah(e,r);else if(X1(s,e,t,n,r))r.stopPropagation();else if(Ah(e,r),t&4&&-1<Q1.indexOf(e)){for(;s!==null;){var i=Ti(s);if(i!==null&&xy(i),i=gc(e,t,n,r),i===null&&gl(e,t,r,Fo,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else gl(e,t,r,null,n)}}var Fo=null;function gc(e,t,n,r){if(Fo=null,e=_u(r),e=rr(e),e!==null)if(t=yr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=dy(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Fo=e,null}function by(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(B1()){case Ru:return 1;case my:return 4;case Io:case z1:return 16;case yy:return 536870912;default:return 16}default:return 16}}var Cn=null,Iu=null,jo=null;function Cy(){if(jo)return jo;var e,t=Iu,n=t.length,r,s="value"in Cn?Cn.value:Cn.textContent,i=s.length;for(e=0;e<n&&t[e]===s[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===s[i-r];r++);return jo=s.slice(e,1<r?1-r:void 0)}function So(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function qi(){return!0}function Th(){return!1}function ut(e){function t(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?qi:Th,this.isPropagationStopped=Th,this}return fe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=qi)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=qi)},persist:function(){},isPersistent:qi}),t}var ds={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ou=ut(ds),Pi=fe({},ds,{view:0,detail:0}),ew=ut(Pi),ll,cl,Cs,xa=fe({},Pi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Cs&&(Cs&&e.type==="mousemove"?(ll=e.screenX-Cs.screenX,cl=e.screenY-Cs.screenY):cl=ll=0,Cs=e),ll)},movementY:function(e){return"movementY"in e?e.movementY:cl}}),Eh=ut(xa),tw=fe({},xa,{dataTransfer:0}),nw=ut(tw),rw=fe({},Pi,{relatedTarget:0}),ul=ut(rw),sw=fe({},ds,{animationName:0,elapsedTime:0,pseudoElement:0}),iw=ut(sw),ow=fe({},ds,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),aw=ut(ow),lw=fe({},ds,{data:0}),_h=ut(lw),cw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hw(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=dw[e])?!!t[e]:!1}function Vu(){return hw}var pw=fe({},Pi,{key:function(e){if(e.key){var t=cw[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=So(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?uw[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vu,charCode:function(e){return e.type==="keypress"?So(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?So(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),fw=ut(pw),mw=fe({},xa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rh=ut(mw),yw=fe({},Pi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vu}),gw=ut(yw),vw=fe({},ds,{propertyName:0,elapsedTime:0,pseudoElement:0}),xw=ut(vw),ww=fe({},xa,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jw=ut(ww),Sw=[9,13,27,32],Fu=tn&&"CompositionEvent"in window,Ws=null;tn&&"documentMode"in document&&(Ws=document.documentMode);var kw=tn&&"TextEvent"in window&&!Ws,Ny=tn&&(!Fu||Ws&&8<Ws&&11>=Ws),Mh=" ",Lh=!1;function Ay(e,t){switch(e){case"keyup":return Sw.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Py(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Er=!1;function bw(e,t){switch(e){case"compositionend":return Py(t);case"keypress":return t.which!==32?null:(Lh=!0,Mh);case"textInput":return e=t.data,e===Mh&&Lh?null:e;default:return null}}function Cw(e,t){if(Er)return e==="compositionend"||!Fu&&Ay(e,t)?(e=Cy(),jo=Iu=Cn=null,Er=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ny&&t.locale!=="ko"?null:t.data;default:return null}}var Nw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Nw[e.type]:t==="textarea"}function Ty(e,t,n,r){oy(r),t=Bo(t,"onChange"),0<t.length&&(n=new Ou("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hs=null,ci=null;function Aw(e){By(e,0)}function wa(e){var t=Mr(e);if(Zm(t))return e}function Pw(e,t){if(e==="change")return t}var Ey=!1;if(tn){var dl;if(tn){var hl="oninput"in document;if(!hl){var Ih=document.createElement("div");Ih.setAttribute("oninput","return;"),hl=typeof Ih.oninput=="function"}dl=hl}else dl=!1;Ey=dl&&(!document.documentMode||9<document.documentMode)}function Oh(){Hs&&(Hs.detachEvent("onpropertychange",_y),ci=Hs=null)}function _y(e){if(e.propertyName==="value"&&wa(ci)){var t=[];Ty(t,ci,e,_u(e)),uy(Aw,t)}}function Tw(e,t,n){e==="focusin"?(Oh(),Hs=t,ci=n,Hs.attachEvent("onpropertychange",_y)):e==="focusout"&&Oh()}function Ew(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return wa(ci)}function _w(e,t){if(e==="click")return wa(t)}function Rw(e,t){if(e==="input"||e==="change")return wa(t)}function Mw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Mt=typeof Object.is=="function"?Object.is:Mw;function ui(e,t){if(Mt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Zl.call(t,s)||!Mt(e[s],t[s]))return!1}return!0}function Vh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Fh(e,t){var n=Vh(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Vh(n)}}function Ry(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ry(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function My(){for(var e=window,t=Mo();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Mo(e.document)}return t}function Bu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Lw(e){var t=My(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Ry(n.ownerDocument.documentElement,n)){if(r!==null&&Bu(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=Fh(n,i);var a=Fh(n,r);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Dw=tn&&"documentMode"in document&&11>=document.documentMode,_r=null,vc=null,Ks=null,xc=!1;function Bh(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;xc||_r==null||_r!==Mo(r)||(r=_r,"selectionStart"in r&&Bu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ks&&ui(Ks,r)||(Ks=r,r=Bo(vc,"onSelect"),0<r.length&&(t=new Ou("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=_r)))}function Zi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Rr={animationend:Zi("Animation","AnimationEnd"),animationiteration:Zi("Animation","AnimationIteration"),animationstart:Zi("Animation","AnimationStart"),transitionend:Zi("Transition","TransitionEnd")},pl={},Ly={};tn&&(Ly=document.createElement("div").style,"AnimationEvent"in window||(delete Rr.animationend.animation,delete Rr.animationiteration.animation,delete Rr.animationstart.animation),"TransitionEvent"in window||delete Rr.transitionend.transition);function ja(e){if(pl[e])return pl[e];if(!Rr[e])return e;var t=Rr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Ly)return pl[e]=t[n];return e}var Dy=ja("animationend"),Iy=ja("animationiteration"),Oy=ja("animationstart"),Vy=ja("transitionend"),Fy=new Map,zh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bn(e,t){Fy.set(e,t),mr(t,[e])}for(var fl=0;fl<zh.length;fl++){var ml=zh[fl],Iw=ml.toLowerCase(),Ow=ml[0].toUpperCase()+ml.slice(1);Bn(Iw,"on"+Ow)}Bn(Dy,"onAnimationEnd");Bn(Iy,"onAnimationIteration");Bn(Oy,"onAnimationStart");Bn("dblclick","onDoubleClick");Bn("focusin","onFocus");Bn("focusout","onBlur");Bn(Vy,"onTransitionEnd");qr("onMouseEnter",["mouseout","mouseover"]);qr("onMouseLeave",["mouseout","mouseover"]);qr("onPointerEnter",["pointerout","pointerover"]);qr("onPointerLeave",["pointerout","pointerover"]);mr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));mr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));mr("onBeforeInput",["compositionend","keypress","textInput","paste"]);mr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));mr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));mr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Os="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Os));function Uh(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,I1(r,t,void 0,e),e.currentTarget=null}function By(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Uh(s,l,u),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Uh(s,l,u),i=c}}}if(Do)throw e=fc,Do=!1,fc=null,e}function ae(e,t){var n=t[bc];n===void 0&&(n=t[bc]=new Set);var r=e+"__bubble";n.has(r)||(zy(t,e,2,!1),n.add(r))}function yl(e,t,n){var r=0;t&&(r|=4),zy(n,e,r,t)}var eo="_reactListening"+Math.random().toString(36).slice(2);function di(e){if(!e[eo]){e[eo]=!0,Ym.forEach(function(n){n!=="selectionchange"&&(Vw.has(n)||yl(n,!1,e),yl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[eo]||(t[eo]=!0,yl("selectionchange",!1,t))}}function zy(e,t,n,r){switch(by(t)){case 1:var s=q1;break;case 4:s=Z1;break;default:s=Du}n=s.bind(null,t,n,e),s=void 0,!pc||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function gl(e,t,n,r,s){var i=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=rr(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}uy(function(){var u=i,d=_u(n),f=[];e:{var m=Fy.get(e);if(m!==void 0){var S=Ou,b=e;switch(e){case"keypress":if(So(n)===0)break e;case"keydown":case"keyup":S=fw;break;case"focusin":b="focus",S=ul;break;case"focusout":b="blur",S=ul;break;case"beforeblur":case"afterblur":S=ul;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Eh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=nw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=gw;break;case Dy:case Iy:case Oy:S=iw;break;case Vy:S=xw;break;case"scroll":S=ew;break;case"wheel":S=jw;break;case"copy":case"cut":case"paste":S=aw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=Rh}var w=(t&4)!==0,k=!w&&e==="scroll",h=w?m!==null?m+"Capture":null:m;w=[];for(var p=u,y;p!==null;){y=p;var j=y.stateNode;if(y.tag===5&&j!==null&&(y=j,h!==null&&(j=ii(p,h),j!=null&&w.push(hi(p,j,y)))),k)break;p=p.return}0<w.length&&(m=new S(m,b,null,n,d),f.push({event:m,listeners:w}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",S=e==="mouseout"||e==="pointerout",m&&n!==dc&&(b=n.relatedTarget||n.fromElement)&&(rr(b)||b[nn]))break e;if((S||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,S?(b=n.relatedTarget||n.toElement,S=u,b=b?rr(b):null,b!==null&&(k=yr(b),b!==k||b.tag!==5&&b.tag!==6)&&(b=null)):(S=null,b=u),S!==b)){if(w=Eh,j="onMouseLeave",h="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(w=Rh,j="onPointerLeave",h="onPointerEnter",p="pointer"),k=S==null?m:Mr(S),y=b==null?m:Mr(b),m=new w(j,p+"leave",S,n,d),m.target=k,m.relatedTarget=y,j=null,rr(d)===u&&(w=new w(h,p+"enter",b,n,d),w.target=y,w.relatedTarget=k,j=w),k=j,S&&b)t:{for(w=S,h=b,p=0,y=w;y;y=Nr(y))p++;for(y=0,j=h;j;j=Nr(j))y++;for(;0<p-y;)w=Nr(w),p--;for(;0<y-p;)h=Nr(h),y--;for(;p--;){if(w===h||h!==null&&w===h.alternate)break t;w=Nr(w),h=Nr(h)}w=null}else w=null;S!==null&&$h(f,m,S,w,!1),b!==null&&k!==null&&$h(f,k,b,w,!0)}}e:{if(m=u?Mr(u):window,S=m.nodeName&&m.nodeName.toLowerCase(),S==="select"||S==="input"&&m.type==="file")var x=Pw;else if(Dh(m))if(Ey)x=Rw;else{x=Ew;var N=Tw}else(S=m.nodeName)&&S.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(x=_w);if(x&&(x=x(e,u))){Ty(f,x,n,d);break e}N&&N(e,m,u),e==="focusout"&&(N=m._wrapperState)&&N.controlled&&m.type==="number"&&oc(m,"number",m.value)}switch(N=u?Mr(u):window,e){case"focusin":(Dh(N)||N.contentEditable==="true")&&(_r=N,vc=u,Ks=null);break;case"focusout":Ks=vc=_r=null;break;case"mousedown":xc=!0;break;case"contextmenu":case"mouseup":case"dragend":xc=!1,Bh(f,n,d);break;case"selectionchange":if(Dw)break;case"keydown":case"keyup":Bh(f,n,d)}var A;if(Fu)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Er?Ay(e,n)&&(P="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(Ny&&n.locale!=="ko"&&(Er||P!=="onCompositionStart"?P==="onCompositionEnd"&&Er&&(A=Cy()):(Cn=d,Iu="value"in Cn?Cn.value:Cn.textContent,Er=!0)),N=Bo(u,P),0<N.length&&(P=new _h(P,e,null,n,d),f.push({event:P,listeners:N}),A?P.data=A:(A=Py(n),A!==null&&(P.data=A)))),(A=kw?bw(e,n):Cw(e,n))&&(u=Bo(u,"onBeforeInput"),0<u.length&&(d=new _h("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=A))}By(f,t)})}function hi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Bo(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ii(e,n),i!=null&&r.unshift(hi(e,i,s)),i=ii(e,t),i!=null&&r.push(hi(e,i,s))),e=e.return}return r}function Nr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function $h(e,t,n,r,s){for(var i=t._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=ii(n,i),c!=null&&a.unshift(hi(n,c,l))):s||(c=ii(n,i),c!=null&&a.push(hi(n,c,l)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Fw=/\r\n?/g,Bw=/\u0000|\uFFFD/g;function Wh(e){return(typeof e=="string"?e:""+e).replace(Fw,`
`).replace(Bw,"")}function to(e,t,n){if(t=Wh(t),Wh(e)!==t&&n)throw Error(I(425))}function zo(){}var wc=null,jc=null;function Sc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var kc=typeof setTimeout=="function"?setTimeout:void 0,zw=typeof clearTimeout=="function"?clearTimeout:void 0,Hh=typeof Promise=="function"?Promise:void 0,Uw=typeof queueMicrotask=="function"?queueMicrotask:typeof Hh<"u"?function(e){return Hh.resolve(null).then(e).catch($w)}:kc;function $w(e){setTimeout(function(){throw e})}function vl(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),li(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);li(t)}function _n(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Kh(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var hs=Math.random().toString(36).slice(2),zt="__reactFiber$"+hs,pi="__reactProps$"+hs,nn="__reactContainer$"+hs,bc="__reactEvents$"+hs,Ww="__reactListeners$"+hs,Hw="__reactHandles$"+hs;function rr(e){var t=e[zt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[nn]||n[zt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Kh(e);e!==null;){if(n=e[zt])return n;e=Kh(e)}return t}e=n,n=e.parentNode}return null}function Ti(e){return e=e[zt]||e[nn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Mr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(I(33))}function Sa(e){return e[pi]||null}var Cc=[],Lr=-1;function zn(e){return{current:e}}function le(e){0>Lr||(e.current=Cc[Lr],Cc[Lr]=null,Lr--)}function oe(e,t){Lr++,Cc[Lr]=e.current,e.current=t}var Vn={},ze=zn(Vn),Ze=zn(!1),ur=Vn;function Zr(e,t){var n=e.type.contextTypes;if(!n)return Vn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function et(e){return e=e.childContextTypes,e!=null}function Uo(){le(Ze),le(ze)}function Gh(e,t,n){if(ze.current!==Vn)throw Error(I(168));oe(ze,t),oe(Ze,n)}function Uy(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(I(108,T1(e)||"Unknown",s));return fe({},n,r)}function $o(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Vn,ur=ze.current,oe(ze,e),oe(Ze,Ze.current),!0}function Yh(e,t,n){var r=e.stateNode;if(!r)throw Error(I(169));n?(e=Uy(e,t,ur),r.__reactInternalMemoizedMergedChildContext=e,le(Ze),le(ze),oe(ze,e)):le(Ze),oe(Ze,n)}var Qt=null,ka=!1,xl=!1;function $y(e){Qt===null?Qt=[e]:Qt.push(e)}function Kw(e){ka=!0,$y(e)}function Un(){if(!xl&&Qt!==null){xl=!0;var e=0,t=re;try{var n=Qt;for(re=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Qt=null,ka=!1}catch(s){throw Qt!==null&&(Qt=Qt.slice(e+1)),fy(Ru,Un),s}finally{re=t,xl=!1}}return null}var Dr=[],Ir=0,Wo=null,Ho=0,xt=[],wt=0,dr=null,Xt=1,Jt="";function qn(e,t){Dr[Ir++]=Ho,Dr[Ir++]=Wo,Wo=e,Ho=t}function Wy(e,t,n){xt[wt++]=Xt,xt[wt++]=Jt,xt[wt++]=dr,dr=e;var r=Xt;e=Jt;var s=32-_t(r)-1;r&=~(1<<s),n+=1;var i=32-_t(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Xt=1<<32-_t(t)+s|n<<s|r,Jt=i+e}else Xt=1<<i|n<<s|r,Jt=e}function zu(e){e.return!==null&&(qn(e,1),Wy(e,1,0))}function Uu(e){for(;e===Wo;)Wo=Dr[--Ir],Dr[Ir]=null,Ho=Dr[--Ir],Dr[Ir]=null;for(;e===dr;)dr=xt[--wt],xt[wt]=null,Jt=xt[--wt],xt[wt]=null,Xt=xt[--wt],xt[wt]=null}var it=null,st=null,ce=!1,Et=null;function Hy(e,t){var n=jt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Qh(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,it=e,st=_n(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,it=e,st=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=dr!==null?{id:Xt,overflow:Jt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=jt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,it=e,st=null,!0):!1;default:return!1}}function Nc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ac(e){if(ce){var t=st;if(t){var n=t;if(!Qh(e,t)){if(Nc(e))throw Error(I(418));t=_n(n.nextSibling);var r=it;t&&Qh(e,t)?Hy(r,n):(e.flags=e.flags&-4097|2,ce=!1,it=e)}}else{if(Nc(e))throw Error(I(418));e.flags=e.flags&-4097|2,ce=!1,it=e}}}function Xh(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;it=e}function no(e){if(e!==it)return!1;if(!ce)return Xh(e),ce=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Sc(e.type,e.memoizedProps)),t&&(t=st)){if(Nc(e))throw Ky(),Error(I(418));for(;t;)Hy(e,t),t=_n(t.nextSibling)}if(Xh(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(I(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){st=_n(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}st=null}}else st=it?_n(e.stateNode.nextSibling):null;return!0}function Ky(){for(var e=st;e;)e=_n(e.nextSibling)}function es(){st=it=null,ce=!1}function $u(e){Et===null?Et=[e]:Et.push(e)}var Gw=ln.ReactCurrentBatchConfig;function Ns(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(I(309));var r=n.stateNode}if(!r)throw Error(I(147,e));var s=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(I(284));if(!n._owner)throw Error(I(290,e))}return e}function ro(e,t){throw e=Object.prototype.toString.call(t),Error(I(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Jh(e){var t=e._init;return t(e._payload)}function Gy(e){function t(h,p){if(e){var y=h.deletions;y===null?(h.deletions=[p],h.flags|=16):y.push(p)}}function n(h,p){if(!e)return null;for(;p!==null;)t(h,p),p=p.sibling;return null}function r(h,p){for(h=new Map;p!==null;)p.key!==null?h.set(p.key,p):h.set(p.index,p),p=p.sibling;return h}function s(h,p){return h=Dn(h,p),h.index=0,h.sibling=null,h}function i(h,p,y){return h.index=y,e?(y=h.alternate,y!==null?(y=y.index,y<p?(h.flags|=2,p):y):(h.flags|=2,p)):(h.flags|=1048576,p)}function a(h){return e&&h.alternate===null&&(h.flags|=2),h}function l(h,p,y,j){return p===null||p.tag!==6?(p=Nl(y,h.mode,j),p.return=h,p):(p=s(p,y),p.return=h,p)}function c(h,p,y,j){var x=y.type;return x===Tr?d(h,p,y.props.children,j,y.key):p!==null&&(p.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===jn&&Jh(x)===p.type)?(j=s(p,y.props),j.ref=Ns(h,p,y),j.return=h,j):(j=To(y.type,y.key,y.props,null,h.mode,j),j.ref=Ns(h,p,y),j.return=h,j)}function u(h,p,y,j){return p===null||p.tag!==4||p.stateNode.containerInfo!==y.containerInfo||p.stateNode.implementation!==y.implementation?(p=Al(y,h.mode,j),p.return=h,p):(p=s(p,y.children||[]),p.return=h,p)}function d(h,p,y,j,x){return p===null||p.tag!==7?(p=lr(y,h.mode,j,x),p.return=h,p):(p=s(p,y),p.return=h,p)}function f(h,p,y){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Nl(""+p,h.mode,y),p.return=h,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Ki:return y=To(p.type,p.key,p.props,null,h.mode,y),y.ref=Ns(h,null,p),y.return=h,y;case Pr:return p=Al(p,h.mode,y),p.return=h,p;case jn:var j=p._init;return f(h,j(p._payload),y)}if(Ds(p)||js(p))return p=lr(p,h.mode,y,null),p.return=h,p;ro(h,p)}return null}function m(h,p,y,j){var x=p!==null?p.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return x!==null?null:l(h,p,""+y,j);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ki:return y.key===x?c(h,p,y,j):null;case Pr:return y.key===x?u(h,p,y,j):null;case jn:return x=y._init,m(h,p,x(y._payload),j)}if(Ds(y)||js(y))return x!==null?null:d(h,p,y,j,null);ro(h,y)}return null}function S(h,p,y,j,x){if(typeof j=="string"&&j!==""||typeof j=="number")return h=h.get(y)||null,l(p,h,""+j,x);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Ki:return h=h.get(j.key===null?y:j.key)||null,c(p,h,j,x);case Pr:return h=h.get(j.key===null?y:j.key)||null,u(p,h,j,x);case jn:var N=j._init;return S(h,p,y,N(j._payload),x)}if(Ds(j)||js(j))return h=h.get(y)||null,d(p,h,j,x,null);ro(p,j)}return null}function b(h,p,y,j){for(var x=null,N=null,A=p,P=p=0,C=null;A!==null&&P<y.length;P++){A.index>P?(C=A,A=null):C=A.sibling;var E=m(h,A,y[P],j);if(E===null){A===null&&(A=C);break}e&&A&&E.alternate===null&&t(h,A),p=i(E,p,P),N===null?x=E:N.sibling=E,N=E,A=C}if(P===y.length)return n(h,A),ce&&qn(h,P),x;if(A===null){for(;P<y.length;P++)A=f(h,y[P],j),A!==null&&(p=i(A,p,P),N===null?x=A:N.sibling=A,N=A);return ce&&qn(h,P),x}for(A=r(h,A);P<y.length;P++)C=S(A,h,P,y[P],j),C!==null&&(e&&C.alternate!==null&&A.delete(C.key===null?P:C.key),p=i(C,p,P),N===null?x=C:N.sibling=C,N=C);return e&&A.forEach(function(T){return t(h,T)}),ce&&qn(h,P),x}function w(h,p,y,j){var x=js(y);if(typeof x!="function")throw Error(I(150));if(y=x.call(y),y==null)throw Error(I(151));for(var N=x=null,A=p,P=p=0,C=null,E=y.next();A!==null&&!E.done;P++,E=y.next()){A.index>P?(C=A,A=null):C=A.sibling;var T=m(h,A,E.value,j);if(T===null){A===null&&(A=C);break}e&&A&&T.alternate===null&&t(h,A),p=i(T,p,P),N===null?x=T:N.sibling=T,N=T,A=C}if(E.done)return n(h,A),ce&&qn(h,P),x;if(A===null){for(;!E.done;P++,E=y.next())E=f(h,E.value,j),E!==null&&(p=i(E,p,P),N===null?x=E:N.sibling=E,N=E);return ce&&qn(h,P),x}for(A=r(h,A);!E.done;P++,E=y.next())E=S(A,h,P,E.value,j),E!==null&&(e&&E.alternate!==null&&A.delete(E.key===null?P:E.key),p=i(E,p,P),N===null?x=E:N.sibling=E,N=E);return e&&A.forEach(function(M){return t(h,M)}),ce&&qn(h,P),x}function k(h,p,y,j){if(typeof y=="object"&&y!==null&&y.type===Tr&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Ki:e:{for(var x=y.key,N=p;N!==null;){if(N.key===x){if(x=y.type,x===Tr){if(N.tag===7){n(h,N.sibling),p=s(N,y.props.children),p.return=h,h=p;break e}}else if(N.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===jn&&Jh(x)===N.type){n(h,N.sibling),p=s(N,y.props),p.ref=Ns(h,N,y),p.return=h,h=p;break e}n(h,N);break}else t(h,N);N=N.sibling}y.type===Tr?(p=lr(y.props.children,h.mode,j,y.key),p.return=h,h=p):(j=To(y.type,y.key,y.props,null,h.mode,j),j.ref=Ns(h,p,y),j.return=h,h=j)}return a(h);case Pr:e:{for(N=y.key;p!==null;){if(p.key===N)if(p.tag===4&&p.stateNode.containerInfo===y.containerInfo&&p.stateNode.implementation===y.implementation){n(h,p.sibling),p=s(p,y.children||[]),p.return=h,h=p;break e}else{n(h,p);break}else t(h,p);p=p.sibling}p=Al(y,h.mode,j),p.return=h,h=p}return a(h);case jn:return N=y._init,k(h,p,N(y._payload),j)}if(Ds(y))return b(h,p,y,j);if(js(y))return w(h,p,y,j);ro(h,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,p!==null&&p.tag===6?(n(h,p.sibling),p=s(p,y),p.return=h,h=p):(n(h,p),p=Nl(y,h.mode,j),p.return=h,h=p),a(h)):n(h,p)}return k}var ts=Gy(!0),Yy=Gy(!1),Ko=zn(null),Go=null,Or=null,Wu=null;function Hu(){Wu=Or=Go=null}function Ku(e){var t=Ko.current;le(Ko),e._currentValue=t}function Pc(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Qr(e,t){Go=e,Wu=Or=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(qe=!0),e.firstContext=null)}function kt(e){var t=e._currentValue;if(Wu!==e)if(e={context:e,memoizedValue:t,next:null},Or===null){if(Go===null)throw Error(I(308));Or=e,Go.dependencies={lanes:0,firstContext:e}}else Or=Or.next=e;return t}var sr=null;function Gu(e){sr===null?sr=[e]:sr.push(e)}function Qy(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,Gu(t)):(n.next=s.next,s.next=n),t.interleaved=n,rn(e,r)}function rn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Sn=!1;function Yu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xy(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function qt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Rn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,J&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,rn(e,n)}return s=r.interleaved,s===null?(t.next=t,Gu(r)):(t.next=s.next,s.next=t),r.interleaved=t,rn(e,n)}function ko(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Mu(e,n)}}function qh(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=t:i=i.next=t}else s=i=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Yo(e,t,n,r){var s=e.updateQueue;Sn=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;a=0,d=u=c=null,l=i;do{var m=l.lane,S=l.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:S,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=e,w=l;switch(m=t,S=n,w.tag){case 1:if(b=w.payload,typeof b=="function"){f=b.call(S,f,m);break e}f=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=w.payload,m=typeof b=="function"?b.call(S,f,m):b,m==null)break e;f=fe({},f,m);break e;case 2:Sn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else S={eventTime:S,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=S,c=f):d=d.next=S,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);pr|=a,e.lanes=a,e.memoizedState=f}}function Zh(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(I(191,s));s.call(r)}}}var Ei={},$t=zn(Ei),fi=zn(Ei),mi=zn(Ei);function ir(e){if(e===Ei)throw Error(I(174));return e}function Qu(e,t){switch(oe(mi,t),oe(fi,e),oe($t,Ei),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:lc(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=lc(t,e)}le($t),oe($t,t)}function ns(){le($t),le(fi),le(mi)}function Jy(e){ir(mi.current);var t=ir($t.current),n=lc(t,e.type);t!==n&&(oe(fi,e),oe($t,n))}function Xu(e){fi.current===e&&(le($t),le(fi))}var ue=zn(0);function Qo(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var wl=[];function Ju(){for(var e=0;e<wl.length;e++)wl[e]._workInProgressVersionPrimary=null;wl.length=0}var bo=ln.ReactCurrentDispatcher,jl=ln.ReactCurrentBatchConfig,hr=0,he=null,be=null,Ae=null,Xo=!1,Gs=!1,yi=0,Yw=0;function Ie(){throw Error(I(321))}function qu(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Mt(e[n],t[n]))return!1;return!0}function Zu(e,t,n,r,s,i){if(hr=i,he=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,bo.current=e===null||e.memoizedState===null?qw:Zw,e=n(r,s),Gs){i=0;do{if(Gs=!1,yi=0,25<=i)throw Error(I(301));i+=1,Ae=be=null,t.updateQueue=null,bo.current=ej,e=n(r,s)}while(Gs)}if(bo.current=Jo,t=be!==null&&be.next!==null,hr=0,Ae=be=he=null,Xo=!1,t)throw Error(I(300));return e}function ed(){var e=yi!==0;return yi=0,e}function Bt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ae===null?he.memoizedState=Ae=e:Ae=Ae.next=e,Ae}function bt(){if(be===null){var e=he.alternate;e=e!==null?e.memoizedState:null}else e=be.next;var t=Ae===null?he.memoizedState:Ae.next;if(t!==null)Ae=t,be=e;else{if(e===null)throw Error(I(310));be=e,e={memoizedState:be.memoizedState,baseState:be.baseState,baseQueue:be.baseQueue,queue:be.queue,next:null},Ae===null?he.memoizedState=Ae=e:Ae=Ae.next=e}return Ae}function gi(e,t){return typeof t=="function"?t(e):t}function Sl(e){var t=bt(),n=t.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=e;var r=be,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,u=i;do{var d=u.lane;if((hr&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,a=r):c=c.next=f,he.lanes|=d,pr|=d}u=u.next}while(u!==null&&u!==i);c===null?a=r:c.next=l,Mt(r,t.memoizedState)||(qe=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do i=s.lane,he.lanes|=i,pr|=i,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function kl(e){var t=bt(),n=t.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=e(i,a.action),a=a.next;while(a!==s);Mt(i,t.memoizedState)||(qe=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function qy(){}function Zy(e,t){var n=he,r=bt(),s=t(),i=!Mt(r.memoizedState,s);if(i&&(r.memoizedState=s,qe=!0),r=r.queue,td(ng.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||Ae!==null&&Ae.memoizedState.tag&1){if(n.flags|=2048,vi(9,tg.bind(null,n,r,s,t),void 0,null),Te===null)throw Error(I(349));hr&30||eg(n,t,s)}return s}function eg(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=he.updateQueue,t===null?(t={lastEffect:null,stores:null},he.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function tg(e,t,n,r){t.value=n,t.getSnapshot=r,rg(t)&&sg(e)}function ng(e,t,n){return n(function(){rg(t)&&sg(e)})}function rg(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Mt(e,n)}catch{return!0}}function sg(e){var t=rn(e,1);t!==null&&Rt(t,e,1,-1)}function ep(e){var t=Bt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:e},t.queue=e,e=e.dispatch=Jw.bind(null,he,e),[t.memoizedState,e]}function vi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=he.updateQueue,t===null?(t={lastEffect:null,stores:null},he.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function ig(){return bt().memoizedState}function Co(e,t,n,r){var s=Bt();he.flags|=e,s.memoizedState=vi(1|t,n,void 0,r===void 0?null:r)}function ba(e,t,n,r){var s=bt();r=r===void 0?null:r;var i=void 0;if(be!==null){var a=be.memoizedState;if(i=a.destroy,r!==null&&qu(r,a.deps)){s.memoizedState=vi(t,n,i,r);return}}he.flags|=e,s.memoizedState=vi(1|t,n,i,r)}function tp(e,t){return Co(8390656,8,e,t)}function td(e,t){return ba(2048,8,e,t)}function og(e,t){return ba(4,2,e,t)}function ag(e,t){return ba(4,4,e,t)}function lg(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function cg(e,t,n){return n=n!=null?n.concat([e]):null,ba(4,4,lg.bind(null,t,e),n)}function nd(){}function ug(e,t){var n=bt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&qu(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function dg(e,t){var n=bt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&qu(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function hg(e,t,n){return hr&21?(Mt(n,t)||(n=gy(),he.lanes|=n,pr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,qe=!0),e.memoizedState=n)}function Qw(e,t){var n=re;re=n!==0&&4>n?n:4,e(!0);var r=jl.transition;jl.transition={};try{e(!1),t()}finally{re=n,jl.transition=r}}function pg(){return bt().memoizedState}function Xw(e,t,n){var r=Ln(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},fg(e))mg(t,n);else if(n=Qy(e,t,n,r),n!==null){var s=We();Rt(n,e,r,s),yg(n,t,r)}}function Jw(e,t,n){var r=Ln(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(fg(e))mg(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,Mt(l,a)){var c=t.interleaved;c===null?(s.next=s,Gu(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}n=Qy(e,t,s,r),n!==null&&(s=We(),Rt(n,e,r,s),yg(n,t,r))}}function fg(e){var t=e.alternate;return e===he||t!==null&&t===he}function mg(e,t){Gs=Xo=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function yg(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Mu(e,n)}}var Jo={readContext:kt,useCallback:Ie,useContext:Ie,useEffect:Ie,useImperativeHandle:Ie,useInsertionEffect:Ie,useLayoutEffect:Ie,useMemo:Ie,useReducer:Ie,useRef:Ie,useState:Ie,useDebugValue:Ie,useDeferredValue:Ie,useTransition:Ie,useMutableSource:Ie,useSyncExternalStore:Ie,useId:Ie,unstable_isNewReconciler:!1},qw={readContext:kt,useCallback:function(e,t){return Bt().memoizedState=[e,t===void 0?null:t],e},useContext:kt,useEffect:tp,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Co(4194308,4,lg.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Co(4194308,4,e,t)},useInsertionEffect:function(e,t){return Co(4,2,e,t)},useMemo:function(e,t){var n=Bt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Bt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Xw.bind(null,he,e),[r.memoizedState,e]},useRef:function(e){var t=Bt();return e={current:e},t.memoizedState=e},useState:ep,useDebugValue:nd,useDeferredValue:function(e){return Bt().memoizedState=e},useTransition:function(){var e=ep(!1),t=e[0];return e=Qw.bind(null,e[1]),Bt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=he,s=Bt();if(ce){if(n===void 0)throw Error(I(407));n=n()}else{if(n=t(),Te===null)throw Error(I(349));hr&30||eg(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,tp(ng.bind(null,r,i,e),[e]),r.flags|=2048,vi(9,tg.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=Bt(),t=Te.identifierPrefix;if(ce){var n=Jt,r=Xt;n=(r&~(1<<32-_t(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=yi++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Yw++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zw={readContext:kt,useCallback:ug,useContext:kt,useEffect:td,useImperativeHandle:cg,useInsertionEffect:og,useLayoutEffect:ag,useMemo:dg,useReducer:Sl,useRef:ig,useState:function(){return Sl(gi)},useDebugValue:nd,useDeferredValue:function(e){var t=bt();return hg(t,be.memoizedState,e)},useTransition:function(){var e=Sl(gi)[0],t=bt().memoizedState;return[e,t]},useMutableSource:qy,useSyncExternalStore:Zy,useId:pg,unstable_isNewReconciler:!1},ej={readContext:kt,useCallback:ug,useContext:kt,useEffect:td,useImperativeHandle:cg,useInsertionEffect:og,useLayoutEffect:ag,useMemo:dg,useReducer:kl,useRef:ig,useState:function(){return kl(gi)},useDebugValue:nd,useDeferredValue:function(e){var t=bt();return be===null?t.memoizedState=e:hg(t,be.memoizedState,e)},useTransition:function(){var e=kl(gi)[0],t=bt().memoizedState;return[e,t]},useMutableSource:qy,useSyncExternalStore:Zy,useId:pg,unstable_isNewReconciler:!1};function Pt(e,t){if(e&&e.defaultProps){t=fe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Tc(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:fe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ca={isMounted:function(e){return(e=e._reactInternals)?yr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=We(),s=Ln(e),i=qt(r,s);i.payload=t,n!=null&&(i.callback=n),t=Rn(e,i,s),t!==null&&(Rt(t,e,s,r),ko(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=We(),s=Ln(e),i=qt(r,s);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=Rn(e,i,s),t!==null&&(Rt(t,e,s,r),ko(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=We(),r=Ln(e),s=qt(n,r);s.tag=2,t!=null&&(s.callback=t),t=Rn(e,s,r),t!==null&&(Rt(t,e,r,n),ko(t,e,r))}};function np(e,t,n,r,s,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,a):t.prototype&&t.prototype.isPureReactComponent?!ui(n,r)||!ui(s,i):!0}function gg(e,t,n){var r=!1,s=Vn,i=t.contextType;return typeof i=="object"&&i!==null?i=kt(i):(s=et(t)?ur:ze.current,r=t.contextTypes,i=(r=r!=null)?Zr(e,s):Vn),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ca,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function rp(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ca.enqueueReplaceState(t,t.state,null)}function Ec(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Yu(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=kt(i):(i=et(t)?ur:ze.current,s.context=Zr(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Tc(e,t,i,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Ca.enqueueReplaceState(s,s.state,null),Yo(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function rs(e,t){try{var n="",r=t;do n+=P1(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function bl(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function _c(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var tj=typeof WeakMap=="function"?WeakMap:Map;function vg(e,t,n){n=qt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Zo||(Zo=!0,zc=r),_c(e,t)},n}function xg(e,t,n){n=qt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){_c(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){_c(e,t),typeof r!="function"&&(Mn===null?Mn=new Set([this]):Mn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function sp(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new tj;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=mj.bind(null,e,t,n),t.then(e,e))}function ip(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function op(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=qt(-1,1),t.tag=2,Rn(n,t,1))),n.lanes|=1),e)}var nj=ln.ReactCurrentOwner,qe=!1;function $e(e,t,n,r){t.child=e===null?Yy(t,null,n,r):ts(t,e.child,n,r)}function ap(e,t,n,r,s){n=n.render;var i=t.ref;return Qr(t,s),r=Zu(e,t,n,r,i,s),n=ed(),e!==null&&!qe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,sn(e,t,s)):(ce&&n&&zu(t),t.flags|=1,$e(e,t,r,s),t.child)}function lp(e,t,n,r,s){if(e===null){var i=n.type;return typeof i=="function"&&!ud(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,wg(e,t,i,r,s)):(e=To(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:ui,n(a,r)&&e.ref===t.ref)return sn(e,t,s)}return t.flags|=1,e=Dn(i,r),e.ref=t.ref,e.return=t,t.child=e}function wg(e,t,n,r,s){if(e!==null){var i=e.memoizedProps;if(ui(i,r)&&e.ref===t.ref)if(qe=!1,t.pendingProps=r=i,(e.lanes&s)!==0)e.flags&131072&&(qe=!0);else return t.lanes=e.lanes,sn(e,t,s)}return Rc(e,t,n,r,s)}function jg(e,t,n){var r=t.pendingProps,s=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},oe(Fr,rt),rt|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,oe(Fr,rt),rt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,oe(Fr,rt),rt|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,oe(Fr,rt),rt|=r;return $e(e,t,s,n),t.child}function Sg(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Rc(e,t,n,r,s){var i=et(n)?ur:ze.current;return i=Zr(t,i),Qr(t,s),n=Zu(e,t,n,r,i,s),r=ed(),e!==null&&!qe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,sn(e,t,s)):(ce&&r&&zu(t),t.flags|=1,$e(e,t,n,s),t.child)}function cp(e,t,n,r,s){if(et(n)){var i=!0;$o(t)}else i=!1;if(Qr(t,s),t.stateNode===null)No(e,t),gg(t,n,r),Ec(t,n,r,s),r=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=kt(u):(u=et(n)?ur:ze.current,u=Zr(t,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&rp(t,a,r,u),Sn=!1;var m=t.memoizedState;a.state=m,Yo(t,r,a,s),c=t.memoizedState,l!==r||m!==c||Ze.current||Sn?(typeof d=="function"&&(Tc(t,n,d,r),c=t.memoizedState),(l=Sn||np(t,n,l,r,m,c,u))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Xy(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Pt(t.type,l),a.props=u,f=t.pendingProps,m=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=kt(c):(c=et(n)?ur:ze.current,c=Zr(t,c));var S=n.getDerivedStateFromProps;(d=typeof S=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||m!==c)&&rp(t,a,r,c),Sn=!1,m=t.memoizedState,a.state=m,Yo(t,r,a,s);var b=t.memoizedState;l!==f||m!==b||Ze.current||Sn?(typeof S=="function"&&(Tc(t,n,S,r),b=t.memoizedState),(u=Sn||np(t,n,u,r,m,b,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,b,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,b,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=b),a.props=r,a.state=b,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return Mc(e,t,n,r,i,s)}function Mc(e,t,n,r,s,i){Sg(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return s&&Yh(t,n,!1),sn(e,t,i);r=t.stateNode,nj.current=t;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=ts(t,e.child,null,i),t.child=ts(t,null,l,i)):$e(e,t,l,i),t.memoizedState=r.state,s&&Yh(t,n,!0),t.child}function kg(e){var t=e.stateNode;t.pendingContext?Gh(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Gh(e,t.context,!1),Qu(e,t.containerInfo)}function up(e,t,n,r,s){return es(),$u(s),t.flags|=256,$e(e,t,n,r),t.child}var Lc={dehydrated:null,treeContext:null,retryLane:0};function Dc(e){return{baseLanes:e,cachePool:null,transitions:null}}function bg(e,t,n){var r=t.pendingProps,s=ue.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),oe(ue,s&1),e===null)return Ac(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,i?(r=t.mode,i=t.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Pa(a,r,0,null),e=lr(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Dc(n),t.memoizedState=Lc,e):rd(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return rj(e,t,a,r,l,s,n);if(i){i=r.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Dn(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Dn(l,i):(i=lr(i,a,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,a=e.child.memoizedState,a=a===null?Dc(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~n,t.memoizedState=Lc,r}return i=e.child,e=i.sibling,r=Dn(i,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function rd(e,t){return t=Pa({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function so(e,t,n,r){return r!==null&&$u(r),ts(t,e.child,null,n),e=rd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function rj(e,t,n,r,s,i,a){if(n)return t.flags&256?(t.flags&=-257,r=bl(Error(I(422))),so(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,s=t.mode,r=Pa({mode:"visible",children:r.children},s,0,null),i=lr(i,s,a,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,t.mode&1&&ts(t,e.child,null,a),t.child.memoizedState=Dc(a),t.memoizedState=Lc,i);if(!(t.mode&1))return so(e,t,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(I(419)),r=bl(i,r,void 0),so(e,t,a,r)}if(l=(a&e.childLanes)!==0,qe||l){if(r=Te,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,rn(e,s),Rt(r,e,s,-1))}return cd(),r=bl(Error(I(421))),so(e,t,a,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=yj.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,st=_n(s.nextSibling),it=t,ce=!0,Et=null,e!==null&&(xt[wt++]=Xt,xt[wt++]=Jt,xt[wt++]=dr,Xt=e.id,Jt=e.overflow,dr=t),t=rd(t,r.children),t.flags|=4096,t)}function dp(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Pc(e.return,t,n)}function Cl(e,t,n,r,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Cg(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if($e(e,t,r.children,n),r=ue.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&dp(e,n,t);else if(e.tag===19)dp(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(oe(ue,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&Qo(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Cl(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Qo(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Cl(t,!0,n,null,i);break;case"together":Cl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function No(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function sn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),pr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(I(153));if(t.child!==null){for(e=t.child,n=Dn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Dn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function sj(e,t,n){switch(t.tag){case 3:kg(t),es();break;case 5:Jy(t);break;case 1:et(t.type)&&$o(t);break;case 4:Qu(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;oe(Ko,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(oe(ue,ue.current&1),t.flags|=128,null):n&t.child.childLanes?bg(e,t,n):(oe(ue,ue.current&1),e=sn(e,t,n),e!==null?e.sibling:null);oe(ue,ue.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Cg(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),oe(ue,ue.current),r)break;return null;case 22:case 23:return t.lanes=0,jg(e,t,n)}return sn(e,t,n)}var Ng,Ic,Ag,Pg;Ng=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ic=function(){};Ag=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,ir($t.current);var i=null;switch(n){case"input":s=sc(e,s),r=sc(e,r),i=[];break;case"select":s=fe({},s,{value:void 0}),r=fe({},r,{value:void 0}),i=[];break;case"textarea":s=ac(e,s),r=ac(e,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=zo)}cc(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ri.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ri.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ae("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};Pg=function(e,t,n,r){n!==r&&(t.flags|=4)};function As(e,t){if(!ce)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Oe(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ij(e,t,n){var r=t.pendingProps;switch(Uu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Oe(t),null;case 1:return et(t.type)&&Uo(),Oe(t),null;case 3:return r=t.stateNode,ns(),le(Ze),le(ze),Ju(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(no(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Et!==null&&(Wc(Et),Et=null))),Ic(e,t),Oe(t),null;case 5:Xu(t);var s=ir(mi.current);if(n=t.type,e!==null&&t.stateNode!=null)Ag(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(I(166));return Oe(t),null}if(e=ir($t.current),no(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[zt]=t,r[pi]=i,e=(t.mode&1)!==0,n){case"dialog":ae("cancel",r),ae("close",r);break;case"iframe":case"object":case"embed":ae("load",r);break;case"video":case"audio":for(s=0;s<Os.length;s++)ae(Os[s],r);break;case"source":ae("error",r);break;case"img":case"image":case"link":ae("error",r),ae("load",r);break;case"details":ae("toggle",r);break;case"input":wh(r,i),ae("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ae("invalid",r);break;case"textarea":Sh(r,i),ae("invalid",r)}cc(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&to(r.textContent,l,e),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&to(r.textContent,l,e),s=["children",""+l]):ri.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&ae("scroll",r)}switch(n){case"input":Gi(r),jh(r,i,!0);break;case"textarea":Gi(r),kh(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=zo)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=ny(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[zt]=t,e[pi]=r,Ng(e,t,!1,!1),t.stateNode=e;e:{switch(a=uc(n,r),n){case"dialog":ae("cancel",e),ae("close",e),s=r;break;case"iframe":case"object":case"embed":ae("load",e),s=r;break;case"video":case"audio":for(s=0;s<Os.length;s++)ae(Os[s],e);s=r;break;case"source":ae("error",e),s=r;break;case"img":case"image":case"link":ae("error",e),ae("load",e),s=r;break;case"details":ae("toggle",e),s=r;break;case"input":wh(e,r),s=sc(e,r),ae("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=fe({},r,{value:void 0}),ae("invalid",e);break;case"textarea":Sh(e,r),s=ac(e,r),ae("invalid",e);break;default:s=r}cc(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?iy(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ry(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&si(e,c):typeof c=="number"&&si(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ri.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ae("scroll",e):c!=null&&Au(e,i,c,a))}switch(n){case"input":Gi(e),jh(e,r,!1);break;case"textarea":Gi(e),kh(e);break;case"option":r.value!=null&&e.setAttribute("value",""+On(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Hr(e,!!r.multiple,i,!1):r.defaultValue!=null&&Hr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=zo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Oe(t),null;case 6:if(e&&t.stateNode!=null)Pg(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(I(166));if(n=ir(mi.current),ir($t.current),no(t)){if(r=t.stateNode,n=t.memoizedProps,r[zt]=t,(i=r.nodeValue!==n)&&(e=it,e!==null))switch(e.tag){case 3:to(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&to(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[zt]=t,t.stateNode=r}return Oe(t),null;case 13:if(le(ue),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ce&&st!==null&&t.mode&1&&!(t.flags&128))Ky(),es(),t.flags|=98560,i=!1;else if(i=no(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(I(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(I(317));i[zt]=t}else es(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Oe(t),i=!1}else Et!==null&&(Wc(Et),Et=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ue.current&1?Ce===0&&(Ce=3):cd())),t.updateQueue!==null&&(t.flags|=4),Oe(t),null);case 4:return ns(),Ic(e,t),e===null&&di(t.stateNode.containerInfo),Oe(t),null;case 10:return Ku(t.type._context),Oe(t),null;case 17:return et(t.type)&&Uo(),Oe(t),null;case 19:if(le(ue),i=t.memoizedState,i===null)return Oe(t),null;if(r=(t.flags&128)!==0,a=i.rendering,a===null)if(r)As(i,!1);else{if(Ce!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Qo(e),a!==null){for(t.flags|=128,As(i,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return oe(ue,ue.current&1|2),t.child}e=e.sibling}i.tail!==null&&ve()>ss&&(t.flags|=128,r=!0,As(i,!1),t.lanes=4194304)}else{if(!r)if(e=Qo(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),As(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!ce)return Oe(t),null}else 2*ve()-i.renderingStartTime>ss&&n!==1073741824&&(t.flags|=128,r=!0,As(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(n=i.last,n!==null?n.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=ve(),t.sibling=null,n=ue.current,oe(ue,r?n&1|2:n&1),t):(Oe(t),null);case 22:case 23:return ld(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?rt&1073741824&&(Oe(t),t.subtreeFlags&6&&(t.flags|=8192)):Oe(t),null;case 24:return null;case 25:return null}throw Error(I(156,t.tag))}function oj(e,t){switch(Uu(t),t.tag){case 1:return et(t.type)&&Uo(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ns(),le(Ze),le(ze),Ju(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Xu(t),null;case 13:if(le(ue),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(I(340));es()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return le(ue),null;case 4:return ns(),null;case 10:return Ku(t.type._context),null;case 22:case 23:return ld(),null;case 24:return null;default:return null}}var io=!1,Fe=!1,aj=typeof WeakSet=="function"?WeakSet:Set,F=null;function Vr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ye(e,t,r)}else n.current=null}function Oc(e,t,n){try{n()}catch(r){ye(e,t,r)}}var hp=!1;function lj(e,t){if(wc=Vo,e=My(),Bu(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,f=e,m=null;t:for(;;){for(var S;f!==n||s!==0&&f.nodeType!==3||(l=a+s),f!==i||r!==0&&f.nodeType!==3||(c=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(S=f.firstChild)!==null;)m=f,f=S;for(;;){if(f===e)break t;if(m===n&&++u===s&&(l=a),m===i&&++d===r&&(c=a),(S=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=S}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(jc={focusedElem:e,selectionRange:n},Vo=!1,F=t;F!==null;)if(t=F,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,F=e;else for(;F!==null;){t=F;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var w=b.memoizedProps,k=b.memoizedState,h=t.stateNode,p=h.getSnapshotBeforeUpdate(t.elementType===t.type?w:Pt(t.type,w),k);h.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(I(163))}}catch(j){ye(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,F=e;break}F=t.return}return b=hp,hp=!1,b}function Ys(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&Oc(t,n,i)}s=s.next}while(s!==r)}}function Na(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Vc(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Tg(e){var t=e.alternate;t!==null&&(e.alternate=null,Tg(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[zt],delete t[pi],delete t[bc],delete t[Ww],delete t[Hw])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Eg(e){return e.tag===5||e.tag===3||e.tag===4}function pp(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Eg(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Fc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=zo));else if(r!==4&&(e=e.child,e!==null))for(Fc(e,t,n),e=e.sibling;e!==null;)Fc(e,t,n),e=e.sibling}function Bc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Bc(e,t,n),e=e.sibling;e!==null;)Bc(e,t,n),e=e.sibling}var _e=null,Tt=!1;function gn(e,t,n){for(n=n.child;n!==null;)_g(e,t,n),n=n.sibling}function _g(e,t,n){if(Ut&&typeof Ut.onCommitFiberUnmount=="function")try{Ut.onCommitFiberUnmount(va,n)}catch{}switch(n.tag){case 5:Fe||Vr(n,t);case 6:var r=_e,s=Tt;_e=null,gn(e,t,n),_e=r,Tt=s,_e!==null&&(Tt?(e=_e,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):_e.removeChild(n.stateNode));break;case 18:_e!==null&&(Tt?(e=_e,n=n.stateNode,e.nodeType===8?vl(e.parentNode,n):e.nodeType===1&&vl(e,n),li(e)):vl(_e,n.stateNode));break;case 4:r=_e,s=Tt,_e=n.stateNode.containerInfo,Tt=!0,gn(e,t,n),_e=r,Tt=s;break;case 0:case 11:case 14:case 15:if(!Fe&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Oc(n,t,a),s=s.next}while(s!==r)}gn(e,t,n);break;case 1:if(!Fe&&(Vr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ye(n,t,l)}gn(e,t,n);break;case 21:gn(e,t,n);break;case 22:n.mode&1?(Fe=(r=Fe)||n.memoizedState!==null,gn(e,t,n),Fe=r):gn(e,t,n);break;default:gn(e,t,n)}}function fp(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new aj),t.forEach(function(r){var s=gj.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Nt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:_e=l.stateNode,Tt=!1;break e;case 3:_e=l.stateNode.containerInfo,Tt=!0;break e;case 4:_e=l.stateNode.containerInfo,Tt=!0;break e}l=l.return}if(_e===null)throw Error(I(160));_g(i,a,s),_e=null,Tt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){ye(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Rg(t,e),t=t.sibling}function Rg(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Nt(t,e),Vt(e),r&4){try{Ys(3,e,e.return),Na(3,e)}catch(w){ye(e,e.return,w)}try{Ys(5,e,e.return)}catch(w){ye(e,e.return,w)}}break;case 1:Nt(t,e),Vt(e),r&512&&n!==null&&Vr(n,n.return);break;case 5:if(Nt(t,e),Vt(e),r&512&&n!==null&&Vr(n,n.return),e.flags&32){var s=e.stateNode;try{si(s,"")}catch(w){ye(e,e.return,w)}}if(r&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,a=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&ey(s,i),uc(l,a);var u=uc(l,i);for(a=0;a<c.length;a+=2){var d=c[a],f=c[a+1];d==="style"?iy(s,f):d==="dangerouslySetInnerHTML"?ry(s,f):d==="children"?si(s,f):Au(s,d,f,u)}switch(l){case"input":ic(s,i);break;case"textarea":ty(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var S=i.value;S!=null?Hr(s,!!i.multiple,S,!1):m!==!!i.multiple&&(i.defaultValue!=null?Hr(s,!!i.multiple,i.defaultValue,!0):Hr(s,!!i.multiple,i.multiple?[]:"",!1))}s[pi]=i}catch(w){ye(e,e.return,w)}}break;case 6:if(Nt(t,e),Vt(e),r&4){if(e.stateNode===null)throw Error(I(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(w){ye(e,e.return,w)}}break;case 3:if(Nt(t,e),Vt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{li(t.containerInfo)}catch(w){ye(e,e.return,w)}break;case 4:Nt(t,e),Vt(e);break;case 13:Nt(t,e),Vt(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(od=ve())),r&4&&fp(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(Fe=(u=Fe)||d,Nt(t,e),Fe=u):Nt(t,e),Vt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(F=e,d=e.child;d!==null;){for(f=F=d;F!==null;){switch(m=F,S=m.child,m.tag){case 0:case 11:case 14:case 15:Ys(4,m,m.return);break;case 1:Vr(m,m.return);var b=m.stateNode;if(typeof b.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(w){ye(r,n,w)}}break;case 5:Vr(m,m.return);break;case 22:if(m.memoizedState!==null){yp(f);continue}}S!==null?(S.return=m,F=S):yp(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=sy("display",a))}catch(w){ye(e,e.return,w)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(w){ye(e,e.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Nt(t,e),Vt(e),r&4&&fp(e);break;case 21:break;default:Nt(t,e),Vt(e)}}function Vt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Eg(n)){var r=n;break e}n=n.return}throw Error(I(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(si(s,""),r.flags&=-33);var i=pp(e);Bc(e,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=pp(e);Fc(e,l,a);break;default:throw Error(I(161))}}catch(c){ye(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function cj(e,t,n){F=e,Mg(e)}function Mg(e,t,n){for(var r=(e.mode&1)!==0;F!==null;){var s=F,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||io;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Fe;l=io;var u=Fe;if(io=a,(Fe=c)&&!u)for(F=s;F!==null;)a=F,c=a.child,a.tag===22&&a.memoizedState!==null?gp(s):c!==null?(c.return=a,F=c):gp(s);for(;i!==null;)F=i,Mg(i),i=i.sibling;F=s,io=l,Fe=u}mp(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,F=i):mp(e)}}function mp(e){for(;F!==null;){var t=F;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Fe||Na(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Fe)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:Pt(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Zh(t,i,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Zh(t,a,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&li(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(I(163))}Fe||t.flags&512&&Vc(t)}catch(m){ye(t,t.return,m)}}if(t===e){F=null;break}if(n=t.sibling,n!==null){n.return=t.return,F=n;break}F=t.return}}function yp(e){for(;F!==null;){var t=F;if(t===e){F=null;break}var n=t.sibling;if(n!==null){n.return=t.return,F=n;break}F=t.return}}function gp(e){for(;F!==null;){var t=F;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Na(4,t)}catch(c){ye(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(c){ye(t,s,c)}}var i=t.return;try{Vc(t)}catch(c){ye(t,i,c)}break;case 5:var a=t.return;try{Vc(t)}catch(c){ye(t,a,c)}}}catch(c){ye(t,t.return,c)}if(t===e){F=null;break}var l=t.sibling;if(l!==null){l.return=t.return,F=l;break}F=t.return}}var uj=Math.ceil,qo=ln.ReactCurrentDispatcher,sd=ln.ReactCurrentOwner,St=ln.ReactCurrentBatchConfig,J=0,Te=null,je=null,Re=0,rt=0,Fr=zn(0),Ce=0,xi=null,pr=0,Aa=0,id=0,Qs=null,Je=null,od=0,ss=1/0,Yt=null,Zo=!1,zc=null,Mn=null,oo=!1,Nn=null,ea=0,Xs=0,Uc=null,Ao=-1,Po=0;function We(){return J&6?ve():Ao!==-1?Ao:Ao=ve()}function Ln(e){return e.mode&1?J&2&&Re!==0?Re&-Re:Gw.transition!==null?(Po===0&&(Po=gy()),Po):(e=re,e!==0||(e=window.event,e=e===void 0?16:by(e.type)),e):1}function Rt(e,t,n,r){if(50<Xs)throw Xs=0,Uc=null,Error(I(185));Ai(e,n,r),(!(J&2)||e!==Te)&&(e===Te&&(!(J&2)&&(Aa|=n),Ce===4&&bn(e,Re)),tt(e,r),n===1&&J===0&&!(t.mode&1)&&(ss=ve()+500,ka&&Un()))}function tt(e,t){var n=e.callbackNode;G1(e,t);var r=Oo(e,e===Te?Re:0);if(r===0)n!==null&&Nh(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Nh(n),t===1)e.tag===0?Kw(vp.bind(null,e)):$y(vp.bind(null,e)),Uw(function(){!(J&6)&&Un()}),n=null;else{switch(vy(r)){case 1:n=Ru;break;case 4:n=my;break;case 16:n=Io;break;case 536870912:n=yy;break;default:n=Io}n=zg(n,Lg.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Lg(e,t){if(Ao=-1,Po=0,J&6)throw Error(I(327));var n=e.callbackNode;if(Xr()&&e.callbackNode!==n)return null;var r=Oo(e,e===Te?Re:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ta(e,r);else{t=r;var s=J;J|=2;var i=Ig();(Te!==e||Re!==t)&&(Yt=null,ss=ve()+500,ar(e,t));do try{pj();break}catch(l){Dg(e,l)}while(!0);Hu(),qo.current=i,J=s,je!==null?t=0:(Te=null,Re=0,t=Ce)}if(t!==0){if(t===2&&(s=mc(e),s!==0&&(r=s,t=$c(e,s))),t===1)throw n=xi,ar(e,0),bn(e,r),tt(e,ve()),n;if(t===6)bn(e,r);else{if(s=e.current.alternate,!(r&30)&&!dj(s)&&(t=ta(e,r),t===2&&(i=mc(e),i!==0&&(r=i,t=$c(e,i))),t===1))throw n=xi,ar(e,0),bn(e,r),tt(e,ve()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(I(345));case 2:Zn(e,Je,Yt);break;case 3:if(bn(e,r),(r&130023424)===r&&(t=od+500-ve(),10<t)){if(Oo(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){We(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=kc(Zn.bind(null,e,Je,Yt),t);break}Zn(e,Je,Yt);break;case 4:if(bn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-_t(r);i=1<<a,a=t[a],a>s&&(s=a),r&=~i}if(r=s,r=ve()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*uj(r/1960))-r,10<r){e.timeoutHandle=kc(Zn.bind(null,e,Je,Yt),r);break}Zn(e,Je,Yt);break;case 5:Zn(e,Je,Yt);break;default:throw Error(I(329))}}}return tt(e,ve()),e.callbackNode===n?Lg.bind(null,e):null}function $c(e,t){var n=Qs;return e.current.memoizedState.isDehydrated&&(ar(e,t).flags|=256),e=ta(e,t),e!==2&&(t=Je,Je=n,t!==null&&Wc(t)),e}function Wc(e){Je===null?Je=e:Je.push.apply(Je,e)}function dj(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Mt(i(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function bn(e,t){for(t&=~id,t&=~Aa,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-_t(t),r=1<<n;e[n]=-1,t&=~r}}function vp(e){if(J&6)throw Error(I(327));Xr();var t=Oo(e,0);if(!(t&1))return tt(e,ve()),null;var n=ta(e,t);if(e.tag!==0&&n===2){var r=mc(e);r!==0&&(t=r,n=$c(e,r))}if(n===1)throw n=xi,ar(e,0),bn(e,t),tt(e,ve()),n;if(n===6)throw Error(I(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Zn(e,Je,Yt),tt(e,ve()),null}function ad(e,t){var n=J;J|=1;try{return e(t)}finally{J=n,J===0&&(ss=ve()+500,ka&&Un())}}function fr(e){Nn!==null&&Nn.tag===0&&!(J&6)&&Xr();var t=J;J|=1;var n=St.transition,r=re;try{if(St.transition=null,re=1,e)return e()}finally{re=r,St.transition=n,J=t,!(J&6)&&Un()}}function ld(){rt=Fr.current,le(Fr)}function ar(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,zw(n)),je!==null)for(n=je.return;n!==null;){var r=n;switch(Uu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Uo();break;case 3:ns(),le(Ze),le(ze),Ju();break;case 5:Xu(r);break;case 4:ns();break;case 13:le(ue);break;case 19:le(ue);break;case 10:Ku(r.type._context);break;case 22:case 23:ld()}n=n.return}if(Te=e,je=e=Dn(e.current,null),Re=rt=t,Ce=0,xi=null,id=Aa=pr=0,Je=Qs=null,sr!==null){for(t=0;t<sr.length;t++)if(n=sr[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}sr=null}return e}function Dg(e,t){do{var n=je;try{if(Hu(),bo.current=Jo,Xo){for(var r=he.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Xo=!1}if(hr=0,Ae=be=he=null,Gs=!1,yi=0,sd.current=null,n===null||n.return===null){Ce=1,xi=t,je=null;break}e:{var i=e,a=n.return,l=n,c=t;if(t=Re,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var S=ip(a);if(S!==null){S.flags&=-257,op(S,a,l,i,t),S.mode&1&&sp(i,u,t),t=S,c=u;var b=t.updateQueue;if(b===null){var w=new Set;w.add(c),t.updateQueue=w}else b.add(c);break e}else{if(!(t&1)){sp(i,u,t),cd();break e}c=Error(I(426))}}else if(ce&&l.mode&1){var k=ip(a);if(k!==null){!(k.flags&65536)&&(k.flags|=256),op(k,a,l,i,t),$u(rs(c,l));break e}}i=c=rs(c,l),Ce!==4&&(Ce=2),Qs===null?Qs=[i]:Qs.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var h=vg(i,c,t);qh(i,h);break e;case 1:l=c;var p=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Mn===null||!Mn.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t;var j=xg(i,l,t);qh(i,j);break e}}i=i.return}while(i!==null)}Vg(n)}catch(x){t=x,je===n&&n!==null&&(je=n=n.return);continue}break}while(!0)}function Ig(){var e=qo.current;return qo.current=Jo,e===null?Jo:e}function cd(){(Ce===0||Ce===3||Ce===2)&&(Ce=4),Te===null||!(pr&268435455)&&!(Aa&268435455)||bn(Te,Re)}function ta(e,t){var n=J;J|=2;var r=Ig();(Te!==e||Re!==t)&&(Yt=null,ar(e,t));do try{hj();break}catch(s){Dg(e,s)}while(!0);if(Hu(),J=n,qo.current=r,je!==null)throw Error(I(261));return Te=null,Re=0,Ce}function hj(){for(;je!==null;)Og(je)}function pj(){for(;je!==null&&!V1();)Og(je)}function Og(e){var t=Bg(e.alternate,e,rt);e.memoizedProps=e.pendingProps,t===null?Vg(e):je=t,sd.current=null}function Vg(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=oj(n,t),n!==null){n.flags&=32767,je=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ce=6,je=null;return}}else if(n=ij(n,t,rt),n!==null){je=n;return}if(t=t.sibling,t!==null){je=t;return}je=t=e}while(t!==null);Ce===0&&(Ce=5)}function Zn(e,t,n){var r=re,s=St.transition;try{St.transition=null,re=1,fj(e,t,n,r)}finally{St.transition=s,re=r}return null}function fj(e,t,n,r){do Xr();while(Nn!==null);if(J&6)throw Error(I(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(I(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(Y1(e,i),e===Te&&(je=Te=null,Re=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||oo||(oo=!0,zg(Io,function(){return Xr(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=St.transition,St.transition=null;var a=re;re=1;var l=J;J|=4,sd.current=null,lj(e,n),Rg(n,e),Lw(jc),Vo=!!wc,jc=wc=null,e.current=n,cj(n),F1(),J=l,re=a,St.transition=i}else e.current=n;if(oo&&(oo=!1,Nn=e,ea=s),i=e.pendingLanes,i===0&&(Mn=null),U1(n.stateNode),tt(e,ve()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Zo)throw Zo=!1,e=zc,zc=null,e;return ea&1&&e.tag!==0&&Xr(),i=e.pendingLanes,i&1?e===Uc?Xs++:(Xs=0,Uc=e):Xs=0,Un(),null}function Xr(){if(Nn!==null){var e=vy(ea),t=St.transition,n=re;try{if(St.transition=null,re=16>e?16:e,Nn===null)var r=!1;else{if(e=Nn,Nn=null,ea=0,J&6)throw Error(I(331));var s=J;for(J|=4,F=e.current;F!==null;){var i=F,a=i.child;if(F.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(F=u;F!==null;){var d=F;switch(d.tag){case 0:case 11:case 15:Ys(8,d,i)}var f=d.child;if(f!==null)f.return=d,F=f;else for(;F!==null;){d=F;var m=d.sibling,S=d.return;if(Tg(d),d===u){F=null;break}if(m!==null){m.return=S,F=m;break}F=S}}}var b=i.alternate;if(b!==null){var w=b.child;if(w!==null){b.child=null;do{var k=w.sibling;w.sibling=null,w=k}while(w!==null)}}F=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,F=a;else e:for(;F!==null;){if(i=F,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ys(9,i,i.return)}var h=i.sibling;if(h!==null){h.return=i.return,F=h;break e}F=i.return}}var p=e.current;for(F=p;F!==null;){a=F;var y=a.child;if(a.subtreeFlags&2064&&y!==null)y.return=a,F=y;else e:for(a=p;F!==null;){if(l=F,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Na(9,l)}}catch(x){ye(l,l.return,x)}if(l===a){F=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,F=j;break e}F=l.return}}if(J=s,Un(),Ut&&typeof Ut.onPostCommitFiberRoot=="function")try{Ut.onPostCommitFiberRoot(va,e)}catch{}r=!0}return r}finally{re=n,St.transition=t}}return!1}function xp(e,t,n){t=rs(n,t),t=vg(e,t,1),e=Rn(e,t,1),t=We(),e!==null&&(Ai(e,1,t),tt(e,t))}function ye(e,t,n){if(e.tag===3)xp(e,e,n);else for(;t!==null;){if(t.tag===3){xp(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Mn===null||!Mn.has(r))){e=rs(n,e),e=xg(t,e,1),t=Rn(t,e,1),e=We(),t!==null&&(Ai(t,1,e),tt(t,e));break}}t=t.return}}function mj(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=We(),e.pingedLanes|=e.suspendedLanes&n,Te===e&&(Re&n)===n&&(Ce===4||Ce===3&&(Re&130023424)===Re&&500>ve()-od?ar(e,0):id|=n),tt(e,t)}function Fg(e,t){t===0&&(e.mode&1?(t=Xi,Xi<<=1,!(Xi&130023424)&&(Xi=4194304)):t=1);var n=We();e=rn(e,t),e!==null&&(Ai(e,t,n),tt(e,n))}function yj(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Fg(e,n)}function gj(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(I(314))}r!==null&&r.delete(t),Fg(e,n)}var Bg;Bg=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ze.current)qe=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return qe=!1,sj(e,t,n);qe=!!(e.flags&131072)}else qe=!1,ce&&t.flags&1048576&&Wy(t,Ho,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;No(e,t),e=t.pendingProps;var s=Zr(t,ze.current);Qr(t,n),s=Zu(null,t,r,e,s,n);var i=ed();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,et(r)?(i=!0,$o(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Yu(t),s.updater=Ca,t.stateNode=s,s._reactInternals=t,Ec(t,r,e,n),t=Mc(null,t,r,!0,i,n)):(t.tag=0,ce&&i&&zu(t),$e(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(No(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=xj(r),e=Pt(r,e),s){case 0:t=Rc(null,t,r,e,n);break e;case 1:t=cp(null,t,r,e,n);break e;case 11:t=ap(null,t,r,e,n);break e;case 14:t=lp(null,t,r,Pt(r.type,e),n);break e}throw Error(I(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Pt(r,s),Rc(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Pt(r,s),cp(e,t,r,s,n);case 3:e:{if(kg(t),e===null)throw Error(I(387));r=t.pendingProps,i=t.memoizedState,s=i.element,Xy(e,t),Yo(t,r,null,n);var a=t.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=rs(Error(I(423)),t),t=up(e,t,r,n,s);break e}else if(r!==s){s=rs(Error(I(424)),t),t=up(e,t,r,n,s);break e}else for(st=_n(t.stateNode.containerInfo.firstChild),it=t,ce=!0,Et=null,n=Yy(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(es(),r===s){t=sn(e,t,n);break e}$e(e,t,r,n)}t=t.child}return t;case 5:return Jy(t),e===null&&Ac(t),r=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,a=s.children,Sc(r,s)?a=null:i!==null&&Sc(r,i)&&(t.flags|=32),Sg(e,t),$e(e,t,a,n),t.child;case 6:return e===null&&Ac(t),null;case 13:return bg(e,t,n);case 4:return Qu(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ts(t,null,r,n):$e(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Pt(r,s),ap(e,t,r,s,n);case 7:return $e(e,t,t.pendingProps,n),t.child;case 8:return $e(e,t,t.pendingProps.children,n),t.child;case 12:return $e(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,oe(Ko,r._currentValue),r._currentValue=a,i!==null)if(Mt(i.value,a)){if(i.children===s.children&&!Ze.current){t=sn(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=qt(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Pc(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(I(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Pc(a,n,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}$e(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Qr(t,n),s=kt(s),r=r(s),t.flags|=1,$e(e,t,r,n),t.child;case 14:return r=t.type,s=Pt(r,t.pendingProps),s=Pt(r.type,s),lp(e,t,r,s,n);case 15:return wg(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:Pt(r,s),No(e,t),t.tag=1,et(r)?(e=!0,$o(t)):e=!1,Qr(t,n),gg(t,r,s),Ec(t,r,s,n),Mc(null,t,r,!0,e,n);case 19:return Cg(e,t,n);case 22:return jg(e,t,n)}throw Error(I(156,t.tag))};function zg(e,t){return fy(e,t)}function vj(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function jt(e,t,n,r){return new vj(e,t,n,r)}function ud(e){return e=e.prototype,!(!e||!e.isReactComponent)}function xj(e){if(typeof e=="function")return ud(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Tu)return 11;if(e===Eu)return 14}return 2}function Dn(e,t){var n=e.alternate;return n===null?(n=jt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function To(e,t,n,r,s,i){var a=2;if(r=e,typeof e=="function")ud(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Tr:return lr(n.children,s,i,t);case Pu:a=8,s|=8;break;case ec:return e=jt(12,n,t,s|2),e.elementType=ec,e.lanes=i,e;case tc:return e=jt(13,n,t,s),e.elementType=tc,e.lanes=i,e;case nc:return e=jt(19,n,t,s),e.elementType=nc,e.lanes=i,e;case Jm:return Pa(n,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Qm:a=10;break e;case Xm:a=9;break e;case Tu:a=11;break e;case Eu:a=14;break e;case jn:a=16,r=null;break e}throw Error(I(130,e==null?e:typeof e,""))}return t=jt(a,n,t,s),t.elementType=e,t.type=r,t.lanes=i,t}function lr(e,t,n,r){return e=jt(7,e,r,t),e.lanes=n,e}function Pa(e,t,n,r){return e=jt(22,e,r,t),e.elementType=Jm,e.lanes=n,e.stateNode={isHidden:!1},e}function Nl(e,t,n){return e=jt(6,e,null,t),e.lanes=n,e}function Al(e,t,n){return t=jt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function wj(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=al(0),this.expirationTimes=al(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=al(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function dd(e,t,n,r,s,i,a,l,c){return e=new wj(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=jt(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yu(i),e}function jj(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Ug(e){if(!e)return Vn;e=e._reactInternals;e:{if(yr(e)!==e||e.tag!==1)throw Error(I(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(et(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(I(171))}if(e.tag===1){var n=e.type;if(et(n))return Uy(e,n,t)}return t}function $g(e,t,n,r,s,i,a,l,c){return e=dd(n,r,!0,e,s,i,a,l,c),e.context=Ug(null),n=e.current,r=We(),s=Ln(n),i=qt(r,s),i.callback=t??null,Rn(n,i,s),e.current.lanes=s,Ai(e,s,r),tt(e,r),e}function Ta(e,t,n,r){var s=t.current,i=We(),a=Ln(s);return n=Ug(n),t.context===null?t.context=n:t.pendingContext=n,t=qt(i,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Rn(s,t,a),e!==null&&(Rt(e,s,a,i),ko(e,s,a)),a}function na(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function wp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function hd(e,t){wp(e,t),(e=e.alternate)&&wp(e,t)}function Sj(){return null}var Wg=typeof reportError=="function"?reportError:function(e){console.error(e)};function pd(e){this._internalRoot=e}Ea.prototype.render=pd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(I(409));Ta(e,t,null,null)};Ea.prototype.unmount=pd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;fr(function(){Ta(null,e,null,null)}),t[nn]=null}};function Ea(e){this._internalRoot=e}Ea.prototype.unstable_scheduleHydration=function(e){if(e){var t=jy();e={blockedOn:null,target:e,priority:t};for(var n=0;n<kn.length&&t!==0&&t<kn[n].priority;n++);kn.splice(n,0,e),n===0&&ky(e)}};function fd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function _a(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function jp(){}function kj(e,t,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=na(a);i.call(u)}}var a=$g(t,r,e,0,null,!1,!1,"",jp);return e._reactRootContainer=a,e[nn]=a.current,di(e.nodeType===8?e.parentNode:e),fr(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=na(c);l.call(u)}}var c=dd(e,0,!1,null,null,!1,!1,"",jp);return e._reactRootContainer=c,e[nn]=c.current,di(e.nodeType===8?e.parentNode:e),fr(function(){Ta(t,c,n,r)}),c}function Ra(e,t,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=na(a);l.call(c)}}Ta(t,a,e,s)}else a=kj(n,t,e,s,r);return na(a)}xy=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Is(t.pendingLanes);n!==0&&(Mu(t,n|1),tt(t,ve()),!(J&6)&&(ss=ve()+500,Un()))}break;case 13:fr(function(){var r=rn(e,1);if(r!==null){var s=We();Rt(r,e,1,s)}}),hd(e,1)}};Lu=function(e){if(e.tag===13){var t=rn(e,134217728);if(t!==null){var n=We();Rt(t,e,134217728,n)}hd(e,134217728)}};wy=function(e){if(e.tag===13){var t=Ln(e),n=rn(e,t);if(n!==null){var r=We();Rt(n,e,t,r)}hd(e,t)}};jy=function(){return re};Sy=function(e,t){var n=re;try{return re=e,t()}finally{re=n}};hc=function(e,t,n){switch(t){case"input":if(ic(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=Sa(r);if(!s)throw Error(I(90));Zm(r),ic(r,s)}}}break;case"textarea":ty(e,n);break;case"select":t=n.value,t!=null&&Hr(e,!!n.multiple,t,!1)}};ly=ad;cy=fr;var bj={usingClientEntryPoint:!1,Events:[Ti,Mr,Sa,oy,ay,ad]},Ps={findFiberByHostInstance:rr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Cj={bundleType:Ps.bundleType,version:Ps.version,rendererPackageName:Ps.rendererPackageName,rendererConfig:Ps.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ln.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=hy(e),e===null?null:e.stateNode},findFiberByHostInstance:Ps.findFiberByHostInstance||Sj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ao=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ao.isDisabled&&ao.supportsFiber)try{va=ao.inject(Cj),Ut=ao}catch{}}ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bj;ct.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fd(t))throw Error(I(200));return jj(e,t,null,n)};ct.createRoot=function(e,t){if(!fd(e))throw Error(I(299));var n=!1,r="",s=Wg;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=dd(e,1,!1,null,null,n,!1,r,s),e[nn]=t.current,di(e.nodeType===8?e.parentNode:e),new pd(t)};ct.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(I(188)):(e=Object.keys(e).join(","),Error(I(268,e)));return e=hy(t),e=e===null?null:e.stateNode,e};ct.flushSync=function(e){return fr(e)};ct.hydrate=function(e,t,n){if(!_a(t))throw Error(I(200));return Ra(null,e,t,!0,n)};ct.hydrateRoot=function(e,t,n){if(!fd(e))throw Error(I(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=Wg;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=$g(t,null,e,1,n??null,s,!1,i,a),e[nn]=t.current,di(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Ea(t)};ct.render=function(e,t,n){if(!_a(t))throw Error(I(200));return Ra(null,e,t,!1,n)};ct.unmountComponentAtNode=function(e){if(!_a(e))throw Error(I(40));return e._reactRootContainer?(fr(function(){Ra(null,null,e,!1,function(){e._reactRootContainer=null,e[nn]=null})}),!0):!1};ct.unstable_batchedUpdates=ad;ct.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!_a(n))throw Error(I(200));if(e==null||e._reactInternals===void 0)throw Error(I(38));return Ra(e,t,n,!1,r)};ct.version="18.3.1-next-f1338f8080-20240426";function Hg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Hg)}catch(e){console.error(e)}}Hg(),Hm.exports=ct;var Nj=Hm.exports,Sp=Nj;ql.createRoot=Sp.createRoot,ql.hydrateRoot=Sp.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wi(){return wi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wi.apply(this,arguments)}var An;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(An||(An={}));const kp="popstate";function Aj(e){e===void 0&&(e={});function t(r,s){let{pathname:i,search:a,hash:l}=r.location;return Hc("",{pathname:i,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:ra(s)}return Tj(t,n,null,e)}function pe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Kg(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Pj(){return Math.random().toString(36).substr(2,8)}function bp(e,t){return{usr:e.state,key:e.key,idx:t}}function Hc(e,t,n,r){return n===void 0&&(n=null),wi({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ps(t):t,{state:n,key:t&&t.key||r||Pj()})}function ra(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ps(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Tj(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,a=s.history,l=An.Pop,c=null,u=d();u==null&&(u=0,a.replaceState(wi({},a.state,{idx:u}),""));function d(){return(a.state||{idx:null}).idx}function f(){l=An.Pop;let k=d(),h=k==null?null:k-u;u=k,c&&c({action:l,location:w.location,delta:h})}function m(k,h){l=An.Push;let p=Hc(w.location,k,h);u=d()+1;let y=bp(p,u),j=w.createHref(p);try{a.pushState(y,"",j)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;s.location.assign(j)}i&&c&&c({action:l,location:w.location,delta:1})}function S(k,h){l=An.Replace;let p=Hc(w.location,k,h);u=d();let y=bp(p,u),j=w.createHref(p);a.replaceState(y,"",j),i&&c&&c({action:l,location:w.location,delta:0})}function b(k){let h=s.location.origin!=="null"?s.location.origin:s.location.href,p=typeof k=="string"?k:ra(k);return p=p.replace(/ $/,"%20"),pe(h,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,h)}let w={get action(){return l},get location(){return e(s,a)},listen(k){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(kp,f),c=k,()=>{s.removeEventListener(kp,f),c=null}},createHref(k){return t(s,k)},createURL:b,encodeLocation(k){let h=b(k);return{pathname:h.pathname,search:h.search,hash:h.hash}},push:m,replace:S,go(k){return a.go(k)}};return w}var Cp;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Cp||(Cp={}));function Ej(e,t,n){return n===void 0&&(n="/"),_j(e,t,n)}function _j(e,t,n,r){let s=typeof t=="string"?ps(t):t,i=is(s.pathname||"/",n);if(i==null)return null;let a=Gg(e);Rj(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=$j(i);l=zj(a[c],u)}return l}function Gg(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,a,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};c.relativePath.startsWith("/")&&(pe(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=In([r,c.relativePath]),d=n.concat(c);i.children&&i.children.length>0&&(pe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Gg(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:Fj(u,i.index),routesMeta:d})};return e.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let c of Yg(i.path))s(i,a,c)}),t}function Yg(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let a=Yg(r.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function Rj(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Bj(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Mj=/^:[\w-]+$/,Lj=3,Dj=2,Ij=1,Oj=10,Vj=-2,Np=e=>e==="*";function Fj(e,t){let n=e.split("/"),r=n.length;return n.some(Np)&&(r+=Vj),t&&(r+=Dj),n.filter(s=>!Np(s)).reduce((s,i)=>s+(Mj.test(i)?Lj:i===""?Ij:Oj),r)}function Bj(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function zj(e,t,n){let{routesMeta:r}=e,s={},i="/",a=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=Kc({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),m=c.route;if(!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:In([i,f.pathname]),pathnameBase:Gj(In([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=In([i,f.pathnameBase]))}return a}function Kc(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Uj(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,d,f)=>{let{paramName:m,isOptional:S}=d;if(m==="*"){let w=l[f]||"";a=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const b=l[f];return S&&!b?u[m]=void 0:u[m]=(b||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:e}}function Uj(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Kg(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function $j(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Kg(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function is(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Wj(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?ps(e):e;return{pathname:n?n.startsWith("/")?n:Hj(n,t):t,search:Yj(r),hash:Qj(s)}}function Hj(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Pl(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Kj(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function md(e,t){let n=Kj(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function yd(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=ps(e):(s=wi({},e),pe(!s.pathname||!s.pathname.includes("?"),Pl("?","pathname","search",s)),pe(!s.pathname||!s.pathname.includes("#"),Pl("#","pathname","hash",s)),pe(!s.search||!s.search.includes("#"),Pl("#","search","hash",s)));let i=e===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=n;else{let f=t.length-1;if(!r&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}l=f>=0?t[f]:"/"}let c=Wj(s,l),u=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const In=e=>e.join("/").replace(/\/\/+/g,"/"),Gj=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Yj=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Qj=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Xj(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Qg=["post","put","patch","delete"];new Set(Qg);const Jj=["get",...Qg];new Set(Jj);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ji(){return ji=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ji.apply(this,arguments)}const Ma=g.createContext(null),Xg=g.createContext(null),cn=g.createContext(null),La=g.createContext(null),un=g.createContext({outlet:null,matches:[],isDataRoute:!1}),Jg=g.createContext(null);function qj(e,t){let{relative:n}=t===void 0?{}:t;fs()||pe(!1);let{basename:r,navigator:s}=g.useContext(cn),{hash:i,pathname:a,search:l}=Da(e,{relative:n}),c=a;return r!=="/"&&(c=a==="/"?r:In([r,a])),s.createHref({pathname:c,search:l,hash:i})}function fs(){return g.useContext(La)!=null}function Lt(){return fs()||pe(!1),g.useContext(La).location}function qg(e){g.useContext(cn).static||g.useLayoutEffect(e)}function $n(){let{isDataRoute:e}=g.useContext(un);return e?hS():Zj()}function Zj(){fs()||pe(!1);let e=g.useContext(Ma),{basename:t,future:n,navigator:r}=g.useContext(cn),{matches:s}=g.useContext(un),{pathname:i}=Lt(),a=JSON.stringify(md(s,n.v7_relativeSplatPath)),l=g.useRef(!1);return qg(()=>{l.current=!0}),g.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let f=yd(u,JSON.parse(a),i,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:In([t,f.pathname])),(d.replace?r.replace:r.push)(f,d.state,d)},[t,r,a,i,e])}function eS(){let{matches:e}=g.useContext(un),t=e[e.length-1];return t?t.params:{}}function Da(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=g.useContext(cn),{matches:s}=g.useContext(un),{pathname:i}=Lt(),a=JSON.stringify(md(s,r.v7_relativeSplatPath));return g.useMemo(()=>yd(e,JSON.parse(a),i,n==="path"),[e,a,i,n])}function tS(e,t){return nS(e,t)}function nS(e,t,n,r){fs()||pe(!1);let{navigator:s}=g.useContext(cn),{matches:i}=g.useContext(un),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=Lt(),d;if(t){var f;let k=typeof t=="string"?ps(t):t;c==="/"||(f=k.pathname)!=null&&f.startsWith(c)||pe(!1),d=k}else d=u;let m=d.pathname||"/",S=m;if(c!=="/"){let k=c.replace(/^\//,"").split("/");S="/"+m.replace(/^\//,"").split("/").slice(k.length).join("/")}let b=Ej(e,{pathname:S}),w=aS(b&&b.map(k=>Object.assign({},k,{params:Object.assign({},l,k.params),pathname:In([c,s.encodeLocation?s.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?c:In([c,s.encodeLocation?s.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),i,n,r);return t&&w?g.createElement(La.Provider,{value:{location:ji({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:An.Pop}},w):w}function rS(){let e=dS(),t=Xj(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),n?g.createElement("pre",{style:s},n):null,null)}const sS=g.createElement(rS,null);class iS extends g.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?g.createElement(un.Provider,{value:this.props.routeContext},g.createElement(Jg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function oS(e){let{routeContext:t,match:n,children:r}=e,s=g.useContext(Ma);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),g.createElement(un.Provider,{value:t},r)}function aS(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,l=(s=n)==null?void 0:s.errors;if(l!=null){let d=a.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||pe(!1),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<a.length;d++){let f=a[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:m,errors:S}=n,b=f.route.loader&&m[f.route.id]===void 0&&(!S||S[f.route.id]===void 0);if(f.route.lazy||b){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((d,f,m)=>{let S,b=!1,w=null,k=null;n&&(S=l&&f.route.id?l[f.route.id]:void 0,w=f.route.errorElement||sS,c&&(u<0&&m===0?(pS("route-fallback"),b=!0,k=null):u===m&&(b=!0,k=f.route.hydrateFallbackElement||null)));let h=t.concat(a.slice(0,m+1)),p=()=>{let y;return S?y=w:b?y=k:f.route.Component?y=g.createElement(f.route.Component,null):f.route.element?y=f.route.element:y=d,g.createElement(oS,{match:f,routeContext:{outlet:d,matches:h,isDataRoute:n!=null},children:y})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?g.createElement(iS,{location:n.location,revalidation:n.revalidation,component:w,error:S,children:p(),routeContext:{outlet:null,matches:h,isDataRoute:!0}}):p()},null)}var Zg=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Zg||{}),ev=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ev||{});function lS(e){let t=g.useContext(Ma);return t||pe(!1),t}function cS(e){let t=g.useContext(Xg);return t||pe(!1),t}function uS(e){let t=g.useContext(un);return t||pe(!1),t}function tv(e){let t=uS(),n=t.matches[t.matches.length-1];return n.route.id||pe(!1),n.route.id}function dS(){var e;let t=g.useContext(Jg),n=cS(),r=tv();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function hS(){let{router:e}=lS(Zg.UseNavigateStable),t=tv(ev.UseNavigateStable),n=g.useRef(!1);return qg(()=>{n.current=!0}),g.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,ji({fromRouteId:t},i)))},[e,t])}const Ap={};function pS(e,t,n){Ap[e]||(Ap[e]=!0)}function fS(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function sa(e){let{to:t,replace:n,state:r,relative:s}=e;fs()||pe(!1);let{future:i,static:a}=g.useContext(cn),{matches:l}=g.useContext(un),{pathname:c}=Lt(),u=$n(),d=yd(t,md(l,i.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(d);return g.useEffect(()=>u(JSON.parse(f),{replace:n,state:r,relative:s}),[u,f,s,n,r]),null}function Ft(e){pe(!1)}function mS(e){let{basename:t="/",children:n=null,location:r,navigationType:s=An.Pop,navigator:i,static:a=!1,future:l}=e;fs()&&pe(!1);let c=t.replace(/^\/*/,"/"),u=g.useMemo(()=>({basename:c,navigator:i,static:a,future:ji({v7_relativeSplatPath:!1},l)}),[c,l,i,a]);typeof r=="string"&&(r=ps(r));let{pathname:d="/",search:f="",hash:m="",state:S=null,key:b="default"}=r,w=g.useMemo(()=>{let k=is(d,c);return k==null?null:{location:{pathname:k,search:f,hash:m,state:S,key:b},navigationType:s}},[c,d,f,m,S,b,s]);return w==null?null:g.createElement(cn.Provider,{value:u},g.createElement(La.Provider,{children:n,value:w}))}function yS(e){let{children:t,location:n}=e;return tS(Gc(t),n)}new Promise(()=>{});function Gc(e,t){t===void 0&&(t=[]);let n=[];return g.Children.forEach(e,(r,s)=>{if(!g.isValidElement(r))return;let i=[...t,s];if(r.type===g.Fragment){n.push.apply(n,Gc(r.props.children,i));return}r.type!==Ft&&pe(!1),!r.props.index||!r.props.children||pe(!1);let a={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=Gc(r.props.children,i)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ia(){return ia=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ia.apply(this,arguments)}function nv(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,i;for(i=0;i<r.length;i++)s=r[i],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function gS(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function vS(e,t){return e.button===0&&(!t||t==="_self")&&!gS(e)}const xS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],wS=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],jS="6";try{window.__reactRouterVersion=jS}catch{}const SS=g.createContext({isTransitioning:!1}),kS="startTransition",Pp=m1[kS];function bS(e){let{basename:t,children:n,future:r,window:s}=e,i=g.useRef();i.current==null&&(i.current=Aj({window:s,v5Compat:!0}));let a=i.current,[l,c]=g.useState({action:a.action,location:a.location}),{v7_startTransition:u}=r||{},d=g.useCallback(f=>{u&&Pp?Pp(()=>c(f)):c(f)},[c,u]);return g.useLayoutEffect(()=>a.listen(d),[a,d]),g.useEffect(()=>fS(r),[r]),g.createElement(mS,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:a,future:r})}const CS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",NS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Be=g.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:i,replace:a,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,m=nv(t,xS),{basename:S}=g.useContext(cn),b,w=!1;if(typeof u=="string"&&NS.test(u)&&(b=u,CS))try{let y=new URL(window.location.href),j=u.startsWith("//")?new URL(y.protocol+u):new URL(u),x=is(j.pathname,S);j.origin===y.origin&&x!=null?u=x+j.search+j.hash:w=!0}catch{}let k=qj(u,{relative:s}),h=TS(u,{replace:a,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:f});function p(y){r&&r(y),y.defaultPrevented||h(y)}return g.createElement("a",ia({},m,{href:b||k,onClick:w||i?r:p,ref:n,target:c}))}),AS=g.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:u,children:d}=t,f=nv(t,wS),m=Da(c,{relative:f.relative}),S=Lt(),b=g.useContext(Xg),{navigator:w,basename:k}=g.useContext(cn),h=b!=null&&ES(m)&&u===!0,p=w.encodeLocation?w.encodeLocation(m).pathname:m.pathname,y=S.pathname,j=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;s||(y=y.toLowerCase(),j=j?j.toLowerCase():null,p=p.toLowerCase()),j&&k&&(j=is(j,k)||j);const x=p!=="/"&&p.endsWith("/")?p.length-1:p.length;let N=y===p||!a&&y.startsWith(p)&&y.charAt(x)==="/",A=j!=null&&(j===p||!a&&j.startsWith(p)&&j.charAt(p.length)==="/"),P={isActive:N,isPending:A,isTransitioning:h},C=N?r:void 0,E;typeof i=="function"?E=i(P):E=[i,N?"active":null,A?"pending":null,h?"transitioning":null].filter(Boolean).join(" ");let T=typeof l=="function"?l(P):l;return g.createElement(Be,ia({},f,{"aria-current":C,className:E,ref:n,style:T,to:c,viewTransition:u}),typeof d=="function"?d(P):d)});var Yc;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Yc||(Yc={}));var Tp;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Tp||(Tp={}));function PS(e){let t=g.useContext(Ma);return t||pe(!1),t}function TS(e,t){let{target:n,replace:r,state:s,preventScrollReset:i,relative:a,viewTransition:l}=t===void 0?{}:t,c=$n(),u=Lt(),d=Da(e,{relative:a});return g.useCallback(f=>{if(vS(f,n)){f.preventDefault();let m=r!==void 0?r:ra(u)===ra(d);c(e,{replace:m,state:s,preventScrollReset:i,relative:a,viewTransition:l})}},[u,c,d,r,s,n,e,i,a,l])}function ES(e,t){t===void 0&&(t={});let n=g.useContext(SS);n==null&&pe(!1);let{basename:r}=PS(Yc.useViewTransitionState),s=Da(e,{relative:t.relative});if(!n.isTransitioning)return!1;let i=is(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=is(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Kc(s.pathname,a)!=null||Kc(s.pathname,i)!=null}const gd=g.createContext({});function _i(e){const t=g.useRef(null);return t.current===null&&(t.current=e()),t.current}const Ia=g.createContext(null),Ri=g.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class _S extends g.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function RS({children:e,isPresent:t}){const n=g.useId(),r=g.useRef(null),s=g.useRef({width:0,height:0,top:0,left:0}),{nonce:i}=g.useContext(Ri);return g.useInsertionEffect(()=>{const{width:a,height:l,top:c,left:u}=s.current;if(t||!r.current||!a||!l)return;r.current.dataset.motionPopId=n;const d=document.createElement("style");return i&&(d.nonce=i),document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${l}px !important;
            top: ${c}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[t]),o.jsx(_S,{isPresent:t,childRef:r,sizeRef:s,children:g.cloneElement(e,{ref:r})})}const MS=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:a})=>{const l=_i(LS),c=g.useId(),u=g.useCallback(f=>{l.set(f,!0);for(const m of l.values())if(!m)return;r&&r()},[l,r]),d=g.useMemo(()=>({id:c,initial:t,isPresent:n,custom:s,onExitComplete:u,register:f=>(l.set(f,!1),()=>l.delete(f))}),i?[Math.random(),u]:[n,u]);return g.useMemo(()=>{l.forEach((f,m)=>l.set(m,!1))},[n]),g.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),a==="popLayout"&&(e=o.jsx(RS,{isPresent:n,children:e})),o.jsx(Ia.Provider,{value:d,children:e})};function LS(){return new Map}function rv(e=!0){const t=g.useContext(Ia);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,i=g.useId();g.useEffect(()=>{e&&s(i)},[e]);const a=g.useCallback(()=>e&&r&&r(i),[i,r,e]);return!n&&r?[!1,a]:[!0]}const lo=e=>e.key||"";function Ep(e){const t=[];return g.Children.forEach(e,n=>{g.isValidElement(n)&&t.push(n)}),t}const vd=typeof window<"u",Oa=vd?g.useLayoutEffect:g.useEffect,sv=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:i="sync",propagate:a=!1})=>{const[l,c]=rv(a),u=g.useMemo(()=>Ep(e),[e]),d=a&&!l?[]:u.map(lo),f=g.useRef(!0),m=g.useRef(u),S=_i(()=>new Map),[b,w]=g.useState(u),[k,h]=g.useState(u);Oa(()=>{f.current=!1,m.current=u;for(let j=0;j<k.length;j++){const x=lo(k[j]);d.includes(x)?S.delete(x):S.get(x)!==!0&&S.set(x,!1)}},[k,d.length,d.join("-")]);const p=[];if(u!==b){let j=[...u];for(let x=0;x<k.length;x++){const N=k[x],A=lo(N);d.includes(A)||(j.splice(x,0,N),p.push(N))}i==="wait"&&p.length&&(j=p),h(Ep(j)),w(u);return}const{forceRender:y}=g.useContext(gd);return o.jsx(o.Fragment,{children:k.map(j=>{const x=lo(j),N=a&&!l?!1:u===k||d.includes(x),A=()=>{if(S.has(x))S.set(x,!0);else return;let P=!0;S.forEach(C=>{C||(P=!1)}),P&&(y==null||y(),h(m.current),a&&(c==null||c()),r&&r())};return o.jsx(MS,{isPresent:N,initial:!f.current||n?void 0:!1,custom:N?void 0:t,presenceAffectsLayout:s,mode:i,onExitComplete:N?void 0:A,children:j},x)})})},ot=e=>e;let iv=ot;function xd(e){let t;return()=>(t===void 0&&(t=e()),t)}const os=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r},Zt=e=>e*1e3,en=e=>e/1e3,DS={useManualTiming:!1};function IS(e){let t=new Set,n=new Set,r=!1,s=!1;const i=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(u){i.has(u)&&(c.schedule(u),e()),u(a)}const c={schedule:(u,d=!1,f=!1)=>{const S=f&&r?t:n;return d&&i.add(u),S.has(u)||S.add(u),u},cancel:u=>{n.delete(u),i.delete(u)},process:u=>{if(a=u,r){s=!0;return}r=!0,[t,n]=[n,t],t.forEach(l),t.clear(),r=!1,s&&(s=!1,c.process(u))}};return c}const co=["read","resolveKeyframes","update","preRender","render","postRender"],OS=40;function ov(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>n=!0,a=co.reduce((h,p)=>(h[p]=IS(i),h),{}),{read:l,resolveKeyframes:c,update:u,preRender:d,render:f,postRender:m}=a,S=()=>{const h=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(h-s.timestamp,OS),1),s.timestamp=h,s.isProcessing=!0,l.process(s),c.process(s),u.process(s),d.process(s),f.process(s),m.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(S))},b=()=>{n=!0,r=!0,s.isProcessing||e(S)};return{schedule:co.reduce((h,p)=>{const y=a[p];return h[p]=(j,x=!1,N=!1)=>(n||b(),y.schedule(j,x,N)),h},{}),cancel:h=>{for(let p=0;p<co.length;p++)a[co[p]].cancel(h)},state:s,steps:a}}const{schedule:ie,cancel:on,state:Ne,steps:Tl}=ov(typeof requestAnimationFrame<"u"?requestAnimationFrame:ot,!0),av=g.createContext({strict:!1}),_p={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},as={};for(const e in _p)as[e]={isEnabled:t=>_p[e].some(n=>!!t[n])};function VS(e){for(const t in e)as[t]={...as[t],...e[t]}}const FS=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function oa(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||FS.has(e)}let lv=e=>!oa(e);function BS(e){e&&(lv=t=>t.startsWith("on")?!oa(t):e(t))}try{BS(require("@emotion/is-prop-valid").default)}catch{}function zS(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(lv(s)||n===!0&&oa(s)||!t&&!oa(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}function US(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...r)=>e(...r);return new Proxy(n,{get:(r,s)=>s==="create"?e:(t.has(s)||t.set(s,e(s)),t.get(s))})}const Va=g.createContext({});function Si(e){return typeof e=="string"||Array.isArray(e)}function Fa(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const wd=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],jd=["initial",...wd];function Ba(e){return Fa(e.animate)||jd.some(t=>Si(e[t]))}function cv(e){return!!(Ba(e)||e.variants)}function $S(e,t){if(Ba(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Si(n)?n:void 0,animate:Si(r)?r:void 0}}return e.inherit!==!1?t:{}}function WS(e){const{initial:t,animate:n}=$S(e,g.useContext(Va));return g.useMemo(()=>({initial:t,animate:n}),[Rp(t),Rp(n)])}function Rp(e){return Array.isArray(e)?e.join(" "):e}const HS=Symbol.for("motionComponentSymbol");function Br(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function KS(e,t,n){return g.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Br(n)&&(n.current=r))},[t])}const Sd=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),GS="framerAppearId",uv="data-"+Sd(GS),{schedule:kd}=ov(queueMicrotask,!1),dv=g.createContext({});function YS(e,t,n,r,s){var i,a;const{visualElement:l}=g.useContext(Va),c=g.useContext(av),u=g.useContext(Ia),d=g.useContext(Ri).reducedMotion,f=g.useRef(null);r=r||c.renderer,!f.current&&r&&(f.current=r(e,{visualState:t,parent:l,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const m=f.current,S=g.useContext(dv);m&&!m.projection&&s&&(m.type==="html"||m.type==="svg")&&QS(f.current,n,s,S);const b=g.useRef(!1);g.useInsertionEffect(()=>{m&&b.current&&m.update(n,u)});const w=n[uv],k=g.useRef(!!w&&!(!((i=window.MotionHandoffIsComplete)===null||i===void 0)&&i.call(window,w))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,w)));return Oa(()=>{m&&(b.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),kd.render(m.render),k.current&&m.animationState&&m.animationState.animateChanges())}),g.useEffect(()=>{m&&(!k.current&&m.animationState&&m.animationState.animateChanges(),k.current&&(queueMicrotask(()=>{var h;(h=window.MotionHandoffMarkAsComplete)===null||h===void 0||h.call(window,w)}),k.current=!1))}),m}function QS(e,t,n,r){const{layoutId:s,layout:i,drag:a,dragConstraints:l,layoutScroll:c,layoutRoot:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:hv(e.parent)),e.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!a||l&&Br(l),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:r,layoutScroll:c,layoutRoot:u})}function hv(e){if(e)return e.options.allowProjection!==!1?e.projection:hv(e.parent)}function XS({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:s}){var i,a;e&&VS(e);function l(u,d){let f;const m={...g.useContext(Ri),...u,layoutId:JS(u)},{isStatic:S}=m,b=WS(u),w=r(u,S);if(!S&&vd){qS();const k=ZS(m);f=k.MeasureLayout,b.visualElement=YS(s,w,m,t,k.ProjectionNode)}return o.jsxs(Va.Provider,{value:b,children:[f&&b.visualElement?o.jsx(f,{visualElement:b.visualElement,...m}):null,n(s,u,KS(w,b.visualElement,d),w,S,b.visualElement)]})}l.displayName=`motion.${typeof s=="string"?s:`create(${(a=(i=s.displayName)!==null&&i!==void 0?i:s.name)!==null&&a!==void 0?a:""})`}`;const c=g.forwardRef(l);return c[HS]=s,c}function JS({layoutId:e}){const t=g.useContext(gd).id;return t&&e!==void 0?t+"-"+e:e}function qS(e,t){g.useContext(av).strict}function ZS(e){const{drag:t,layout:n}=as;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const ek=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function bd(e){return typeof e!="string"||e.includes("-")?!1:!!(ek.indexOf(e)>-1||/[A-Z]/u.test(e))}function Mp(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function Cd(e,t,n,r){if(typeof t=="function"){const[s,i]=Mp(r);t=t(n!==void 0?n:e.custom,s,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,i]=Mp(r);t=t(n!==void 0?n:e.custom,s,i)}return t}const Qc=e=>Array.isArray(e),tk=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),nk=e=>Qc(e)?e[e.length-1]||0:e,Pe=e=>!!(e&&e.getVelocity);function Eo(e){const t=Pe(e)?e.get():e;return tk(t)?t.toValue():t}function rk({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:n},r,s,i){const a={latestValues:sk(r,s,i,e),renderState:t()};return n&&(a.onMount=l=>n({props:r,current:l,...a}),a.onUpdate=l=>n(l)),a}const pv=e=>(t,n)=>{const r=g.useContext(Va),s=g.useContext(Ia),i=()=>rk(e,t,r,s);return n?i():_i(i)};function sk(e,t,n,r){const s={},i=r(e,{});for(const m in i)s[m]=Eo(i[m]);let{initial:a,animate:l}=e;const c=Ba(e),u=cv(e);t&&u&&!c&&e.inherit!==!1&&(a===void 0&&(a=t.initial),l===void 0&&(l=t.animate));let d=n?n.initial===!1:!1;d=d||a===!1;const f=d?l:a;if(f&&typeof f!="boolean"&&!Fa(f)){const m=Array.isArray(f)?f:[f];for(let S=0;S<m.length;S++){const b=Cd(e,m[S]);if(b){const{transitionEnd:w,transition:k,...h}=b;for(const p in h){let y=h[p];if(Array.isArray(y)){const j=d?y.length-1:0;y=y[j]}y!==null&&(s[p]=y)}for(const p in w)s[p]=w[p]}}}return s}const ms=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],gr=new Set(ms),fv=e=>t=>typeof t=="string"&&t.startsWith(e),mv=fv("--"),ik=fv("var(--"),Nd=e=>ik(e)?ok.test(e.split("/*")[0].trim()):!1,ok=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,yv=(e,t)=>t&&typeof e=="number"?t.transform(e):e,an=(e,t,n)=>n>t?t:n<e?e:n,ys={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},ki={...ys,transform:e=>an(0,1,e)},uo={...ys,default:1},Mi=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),wn=Mi("deg"),Wt=Mi("%"),G=Mi("px"),ak=Mi("vh"),lk=Mi("vw"),Lp={...Wt,parse:e=>Wt.parse(e)/100,transform:e=>Wt.transform(e*100)},ck={borderWidth:G,borderTopWidth:G,borderRightWidth:G,borderBottomWidth:G,borderLeftWidth:G,borderRadius:G,radius:G,borderTopLeftRadius:G,borderTopRightRadius:G,borderBottomRightRadius:G,borderBottomLeftRadius:G,width:G,maxWidth:G,height:G,maxHeight:G,top:G,right:G,bottom:G,left:G,padding:G,paddingTop:G,paddingRight:G,paddingBottom:G,paddingLeft:G,margin:G,marginTop:G,marginRight:G,marginBottom:G,marginLeft:G,backgroundPositionX:G,backgroundPositionY:G},uk={rotate:wn,rotateX:wn,rotateY:wn,rotateZ:wn,scale:uo,scaleX:uo,scaleY:uo,scaleZ:uo,skew:wn,skewX:wn,skewY:wn,distance:G,translateX:G,translateY:G,translateZ:G,x:G,y:G,z:G,perspective:G,transformPerspective:G,opacity:ki,originX:Lp,originY:Lp,originZ:G},Dp={...ys,transform:Math.round},Ad={...ck,...uk,zIndex:Dp,size:G,fillOpacity:ki,strokeOpacity:ki,numOctaves:Dp},dk={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},hk=ms.length;function pk(e,t,n){let r="",s=!0;for(let i=0;i<hk;i++){const a=ms[i],l=e[a];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(a.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const u=yv(l,Ad[a]);if(!c){s=!1;const d=dk[a]||a;r+=`${d}(${u}) `}n&&(t[a]=u)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}function Pd(e,t,n){const{style:r,vars:s,transformOrigin:i}=e;let a=!1,l=!1;for(const c in t){const u=t[c];if(gr.has(c)){a=!0;continue}else if(mv(c)){s[c]=u;continue}else{const d=yv(u,Ad[c]);c.startsWith("origin")?(l=!0,i[c]=d):r[c]=d}}if(t.transform||(a||n?r.transform=pk(t,e.transform,n):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=i;r.transformOrigin=`${c} ${u} ${d}`}}const fk={offset:"stroke-dashoffset",array:"stroke-dasharray"},mk={offset:"strokeDashoffset",array:"strokeDasharray"};function yk(e,t,n=1,r=0,s=!0){e.pathLength=1;const i=s?fk:mk;e[i.offset]=G.transform(-r);const a=G.transform(t),l=G.transform(n);e[i.array]=`${a} ${l}`}function Ip(e,t,n){return typeof e=="string"?e:G.transform(t+n*e)}function gk(e,t,n){const r=Ip(t,e.x,e.width),s=Ip(n,e.y,e.height);return`${r} ${s}`}function Td(e,{attrX:t,attrY:n,attrScale:r,originX:s,originY:i,pathLength:a,pathSpacing:l=1,pathOffset:c=0,...u},d,f){if(Pd(e,u,f),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:m,style:S,dimensions:b}=e;m.transform&&(b&&(S.transform=m.transform),delete m.transform),b&&(s!==void 0||i!==void 0||S.transform)&&(S.transformOrigin=gk(b,s!==void 0?s:.5,i!==void 0?i:.5)),t!==void 0&&(m.x=t),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),a!==void 0&&yk(m,a,l,c,!1)}const Ed=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),gv=()=>({...Ed(),attrs:{}}),_d=e=>typeof e=="string"&&e.toLowerCase()==="svg";function vv(e,{style:t,vars:n},r,s){Object.assign(e.style,t,s&&s.getProjectionStyles(r));for(const i in n)e.style.setProperty(i,n[i])}const xv=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function wv(e,t,n,r){vv(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(xv.has(s)?s:Sd(s),t.attrs[s])}const aa={};function vk(e){Object.assign(aa,e)}function jv(e,{layout:t,layoutId:n}){return gr.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!aa[e]||e==="opacity")}function Rd(e,t,n){var r;const{style:s}=e,i={};for(const a in s)(Pe(s[a])||t.style&&Pe(t.style[a])||jv(a,e)||((r=n==null?void 0:n.getValue(a))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(i[a]=s[a]);return i}function Sv(e,t,n){const r=Rd(e,t,n);for(const s in e)if(Pe(e[s])||Pe(t[s])){const i=ms.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[i]=e[s]}return r}function xk(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}const Op=["x","y","width","height","cx","cy","r"],wk={useVisualState:pv({scrapeMotionValuesFromProps:Sv,createRenderState:gv,onUpdate:({props:e,prevProps:t,current:n,renderState:r,latestValues:s})=>{if(!n)return;let i=!!e.drag;if(!i){for(const l in s)if(gr.has(l)){i=!0;break}}if(!i)return;let a=!t;if(t)for(let l=0;l<Op.length;l++){const c=Op[l];e[c]!==t[c]&&(a=!0)}a&&ie.read(()=>{xk(n,r),ie.render(()=>{Td(r,s,_d(n.tagName),e.transformTemplate),wv(n,r)})})}})},jk={useVisualState:pv({scrapeMotionValuesFromProps:Rd,createRenderState:Ed})};function kv(e,t,n){for(const r in t)!Pe(t[r])&&!jv(r,n)&&(e[r]=t[r])}function Sk({transformTemplate:e},t){return g.useMemo(()=>{const n=Ed();return Pd(n,t,e),Object.assign({},n.vars,n.style)},[t])}function kk(e,t){const n=e.style||{},r={};return kv(r,n,e),Object.assign(r,Sk(e,t)),r}function bk(e,t){const n={},r=kk(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}function Ck(e,t,n,r){const s=g.useMemo(()=>{const i=gv();return Td(i,t,_d(r),e.transformTemplate),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};kv(i,e.style,e),s.style={...i,...s.style}}return s}function Nk(e=!1){return(n,r,s,{latestValues:i},a)=>{const c=(bd(n)?Ck:bk)(r,i,a,n),u=zS(r,typeof n=="string",e),d=n!==g.Fragment?{...u,...c,ref:s}:{},{children:f}=r,m=g.useMemo(()=>Pe(f)?f.get():f,[f]);return g.createElement(n,{...d,children:m})}}function Ak(e,t){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const a={...bd(r)?wk:jk,preloadedFeatures:e,useRender:Nk(s),createVisualElement:t,Component:r};return XS(a)}}function bv(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function za(e,t,n){const r=e.getProps();return Cd(r,t,n!==void 0?n:r.custom,e)}const Pk=xd(()=>window.ScrollTimeline!==void 0);class Tk{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,n){for(let r=0;r<this.animations.length;r++)this.animations[r][t]=n}attachTimeline(t,n){const r=this.animations.map(s=>{if(Pk()&&s.attachTimeline)return s.attachTimeline(t);if(typeof n=="function")return n(s)});return()=>{r.forEach((s,i)=>{s&&s(),this.animations[i].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Ek extends Tk{then(t,n){return Promise.all(this.animations).then(t).catch(n)}}function Md(e,t){return e?e[t]||e.default||e:void 0}const Xc=2e4;function Cv(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Xc;)t+=n,r=e.next(t);return t>=Xc?1/0:t}function Ld(e){return typeof e=="function"}function Vp(e,t){e.timeline=t,e.onfinish=null}const Dd=e=>Array.isArray(e)&&typeof e[0]=="number",_k={linearEasing:void 0};function Rk(e,t){const n=xd(e);return()=>{var r;return(r=_k[t])!==null&&r!==void 0?r:n()}}const la=Rk(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Nv=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let i=0;i<s;i++)r+=e(os(0,s-1,i))+", ";return`linear(${r.substring(0,r.length-2)})`};function Av(e){return!!(typeof e=="function"&&la()||!e||typeof e=="string"&&(e in Jc||la())||Dd(e)||Array.isArray(e)&&e.every(Av))}const Vs=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,Jc={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Vs([0,.65,.55,1]),circOut:Vs([.55,0,1,.45]),backIn:Vs([.31,.01,.66,-.59]),backOut:Vs([.33,1.53,.69,.99])};function Pv(e,t){if(e)return typeof e=="function"&&la()?Nv(e,t):Dd(e)?Vs(e):Array.isArray(e)?e.map(n=>Pv(n,t)||Jc.easeOut):Jc[e]}const At={x:!1,y:!1};function Tv(){return At.x||At.y}function Mk(e,t,n){var r;if(e instanceof Element)return[e];if(typeof e=="string"){let s=document;const i=(r=void 0)!==null&&r!==void 0?r:s.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}function Ev(e,t){const n=Mk(e),r=new AbortController,s={passive:!0,...t,signal:r.signal};return[n,s,()=>r.abort()]}function Fp(e){return t=>{t.pointerType==="touch"||Tv()||e(t)}}function Lk(e,t,n={}){const[r,s,i]=Ev(e,n),a=Fp(l=>{const{target:c}=l,u=t(l);if(typeof u!="function"||!c)return;const d=Fp(f=>{u(f),c.removeEventListener("pointerleave",d)});c.addEventListener("pointerleave",d,s)});return r.forEach(l=>{l.addEventListener("pointerenter",a,s)}),i}const _v=(e,t)=>t?e===t?!0:_v(e,t.parentElement):!1,Id=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,Dk=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Ik(e){return Dk.has(e.tagName)||e.tabIndex!==-1}const Fs=new WeakSet;function Bp(e){return t=>{t.key==="Enter"&&e(t)}}function El(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Ok=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=Bp(()=>{if(Fs.has(n))return;El(n,"down");const s=Bp(()=>{El(n,"up")}),i=()=>El(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",i,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function zp(e){return Id(e)&&!Tv()}function Vk(e,t,n={}){const[r,s,i]=Ev(e,n),a=l=>{const c=l.currentTarget;if(!zp(l)||Fs.has(c))return;Fs.add(c);const u=t(l),d=(S,b)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",m),!(!zp(S)||!Fs.has(c))&&(Fs.delete(c),typeof u=="function"&&u(S,{success:b}))},f=S=>{d(S,n.useGlobalTarget||_v(c,S.target))},m=S=>{d(S,!1)};window.addEventListener("pointerup",f,s),window.addEventListener("pointercancel",m,s)};return r.forEach(l=>{!Ik(l)&&l.getAttribute("tabindex")===null&&(l.tabIndex=0),(n.useGlobalTarget?window:l).addEventListener("pointerdown",a,s),l.addEventListener("focus",u=>Ok(u,s),s)}),i}function Fk(e){return e==="x"||e==="y"?At[e]?null:(At[e]=!0,()=>{At[e]=!1}):At.x||At.y?null:(At.x=At.y=!0,()=>{At.x=At.y=!1})}const Rv=new Set(["width","height","top","left","right","bottom",...ms]);let _o;function Bk(){_o=void 0}const Ht={now:()=>(_o===void 0&&Ht.set(Ne.isProcessing||DS.useManualTiming?Ne.timestamp:performance.now()),_o),set:e=>{_o=e,queueMicrotask(Bk)}};function Od(e,t){e.indexOf(t)===-1&&e.push(t)}function Vd(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Fd{constructor(){this.subscriptions=[]}add(t){return Od(this.subscriptions,t),()=>Vd(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let i=0;i<s;i++){const a=this.subscriptions[i];a&&a(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function Mv(e,t){return t?e*(1e3/t):0}const Up=30,zk=e=>!isNaN(parseFloat(e)),Js={current:void 0};class Uk{constructor(t,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const i=Ht.now();this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Ht.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=zk(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Fd);const r=this.events[t].add(n);return t==="change"?()=>{r(),ie.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return Js.current&&Js.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const t=Ht.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Up)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Up);return Mv(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ls(e,t){return new Uk(e,t)}function $k(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,ls(n))}function Wk(e,t){const n=za(e,t);let{transitionEnd:r={},transition:s={},...i}=n||{};i={...i,...r};for(const a in i){const l=nk(i[a]);$k(e,a,l)}}function Hk(e){return!!(Pe(e)&&e.add)}function qc(e,t){const n=e.getValue("willChange");if(Hk(n))return n.add(t)}function Lv(e){return e.props[uv]}const Dv=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,Kk=1e-7,Gk=12;function Yk(e,t,n,r,s){let i,a,l=0;do a=t+(n-t)/2,i=Dv(a,r,s)-e,i>0?n=a:t=a;while(Math.abs(i)>Kk&&++l<Gk);return a}function Li(e,t,n,r){if(e===t&&n===r)return ot;const s=i=>Yk(i,0,1,e,n);return i=>i===0||i===1?i:Dv(s(i),t,r)}const Iv=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Ov=e=>t=>1-e(1-t),Vv=Li(.33,1.53,.69,.99),Bd=Ov(Vv),Fv=Iv(Bd),Bv=e=>(e*=2)<1?.5*Bd(e):.5*(2-Math.pow(2,-10*(e-1))),zd=e=>1-Math.sin(Math.acos(e)),zv=Ov(zd),Uv=Iv(zd),$v=e=>/^0[^.\s]+$/u.test(e);function Qk(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||$v(e):!0}const qs=e=>Math.round(e*1e5)/1e5,Ud=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Xk(e){return e==null}const Jk=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,$d=(e,t)=>n=>!!(typeof n=="string"&&Jk.test(n)&&n.startsWith(e)||t&&!Xk(n)&&Object.prototype.hasOwnProperty.call(n,t)),Wv=(e,t,n)=>r=>{if(typeof r!="string")return r;const[s,i,a,l]=r.match(Ud);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},qk=e=>an(0,255,e),_l={...ys,transform:e=>Math.round(qk(e))},or={test:$d("rgb","red"),parse:Wv("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+_l.transform(e)+", "+_l.transform(t)+", "+_l.transform(n)+", "+qs(ki.transform(r))+")"};function Zk(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const Zc={test:$d("#"),parse:Zk,transform:or.transform},zr={test:$d("hsl","hue"),parse:Wv("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Wt.transform(qs(t))+", "+Wt.transform(qs(n))+", "+qs(ki.transform(r))+")"},Ve={test:e=>or.test(e)||Zc.test(e)||zr.test(e),parse:e=>or.test(e)?or.parse(e):zr.test(e)?zr.parse(e):Zc.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?or.transform(e):zr.transform(e)},eb=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function tb(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Ud))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(eb))===null||n===void 0?void 0:n.length)||0)>0}const Hv="number",Kv="color",nb="var",rb="var(",$p="${}",sb=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function bi(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let i=0;const l=t.replace(sb,c=>(Ve.test(c)?(r.color.push(i),s.push(Kv),n.push(Ve.parse(c))):c.startsWith(rb)?(r.var.push(i),s.push(nb),n.push(c)):(r.number.push(i),s.push(Hv),n.push(parseFloat(c))),++i,$p)).split($p);return{values:n,split:l,indexes:r,types:s}}function Gv(e){return bi(e).values}function Yv(e){const{split:t,types:n}=bi(e),r=t.length;return s=>{let i="";for(let a=0;a<r;a++)if(i+=t[a],s[a]!==void 0){const l=n[a];l===Hv?i+=qs(s[a]):l===Kv?i+=Ve.transform(s[a]):i+=s[a]}return i}}const ib=e=>typeof e=="number"?0:e;function ob(e){const t=Gv(e);return Yv(e)(t.map(ib))}const Fn={test:tb,parse:Gv,createTransformer:Yv,getAnimatableNone:ob},ab=new Set(["brightness","contrast","saturate","opacity"]);function lb(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Ud)||[];if(!r)return e;const s=n.replace(r,"");let i=ab.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+s+")"}const cb=/\b([a-z-]*)\(.*?\)/gu,eu={...Fn,getAnimatableNone:e=>{const t=e.match(cb);return t?t.map(lb).join(" "):e}},ub={...Ad,color:Ve,backgroundColor:Ve,outlineColor:Ve,fill:Ve,stroke:Ve,borderColor:Ve,borderTopColor:Ve,borderRightColor:Ve,borderBottomColor:Ve,borderLeftColor:Ve,filter:eu,WebkitFilter:eu},Wd=e=>ub[e];function Qv(e,t){let n=Wd(e);return n!==eu&&(n=Fn),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const db=new Set(["auto","none","0"]);function hb(e,t,n){let r=0,s;for(;r<e.length&&!s;){const i=e[r];typeof i=="string"&&!db.has(i)&&bi(i).values.length&&(s=e[r]),r++}if(s&&n)for(const i of t)e[i]=Qv(n,s)}const Wp=e=>e===ys||e===G,Hp=(e,t)=>parseFloat(e.split(", ")[t]),Kp=(e,t)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/u);if(s)return Hp(s[1],t);{const i=r.match(/^matrix\((.+)\)$/u);return i?Hp(i[1],e):0}},pb=new Set(["x","y","z"]),fb=ms.filter(e=>!pb.has(e));function mb(e){const t=[];return fb.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const cs={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:Kp(4,13),y:Kp(5,14)};cs.translateX=cs.x;cs.translateY=cs.y;const cr=new Set;let tu=!1,nu=!1;function Xv(){if(nu){const e=Array.from(cr).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=mb(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([i,a])=>{var l;(l=r.getValue(i))===null||l===void 0||l.set(a)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}nu=!1,tu=!1,cr.forEach(e=>e.complete()),cr.clear()}function Jv(){cr.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(nu=!0)})}function yb(){Jv(),Xv()}class Hd{constructor(t,n,r,s,i,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=i,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(cr.add(this),tu||(tu=!0,ie.read(Jv),ie.resolveKeyframes(Xv))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;for(let i=0;i<t.length;i++)if(t[i]===null)if(i===0){const a=s==null?void 0:s.get(),l=t[t.length-1];if(a!==void 0)t[0]=a;else if(r&&n){const c=r.readValue(n,l);c!=null&&(t[0]=c)}t[0]===void 0&&(t[0]=l),s&&a===void 0&&s.set(t[0])}else t[i]=t[i-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),cr.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,cr.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const qv=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),gb=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function vb(e){const t=gb.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}function Zv(e,t,n=1){const[r,s]=vb(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const a=i.trim();return qv(a)?parseFloat(a):a}return Nd(s)?Zv(s,t,n+1):s}const e0=e=>t=>t.test(e),xb={test:e=>e==="auto",parse:e=>e},t0=[ys,G,Wt,wn,lk,ak,xb],Gp=e=>t0.find(e0(e));class n0 extends Hd{constructor(t,n,r,s,i){super(t,n,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let u=t[c];if(typeof u=="string"&&(u=u.trim(),Nd(u))){const d=Zv(u,n.current);d!==void 0&&(t[c]=d),c===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!Rv.has(r)||t.length!==2)return;const[s,i]=t,a=Gp(s),l=Gp(i);if(a!==l)if(Wp(a)&&Wp(l))for(let c=0;c<t.length;c++){const u=t[c];typeof u=="string"&&(t[c]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)Qk(t[s])&&r.push(s);r.length&&hb(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=cs[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){var t;const{element:n,name:r,unresolvedKeyframes:s}=this;if(!n||!n.current)return;const i=n.getValue(r);i&&i.jump(this.measuredOrigin,!1);const a=s.length-1,l=s[a];s[a]=cs[r](n.measureViewportBox(),window.getComputedStyle(n.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([c,u])=>{n.getValue(c).set(u)}),this.resolveNoneKeyframes()}}const Yp=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Fn.test(e)||e==="0")&&!e.startsWith("url("));function wb(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function jb(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],a=Yp(s,t),l=Yp(i,t);return!a||!l?!1:wb(e)||(n==="spring"||Ld(n))&&r}const Sb=e=>e!==null;function Ua(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(Sb),i=t&&n!=="loop"&&t%2===1?0:s.length-1;return!i||r===void 0?s[i]:r}const kb=40;class r0{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:a="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Ht.now(),this.options={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:i,repeatType:a,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>kb?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&yb(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=Ht.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:i,delay:a,onComplete:l,onUpdate:c,isGenerator:u}=this.options;if(!u&&!jb(t,r,s,i))if(a)this.options.duration=0;else{c&&c(Ua(t,this.options,n)),l&&l(),this.resolveFinishedPromise();return}const d=this.initPlayback(t,n);d!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...d},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const de=(e,t,n)=>e+(t-e)*n;function Rl(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function bb({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,i=0,a=0;if(!t)s=i=a=n;else{const l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;s=Rl(c,l,e+1/3),i=Rl(c,l,e),a=Rl(c,l,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:r}}function ca(e,t){return n=>n>0?t:e}const Ml=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},Cb=[Zc,or,zr],Nb=e=>Cb.find(t=>t.test(e));function Qp(e){const t=Nb(e);if(!t)return!1;let n=t.parse(e);return t===zr&&(n=bb(n)),n}const Xp=(e,t)=>{const n=Qp(e),r=Qp(t);if(!n||!r)return ca(e,t);const s={...n};return i=>(s.red=Ml(n.red,r.red,i),s.green=Ml(n.green,r.green,i),s.blue=Ml(n.blue,r.blue,i),s.alpha=de(n.alpha,r.alpha,i),or.transform(s))},Ab=(e,t)=>n=>t(e(n)),Di=(...e)=>e.reduce(Ab),ru=new Set(["none","hidden"]);function Pb(e,t){return ru.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function Tb(e,t){return n=>de(e,t,n)}function Kd(e){return typeof e=="number"?Tb:typeof e=="string"?Nd(e)?ca:Ve.test(e)?Xp:Rb:Array.isArray(e)?s0:typeof e=="object"?Ve.test(e)?Xp:Eb:ca}function s0(e,t){const n=[...e],r=n.length,s=e.map((i,a)=>Kd(i)(i,t[a]));return i=>{for(let a=0;a<r;a++)n[a]=s[a](i);return n}}function Eb(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=Kd(e[s])(e[s],t[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}}function _b(e,t){var n;const r=[],s={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const a=t.types[i],l=e.indexes[a][s[a]],c=(n=e.values[l])!==null&&n!==void 0?n:0;r[i]=c,s[a]++}return r}const Rb=(e,t)=>{const n=Fn.createTransformer(t),r=bi(e),s=bi(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?ru.has(e)&&!s.values.length||ru.has(t)&&!r.values.length?Pb(e,t):Di(s0(_b(r,s),s.values),n):ca(e,t)};function i0(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?de(e,t,n):Kd(e)(e,t)}const Mb=5;function o0(e,t,n){const r=Math.max(t-Mb,0);return Mv(n-e(r),t-r)}const me={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ll=.001;function Lb({duration:e=me.duration,bounce:t=me.bounce,velocity:n=me.velocity,mass:r=me.mass}){let s,i,a=1-t;a=an(me.minDamping,me.maxDamping,a),e=an(me.minDuration,me.maxDuration,en(e)),a<1?(s=u=>{const d=u*a,f=d*e,m=d-n,S=su(u,a),b=Math.exp(-f);return Ll-m/S*b},i=u=>{const f=u*a*e,m=f*n+n,S=Math.pow(a,2)*Math.pow(u,2)*e,b=Math.exp(-f),w=su(Math.pow(u,2),a);return(-s(u)+Ll>0?-1:1)*((m-S)*b)/w}):(s=u=>{const d=Math.exp(-u*e),f=(u-n)*e+1;return-Ll+d*f},i=u=>{const d=Math.exp(-u*e),f=(n-u)*(e*e);return d*f});const l=5/e,c=Ib(s,i,l);if(e=Zt(e),isNaN(c))return{stiffness:me.stiffness,damping:me.damping,duration:e};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:a*2*Math.sqrt(r*u),duration:e}}}const Db=12;function Ib(e,t,n){let r=n;for(let s=1;s<Db;s++)r=r-e(r)/t(r);return r}function su(e,t){return e*Math.sqrt(1-t*t)}const Ob=["duration","bounce"],Vb=["stiffness","damping","mass"];function Jp(e,t){return t.some(n=>e[n]!==void 0)}function Fb(e){let t={velocity:me.velocity,stiffness:me.stiffness,damping:me.damping,mass:me.mass,isResolvedFromDuration:!1,...e};if(!Jp(e,Vb)&&Jp(e,Ob))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,i=2*an(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:me.mass,stiffness:s,damping:i}}else{const n=Lb(e);t={...t,...n,mass:me.mass},t.isResolvedFromDuration=!0}return t}function a0(e=me.visualDuration,t=me.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const i=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:u,mass:d,duration:f,velocity:m,isResolvedFromDuration:S}=Fb({...n,velocity:-en(n.velocity||0)}),b=m||0,w=u/(2*Math.sqrt(c*d)),k=a-i,h=en(Math.sqrt(c/d)),p=Math.abs(k)<5;r||(r=p?me.restSpeed.granular:me.restSpeed.default),s||(s=p?me.restDelta.granular:me.restDelta.default);let y;if(w<1){const x=su(h,w);y=N=>{const A=Math.exp(-w*h*N);return a-A*((b+w*h*k)/x*Math.sin(x*N)+k*Math.cos(x*N))}}else if(w===1)y=x=>a-Math.exp(-h*x)*(k+(b+h*k)*x);else{const x=h*Math.sqrt(w*w-1);y=N=>{const A=Math.exp(-w*h*N),P=Math.min(x*N,300);return a-A*((b+w*h*k)*Math.sinh(P)+x*k*Math.cosh(P))/x}}const j={calculatedDuration:S&&f||null,next:x=>{const N=y(x);if(S)l.done=x>=f;else{let A=0;w<1&&(A=x===0?Zt(b):o0(y,x,N));const P=Math.abs(A)<=r,C=Math.abs(a-N)<=s;l.done=P&&C}return l.value=l.done?a:N,l},toString:()=>{const x=Math.min(Cv(j),Xc),N=Nv(A=>j.next(x*A).value,x,30);return x+"ms "+N}};return j}function qp({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:a,min:l,max:c,restDelta:u=.5,restSpeed:d}){const f=e[0],m={done:!1,value:f},S=P=>l!==void 0&&P<l||c!==void 0&&P>c,b=P=>l===void 0?c:c===void 0||Math.abs(l-P)<Math.abs(c-P)?l:c;let w=n*t;const k=f+w,h=a===void 0?k:a(k);h!==k&&(w=h-f);const p=P=>-w*Math.exp(-P/r),y=P=>h+p(P),j=P=>{const C=p(P),E=y(P);m.done=Math.abs(C)<=u,m.value=m.done?h:E};let x,N;const A=P=>{S(m.value)&&(x=P,N=a0({keyframes:[m.value,b(m.value)],velocity:o0(y,P,m.value),damping:s,stiffness:i,restDelta:u,restSpeed:d}))};return A(0),{calculatedDuration:null,next:P=>{let C=!1;return!N&&x===void 0&&(C=!0,j(P),A(P)),x!==void 0&&P>=x?N.next(P-x):(!C&&j(P),m)}}}const Bb=Li(.42,0,1,1),zb=Li(0,0,.58,1),l0=Li(.42,0,.58,1),Ub=e=>Array.isArray(e)&&typeof e[0]!="number",$b={linear:ot,easeIn:Bb,easeInOut:l0,easeOut:zb,circIn:zd,circInOut:Uv,circOut:zv,backIn:Bd,backInOut:Fv,backOut:Vv,anticipate:Bv},Zp=e=>{if(Dd(e)){iv(e.length===4);const[t,n,r,s]=e;return Li(t,n,r,s)}else if(typeof e=="string")return $b[e];return e};function Wb(e,t,n){const r=[],s=n||i0,i=e.length-1;for(let a=0;a<i;a++){let l=s(e[a],e[a+1]);if(t){const c=Array.isArray(t)?t[a]||ot:t;l=Di(c,l)}r.push(l)}return r}function c0(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const i=e.length;if(iv(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=Wb(t,r,s),c=l.length,u=d=>{if(a&&d<e[0])return t[0];let f=0;if(c>1)for(;f<e.length-2&&!(d<e[f+1]);f++);const m=os(e[f],e[f+1],d);return l[f](m)};return n?d=>u(an(e[0],e[i-1],d)):u}function Hb(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=os(0,t,r);e.push(de(n,1,s))}}function Kb(e){const t=[0];return Hb(t,e.length-1),t}function Gb(e,t){return e.map(n=>n*t)}function Yb(e,t){return e.map(()=>t||l0).splice(0,e.length-1)}function ua({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=Ub(r)?r.map(Zp):Zp(r),i={done:!1,value:t[0]},a=Gb(n&&n.length===t.length?n:Kb(t),e),l=c0(a,t,{ease:Array.isArray(s)?s:Yb(t,s)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}const Qb=e=>{const t=({timestamp:n})=>e(n);return{start:()=>ie.update(t,!0),stop:()=>on(t),now:()=>Ne.isProcessing?Ne.timestamp:Ht.now()}},Xb={decay:qp,inertia:qp,tween:ua,keyframes:ua,spring:a0},Jb=e=>e/100;class $a extends r0{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:n,motionValue:r,element:s,keyframes:i}=this.options,a=(s==null?void 0:s.KeyframeResolver)||Hd,l=(c,u)=>this.onKeyframesResolved(c,u);this.resolver=new a(i,l,n,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:a=0}=this.options,l=Ld(n)?n:Xb[n]||ua;let c,u;l!==ua&&typeof t[0]!="number"&&(c=Di(Jb,i0(t[0],t[1])),t=[0,100]);const d=l({...this.options,keyframes:t});i==="mirror"&&(u=l({...this.options,keyframes:[...t].reverse(),velocity:-a})),d.calculatedDuration===null&&(d.calculatedDuration=Cv(d));const{calculatedDuration:f}=d,m=f+s,S=m*(r+1)-s;return{generator:d,mirroredGenerator:u,mapPercentToKeyframes:c,calculatedDuration:f,resolvedDuration:m,totalDuration:S}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:r}=this;if(!r){const{keyframes:P}=this.options;return{done:!0,value:P[P.length-1]}}const{finalKeyframe:s,generator:i,mirroredGenerator:a,mapPercentToKeyframes:l,keyframes:c,calculatedDuration:u,totalDuration:d,resolvedDuration:f}=r;if(this.startTime===null)return i.next(0);const{delay:m,repeat:S,repeatType:b,repeatDelay:w,onUpdate:k}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-d/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const h=this.currentTime-m*(this.speed>=0?1:-1),p=this.speed>=0?h<0:h>d;this.currentTime=Math.max(h,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let y=this.currentTime,j=i;if(S){const P=Math.min(this.currentTime,d)/f;let C=Math.floor(P),E=P%1;!E&&P>=1&&(E=1),E===1&&C--,C=Math.min(C,S+1),!!(C%2)&&(b==="reverse"?(E=1-E,w&&(E-=w/f)):b==="mirror"&&(j=a)),y=an(0,1,E)*f}const x=p?{done:!1,value:c[0]}:j.next(y);l&&(x.value=l(x.value));let{done:N}=x;!p&&u!==null&&(N=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&N);return A&&s!==void 0&&(x.value=Ua(c,this.options,s)),k&&k(x.value),A&&this.finish(),x}get duration(){const{resolved:t}=this;return t?en(t.calculatedDuration):0}get time(){return en(this.currentTime)}set time(t){t=Zt(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=en(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=Qb,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}function qb(e){return new $a(e)}const Zb=new Set(["opacity","clipPath","filter","transform"]);function eC(e,t,n,{delay:r=0,duration:s=300,repeat:i=0,repeatType:a="loop",ease:l="easeInOut",times:c}={}){const u={[t]:n};c&&(u.offset=c);const d=Pv(l,s);return Array.isArray(d)&&(u.easing=d),e.animate(u,{delay:r,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"})}const tC=xd(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),da=10,nC=2e4;function rC(e){return Ld(e.type)||e.type==="spring"||!Av(e.ease)}function sC(e,t){const n=new $a({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:e[0]};const s=[];let i=0;for(;!r.done&&i<nC;)r=n.sample(i),s.push(r.value),i+=da;return{times:void 0,keyframes:s,duration:i-da,ease:"linear"}}const u0={anticipate:Bv,backInOut:Fv,circInOut:Uv};function iC(e){return e in u0}class ef extends r0{constructor(t){super(t);const{name:n,motionValue:r,element:s,keyframes:i}=this.options;this.resolver=new n0(i,(a,l)=>this.onKeyframesResolved(a,l),n,r,s),this.resolver.scheduleResolve()}initPlayback(t,n){let{duration:r=300,times:s,ease:i,type:a,motionValue:l,name:c,startTime:u}=this.options;if(!l.owner||!l.owner.current)return!1;if(typeof i=="string"&&la()&&iC(i)&&(i=u0[i]),rC(this.options)){const{onComplete:f,onUpdate:m,motionValue:S,element:b,...w}=this.options,k=sC(t,w);t=k.keyframes,t.length===1&&(t[1]=t[0]),r=k.duration,s=k.times,i=k.ease,a="keyframes"}const d=eC(l.owner.current,c,t,{...this.options,duration:r,times:s,ease:i});return d.startTime=u??this.calcStartTime(),this.pendingTimeline?(Vp(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:f}=this.options;l.set(Ua(t,this.options,n)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:r,times:s,type:a,ease:i,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return en(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return en(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Zt(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return ot;const{animation:r}=n;Vp(r,t)}return ot}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:r,duration:s,type:i,ease:a,times:l}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:d,onComplete:f,element:m,...S}=this.options,b=new $a({...S,keyframes:r,duration:s,type:i,ease:a,times:l,isGenerator:!0}),w=Zt(this.time);u.setWithVelocity(b.sample(w-da).value,b.sample(w).value,da)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:r,repeatDelay:s,repeatType:i,damping:a,type:l}=t;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=n.owner.getProps();return tC()&&r&&Zb.has(r)&&!c&&!u&&!s&&i!=="mirror"&&a!==0&&l!=="inertia"}}const oC={type:"spring",stiffness:500,damping:25,restSpeed:10},aC=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),lC={type:"keyframes",duration:.8},cC={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},uC=(e,{keyframes:t})=>t.length>2?lC:gr.has(e)?e.startsWith("scale")?aC(t[1]):oC:cC;function dC({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:a,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const Gd=(e,t,n,r={},s,i)=>a=>{const l=Md(r,e)||{},c=l.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Zt(c);let d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-u,onUpdate:m=>{t.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{a(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:i?void 0:s};dC(l)||(d={...d,...uC(e,d)}),d.duration&&(d.duration=Zt(d.duration)),d.repeatDelay&&(d.repeatDelay=Zt(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(f=!0)),f&&!i&&t.get()!==void 0){const m=Ua(d.keyframes,l);if(m!==void 0)return ie.update(()=>{d.onUpdate(m),d.onComplete()}),new Ek([])}return!i&&ef.supports(d)?new ef(d):new $a(d)};function hC({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function d0(e,t,{delay:n=0,transitionOverride:r,type:s}={}){var i;let{transition:a=e.getDefaultTransition(),transitionEnd:l,...c}=t;r&&(a=r);const u=[],d=s&&e.animationState&&e.animationState.getState()[s];for(const f in c){const m=e.getValue(f,(i=e.latestValues[f])!==null&&i!==void 0?i:null),S=c[f];if(S===void 0||d&&hC(d,f))continue;const b={delay:n,...Md(a||{},f)};let w=!1;if(window.MotionHandoffAnimation){const h=Lv(e);if(h){const p=window.MotionHandoffAnimation(h,f,ie);p!==null&&(b.startTime=p,w=!0)}}qc(e,f),m.start(Gd(f,m,S,e.shouldReduceMotion&&Rv.has(f)?{type:!1}:b,e,w));const k=m.animation;k&&u.push(k)}return l&&Promise.all(u).then(()=>{ie.update(()=>{l&&Wk(e,l)})}),u}function iu(e,t,n={}){var r;const s=za(e,t,n.type==="exit"?(r=e.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(i=n.transitionOverride);const a=s?()=>Promise.all(d0(e,s,n)):()=>Promise.resolve(),l=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:f,staggerDirection:m}=i;return pC(e,t,d+u,f,m,n)}:()=>Promise.resolve(),{when:c}=i;if(c){const[u,d]=c==="beforeChildren"?[a,l]:[l,a];return u().then(()=>d())}else return Promise.all([a(),l(n.delay)])}function pC(e,t,n=0,r=0,s=1,i){const a=[],l=(e.variantChildren.size-1)*r,c=s===1?(u=0)=>u*r:(u=0)=>l-u*r;return Array.from(e.variantChildren).sort(fC).forEach((u,d)=>{u.notify("AnimationStart",t),a.push(iu(u,t,{...i,delay:n+c(d)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(a)}function fC(e,t){return e.sortNodePosition(t)}function mC(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(i=>iu(e,i,n));r=Promise.all(s)}else if(typeof t=="string")r=iu(e,t,n);else{const s=typeof t=="function"?za(e,t,n.custom):t;r=Promise.all(d0(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}const yC=jd.length;function h0(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?h0(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<yC;n++){const r=jd[n],s=e.props[r];(Si(s)||s===!1)&&(t[r]=s)}return t}const gC=[...wd].reverse(),vC=wd.length;function xC(e){return t=>Promise.all(t.map(({animation:n,options:r})=>mC(e,n,r)))}function wC(e){let t=xC(e),n=tf(),r=!0;const s=c=>(u,d)=>{var f;const m=za(e,d,c==="exit"?(f=e.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(m){const{transition:S,transitionEnd:b,...w}=m;u={...u,...w,...b}}return u};function i(c){t=c(e)}function a(c){const{props:u}=e,d=h0(e.parent)||{},f=[],m=new Set;let S={},b=1/0;for(let k=0;k<vC;k++){const h=gC[k],p=n[h],y=u[h]!==void 0?u[h]:d[h],j=Si(y),x=h===c?p.isActive:null;x===!1&&(b=k);let N=y===d[h]&&y!==u[h]&&j;if(N&&r&&e.manuallyAnimateOnMount&&(N=!1),p.protectedKeys={...S},!p.isActive&&x===null||!y&&!p.prevProp||Fa(y)||typeof y=="boolean")continue;const A=jC(p.prevProp,y);let P=A||h===c&&p.isActive&&!N&&j||k>b&&j,C=!1;const E=Array.isArray(y)?y:[y];let T=E.reduce(s(h),{});x===!1&&(T={});const{prevResolvedValues:M={}}=p,D={...M,...T},$=q=>{P=!0,m.has(q)&&(C=!0,m.delete(q)),p.needsAnimating[q]=!0;const O=e.getValue(q);O&&(O.liveStyle=!1)};for(const q in D){const O=T[q],U=M[q];if(S.hasOwnProperty(q))continue;let W=!1;Qc(O)&&Qc(U)?W=!bv(O,U):W=O!==U,W?O!=null?$(q):m.add(q):O!==void 0&&m.has(q)?$(q):p.protectedKeys[q]=!0}p.prevProp=y,p.prevResolvedValues=T,p.isActive&&(S={...S,...T}),r&&e.blockInitialAnimation&&(P=!1),P&&(!(N&&A)||C)&&f.push(...E.map(q=>({animation:q,options:{type:h}})))}if(m.size){const k={};m.forEach(h=>{const p=e.getBaseTarget(h),y=e.getValue(h);y&&(y.liveStyle=!0),k[h]=p??null}),f.push({animation:k})}let w=!!f.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(w=!1),r=!1,w?t(f):Promise.resolve()}function l(c,u){var d;if(n[c].isActive===u)return Promise.resolve();(d=e.variantChildren)===null||d===void 0||d.forEach(m=>{var S;return(S=m.animationState)===null||S===void 0?void 0:S.setActive(c,u)}),n[c].isActive=u;const f=a(c);for(const m in n)n[m].protectedKeys={};return f}return{animateChanges:a,setActive:l,setAnimateFunction:i,getState:()=>n,reset:()=>{n=tf(),r=!0}}}function jC(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!bv(t,e):!1}function Qn(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function tf(){return{animate:Qn(!0),whileInView:Qn(),whileHover:Qn(),whileTap:Qn(),whileDrag:Qn(),whileFocus:Qn(),exit:Qn()}}class Wn{constructor(t){this.isMounted=!1,this.node=t}update(){}}class SC extends Wn{constructor(t){super(t),t.animationState||(t.animationState=wC(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Fa(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let kC=0;class bC extends Wn{constructor(){super(...arguments),this.id=kC++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const CC={animation:{Feature:SC},exit:{Feature:bC}};function Ci(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function Ii(e){return{point:{x:e.pageX,y:e.pageY}}}const NC=e=>t=>Id(t)&&e(t,Ii(t));function Zs(e,t,n,r){return Ci(e,t,NC(n),r)}const nf=(e,t)=>Math.abs(e-t);function AC(e,t){const n=nf(e.x,t.x),r=nf(e.y,t.y);return Math.sqrt(n**2+r**2)}class p0{constructor(t,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=Il(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,S=AC(f.offset,{x:0,y:0})>=3;if(!m&&!S)return;const{point:b}=f,{timestamp:w}=Ne;this.history.push({...b,timestamp:w});const{onStart:k,onMove:h}=this.handlers;m||(k&&k(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),h&&h(this.lastMoveEvent,f)},this.handlePointerMove=(f,m)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Dl(m,this.transformPagePoint),ie.update(this.updatePoint,!0)},this.handlePointerUp=(f,m)=>{this.end();const{onEnd:S,onSessionEnd:b,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=Il(f.type==="pointercancel"?this.lastMoveEventInfo:Dl(m,this.transformPagePoint),this.history);this.startEvent&&S&&S(f,k),b&&b(f,k)},!Id(t))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const a=Ii(t),l=Dl(a,this.transformPagePoint),{point:c}=l,{timestamp:u}=Ne;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=n;d&&d(t,Il(l,this.history)),this.removeListeners=Di(Zs(this.contextWindow,"pointermove",this.handlePointerMove),Zs(this.contextWindow,"pointerup",this.handlePointerUp),Zs(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),on(this.updatePoint)}}function Dl(e,t){return t?{point:t(e.point)}:e}function rf(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Il({point:e},t){return{point:e,delta:rf(e,f0(t)),offset:rf(e,PC(t)),velocity:TC(t,.1)}}function PC(e){return e[0]}function f0(e){return e[e.length-1]}function TC(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=f0(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>Zt(t)));)n--;if(!r)return{x:0,y:0};const i=en(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const a={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const m0=1e-4,EC=1-m0,_C=1+m0,y0=.01,RC=0-y0,MC=0+y0;function lt(e){return e.max-e.min}function LC(e,t,n){return Math.abs(e-t)<=n}function sf(e,t,n,r=.5){e.origin=r,e.originPoint=de(t.min,t.max,e.origin),e.scale=lt(n)/lt(t),e.translate=de(n.min,n.max,e.origin)-e.originPoint,(e.scale>=EC&&e.scale<=_C||isNaN(e.scale))&&(e.scale=1),(e.translate>=RC&&e.translate<=MC||isNaN(e.translate))&&(e.translate=0)}function ei(e,t,n,r){sf(e.x,t.x,n.x,r?r.originX:void 0),sf(e.y,t.y,n.y,r?r.originY:void 0)}function of(e,t,n){e.min=n.min+t.min,e.max=e.min+lt(t)}function DC(e,t,n){of(e.x,t.x,n.x),of(e.y,t.y,n.y)}function af(e,t,n){e.min=t.min-n.min,e.max=e.min+lt(t)}function ti(e,t,n){af(e.x,t.x,n.x),af(e.y,t.y,n.y)}function IC(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?de(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?de(n,e,r.max):Math.min(e,n)),e}function lf(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function OC(e,{top:t,left:n,bottom:r,right:s}){return{x:lf(e.x,n,s),y:lf(e.y,t,r)}}function cf(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function VC(e,t){return{x:cf(e.x,t.x),y:cf(e.y,t.y)}}function FC(e,t){let n=.5;const r=lt(e),s=lt(t);return s>r?n=os(t.min,t.max-r,e.min):r>s&&(n=os(e.min,e.max-s,t.min)),an(0,1,n)}function BC(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const ou=.35;function zC(e=ou){return e===!1?e=0:e===!0&&(e=ou),{x:uf(e,"left","right"),y:uf(e,"top","bottom")}}function uf(e,t,n){return{min:df(e,t),max:df(e,n)}}function df(e,t){return typeof e=="number"?e:e[t]||0}const hf=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ur=()=>({x:hf(),y:hf()}),pf=()=>({min:0,max:0}),ge=()=>({x:pf(),y:pf()});function vt(e){return[e("x"),e("y")]}function g0({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function UC({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function $C(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Ol(e){return e===void 0||e===1}function au({scale:e,scaleX:t,scaleY:n}){return!Ol(e)||!Ol(t)||!Ol(n)}function er(e){return au(e)||v0(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function v0(e){return ff(e.x)||ff(e.y)}function ff(e){return e&&e!=="0%"}function ha(e,t,n){const r=e-n,s=t*r;return n+s}function mf(e,t,n,r,s){return s!==void 0&&(e=ha(e,s,r)),ha(e,n,r)+t}function lu(e,t=0,n=1,r,s){e.min=mf(e.min,t,n,r,s),e.max=mf(e.max,t,n,r,s)}function x0(e,{x:t,y:n}){lu(e.x,t.translate,t.scale,t.originPoint),lu(e.y,n.translate,n.scale,n.originPoint)}const yf=.999999999999,gf=1.0000000000001;function WC(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let i,a;for(let l=0;l<s;l++){i=n[l],a=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Wr(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,x0(e,a)),r&&er(i.latestValues)&&Wr(e,i.latestValues))}t.x<gf&&t.x>yf&&(t.x=1),t.y<gf&&t.y>yf&&(t.y=1)}function $r(e,t){e.min=e.min+t,e.max=e.max+t}function vf(e,t,n,r,s=.5){const i=de(e.min,e.max,s);lu(e,t,n,i,r)}function Wr(e,t){vf(e.x,t.x,t.scaleX,t.scale,t.originX),vf(e.y,t.y,t.scaleY,t.scale,t.originY)}function w0(e,t){return g0($C(e.getBoundingClientRect(),t))}function HC(e,t,n){const r=w0(e,n),{scroll:s}=t;return s&&($r(r.x,s.offset.x),$r(r.y,s.offset.y)),r}const j0=({current:e})=>e?e.ownerDocument.defaultView:null,KC=new WeakMap;class GC{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ge(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ii(d).point)},i=(d,f)=>{const{drag:m,dragPropagation:S,onDragStart:b}=this.getProps();if(m&&!S&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Fk(m),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),vt(k=>{let h=this.getAxisMotionValue(k).get()||0;if(Wt.test(h)){const{projection:p}=this.visualElement;if(p&&p.layout){const y=p.layout.layoutBox[k];y&&(h=lt(y)*(parseFloat(h)/100))}}this.originPoint[k]=h}),b&&ie.postRender(()=>b(d,f)),qc(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},a=(d,f)=>{const{dragPropagation:m,dragDirectionLock:S,onDirectionLock:b,onDrag:w}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:k}=f;if(S&&this.currentDirection===null){this.currentDirection=YC(k),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",f.point,k),this.updateAxis("y",f.point,k),this.visualElement.render(),w&&w(d,f)},l=(d,f)=>this.stop(d,f),c=()=>vt(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new p0(t,{onSessionStart:s,onStart:i,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:j0(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&ie.postRender(()=>i(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!ho(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let a=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(a=IC(a,this.constraints[t],this.elastic[t])),i.set(a)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,i=this.constraints;n&&Br(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=OC(s.layoutBox,n):this.constraints=!1,this.elastic=zC(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&vt(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=BC(s.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Br(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=HC(r,s.root,this.visualElement.getTransformPagePoint());let a=VC(s.layout.layoutBox,i);if(n){const l=n(UC(a));this.hasMutatedConstraints=!!l,l&&(a=g0(l))}return a}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=vt(d=>{if(!ho(d,n,this.currentDirection))return;let f=c&&c[d]||{};a&&(f={min:0,max:0});const m=s?200:1e6,S=s?40:1e7,b={type:"inertia",velocity:r?t[d]:0,bounceStiffness:m,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(d,b)});return Promise.all(u).then(l)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return qc(this.visualElement,t),r.start(Gd(t,r,0,n,this.visualElement,!1))}stopAnimation(){vt(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){vt(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){vt(n=>{const{drag:r}=this.getProps();if(!ho(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:a,max:l}=s.layout.layoutBox[n];i.set(t[n]-de(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Br(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};vt(a=>{const l=this.getAxisMotionValue(a);if(l&&this.constraints!==!1){const c=l.get();s[a]=FC({min:c,max:c},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),vt(a=>{if(!ho(a,t,null))return;const l=this.getAxisMotionValue(a),{min:c,max:u}=this.constraints[a];l.set(de(c,u,s[a]))})}addListeners(){if(!this.visualElement.current)return;KC.set(this.visualElement,this);const t=this.visualElement.current,n=Zs(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Br(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),ie.read(r);const a=Ci(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(vt(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=c[d].translate,f.set(f.get()+c[d].translate))}),this.visualElement.render())});return()=>{a(),n(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:a=ou,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:a,dragMomentum:l}}}function ho(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function YC(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class QC extends Wn{constructor(t){super(t),this.removeGroupControls=ot,this.removeListeners=ot,this.controls=new GC(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ot}unmount(){this.removeGroupControls(),this.removeListeners()}}const xf=e=>(t,n)=>{e&&ie.postRender(()=>e(t,n))};class XC extends Wn{constructor(){super(...arguments),this.removePointerDownListener=ot}onPointerDown(t){this.session=new p0(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:j0(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:xf(t),onStart:xf(n),onMove:r,onEnd:(i,a)=>{delete this.session,s&&ie.postRender(()=>s(i,a))}}}mount(){this.removePointerDownListener=Zs(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ro={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function wf(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ts={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(G.test(e))e=parseFloat(e);else return e;const n=wf(e,t.target.x),r=wf(e,t.target.y);return`${n}% ${r}%`}},JC={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=Fn.parse(e);if(s.length>5)return r;const i=Fn.createTransformer(e),a=typeof s[0]!="number"?1:0,l=n.x.scale*t.x,c=n.y.scale*t.y;s[0+a]/=l,s[1+a]/=c;const u=de(l,c,.5);return typeof s[2+a]=="number"&&(s[2+a]/=u),typeof s[3+a]=="number"&&(s[3+a]/=u),i(s)}};class qC extends g.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=t;vk(ZC),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Ro.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,a=r.projection;return a&&(a.isPresent=i,s||t.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?a.promote():a.relegate()||ie.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),kd.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function S0(e){const[t,n]=rv(),r=g.useContext(gd);return o.jsx(qC,{...e,layoutGroup:r,switchLayoutGroup:g.useContext(dv),isPresent:t,safeToRemove:n})}const ZC={borderRadius:{...Ts,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ts,borderTopRightRadius:Ts,borderBottomLeftRadius:Ts,borderBottomRightRadius:Ts,boxShadow:JC};function e2(e,t,n){const r=Pe(e)?e:ls(e);return r.start(Gd("",r,t,n)),r.animation}function t2(e){return e instanceof SVGElement&&e.tagName!=="svg"}const n2=(e,t)=>e.depth-t.depth;class r2{constructor(){this.children=[],this.isDirty=!1}add(t){Od(this.children,t),this.isDirty=!0}remove(t){Vd(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(n2),this.isDirty=!1,this.children.forEach(t)}}function s2(e,t){const n=Ht.now(),r=({timestamp:s})=>{const i=s-n;i>=t&&(on(r),e(i-t))};return ie.read(r,!0),()=>on(r)}const k0=["TopLeft","TopRight","BottomLeft","BottomRight"],i2=k0.length,jf=e=>typeof e=="string"?parseFloat(e):e,Sf=e=>typeof e=="number"||G.test(e);function o2(e,t,n,r,s,i){s?(e.opacity=de(0,n.opacity!==void 0?n.opacity:1,a2(r)),e.opacityExit=de(t.opacity!==void 0?t.opacity:1,0,l2(r))):i&&(e.opacity=de(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let a=0;a<i2;a++){const l=`border${k0[a]}Radius`;let c=kf(t,l),u=kf(n,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||Sf(c)===Sf(u)?(e[l]=Math.max(de(jf(c),jf(u),r),0),(Wt.test(u)||Wt.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||n.rotate)&&(e.rotate=de(t.rotate||0,n.rotate||0,r))}function kf(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const a2=b0(0,.5,zv),l2=b0(.5,.95,ot);function b0(e,t,n){return r=>r<e?0:r>t?1:n(os(e,t,r))}function bf(e,t){e.min=t.min,e.max=t.max}function ft(e,t){bf(e.x,t.x),bf(e.y,t.y)}function Cf(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Nf(e,t,n,r,s){return e-=t,e=ha(e,1/n,r),s!==void 0&&(e=ha(e,1/s,r)),e}function c2(e,t=0,n=1,r=.5,s,i=e,a=e){if(Wt.test(t)&&(t=parseFloat(t),t=de(a.min,a.max,t/100)-a.min),typeof t!="number")return;let l=de(i.min,i.max,r);e===i&&(l-=t),e.min=Nf(e.min,t,n,l,s),e.max=Nf(e.max,t,n,l,s)}function Af(e,t,[n,r,s],i,a){c2(e,t[n],t[r],t[s],t.scale,i,a)}const u2=["x","scaleX","originX"],d2=["y","scaleY","originY"];function Pf(e,t,n,r){Af(e.x,t,u2,n?n.x:void 0,r?r.x:void 0),Af(e.y,t,d2,n?n.y:void 0,r?r.y:void 0)}function Tf(e){return e.translate===0&&e.scale===1}function C0(e){return Tf(e.x)&&Tf(e.y)}function Ef(e,t){return e.min===t.min&&e.max===t.max}function h2(e,t){return Ef(e.x,t.x)&&Ef(e.y,t.y)}function _f(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function N0(e,t){return _f(e.x,t.x)&&_f(e.y,t.y)}function Rf(e){return lt(e.x)/lt(e.y)}function Mf(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class p2{constructor(){this.members=[]}add(t){Od(this.members,t),t.scheduleRender()}remove(t){if(Vd(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function f2(e,t,n){let r="";const s=e.x.translate/t.x,i=e.y.translate/t.y,a=(n==null?void 0:n.z)||0;if((s||i||a)&&(r=`translate3d(${s}px, ${i}px, ${a}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:f,rotateY:m,skewX:S,skewY:b}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),f&&(r+=`rotateX(${f}deg) `),m&&(r+=`rotateY(${m}deg) `),S&&(r+=`skewX(${S}deg) `),b&&(r+=`skewY(${b}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const tr={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Bs=typeof window<"u"&&window.MotionDebug!==void 0,Vl=["","X","Y","Z"],m2={visibility:"hidden"},Lf=1e3;let y2=0;function Fl(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function A0(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=Lv(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",ie,!(s||i))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&A0(r)}function P0({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(a={},l=t==null?void 0:t()){this.id=y2++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Bs&&(tr.totalNodes=tr.resolvedTargetDeltas=tr.recalculatedProjection=0),this.nodes.forEach(x2),this.nodes.forEach(b2),this.nodes.forEach(C2),this.nodes.forEach(w2),Bs&&window.MotionDebug.record(tr)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new r2)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new Fd),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const c=this.eventHandlers.get(a);c&&c.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=t2(a),this.instance=a;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(u||c)&&(this.isLayoutDirty=!0),e){let f;const m=()=>this.root.updateBlockedByResize=!1;e(a,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=s2(m,250),Ro.hasAnimatedSinceResize&&(Ro.hasAnimatedSinceResize=!1,this.nodes.forEach(If))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:m,hasRelativeTargetChanged:S,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||d.getDefaultTransition()||E2,{onLayoutAnimationStart:k,onLayoutAnimationComplete:h}=d.getProps(),p=!this.targetLayout||!N0(this.targetLayout,b)||S,y=!m&&S;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||y||m&&(p||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,y);const j={...Md(w,"layout"),onPlay:k,onComplete:h};(d.shouldReduceMotion||this.options.layoutRoot)&&(j.delay=0,j.type=!1),this.startAnimation(j)}else m||If(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,on(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(N2),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&A0(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Df);return}this.isUpdating||this.nodes.forEach(S2),this.isUpdating=!1,this.nodes.forEach(k2),this.nodes.forEach(g2),this.nodes.forEach(v2),this.clearAllSnapshots();const l=Ht.now();Ne.delta=an(0,1e3/60,l-Ne.timestamp),Ne.timestamp=l,Ne.isProcessing=!0,Tl.update.process(Ne),Tl.preRender.process(Ne),Tl.render.process(Ne),Ne.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,kd.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(j2),this.sharedNodes.forEach(A2)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ie.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ie.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ge(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!C0(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;a&&(l||er(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return a&&(c=this.removeTransform(c)),_2(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:l}=this.options;if(!l)return ge();const c=l.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(R2))){const{scroll:d}=this.root;d&&($r(c.x,d.offset.x),$r(c.y,d.offset.y))}return c}removeElementScroll(a){var l;const c=ge();if(ft(c,a),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return c;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:f,options:m}=d;d!==this.root&&f&&m.layoutScroll&&(f.wasRoot&&ft(c,a),$r(c.x,f.offset.x),$r(c.y,f.offset.y))}return c}applyTransform(a,l=!1){const c=ge();ft(c,a);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Wr(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),er(d.latestValues)&&Wr(c,d.latestValues)}return er(this.latestValues)&&Wr(c,this.latestValues),c}removeTransform(a){const l=ge();ft(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!er(u.latestValues))continue;au(u.latestValues)&&u.updateSnapshot();const d=ge(),f=u.measurePageBox();ft(d,f),Pf(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return er(this.latestValues)&&Pf(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ne.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:m}=this.options;if(!(!this.layout||!(f||m))){if(this.resolvedRelativeTargetAt=Ne.timestamp,!this.targetDelta&&!this.relativeTarget){const S=this.getClosestProjectingParent();S&&S.layout&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ge(),this.relativeTargetOrigin=ge(),ti(this.relativeTargetOrigin,this.layout.layoutBox,S.layout.layoutBox),ft(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ge(),this.targetWithTransforms=ge()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),DC(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ft(this.target,this.layout.layoutBox),x0(this.target,this.targetDelta)):ft(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const S=this.getClosestProjectingParent();S&&!!S.resumingFrom==!!this.resumingFrom&&!S.options.layoutScroll&&S.target&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ge(),this.relativeTargetOrigin=ge(),ti(this.relativeTargetOrigin,this.target,S.target),ft(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Bs&&tr.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||au(this.parent.latestValues)||v0(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Ne.timestamp&&(u=!1),u)return;const{layout:d,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||f))return;ft(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,S=this.treeScale.y;WC(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=ge());const{target:b}=l;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Cf(this.prevProjectionDelta.x,this.projectionDelta.x),Cf(this.prevProjectionDelta.y,this.projectionDelta.y)),ei(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==S||!Mf(this.projectionDelta.x,this.prevProjectionDelta.x)||!Mf(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b)),Bs&&tr.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ur(),this.projectionDelta=Ur(),this.projectionDeltaWithTransform=Ur()}setAnimationOrigin(a,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},f=Ur();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=ge(),S=c?c.source:void 0,b=this.layout?this.layout.source:void 0,w=S!==b,k=this.getStack(),h=!k||k.members.length<=1,p=!!(w&&!h&&this.options.crossfade===!0&&!this.path.some(T2));this.animationProgress=0;let y;this.mixTargetDelta=j=>{const x=j/1e3;Of(f.x,a.x,x),Of(f.y,a.y,x),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ti(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),P2(this.relativeTarget,this.relativeTargetOrigin,m,x),y&&h2(this.relativeTarget,y)&&(this.isProjectionDirty=!1),y||(y=ge()),ft(y,this.relativeTarget)),w&&(this.animationValues=d,o2(d,u,this.latestValues,x,p,h)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=x},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(on(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ie.update(()=>{Ro.hasAnimatedSinceResize=!0,this.currentAnimation=e2(0,Lf,{...a,onUpdate:l=>{this.mixTargetDelta(l),a.onUpdate&&a.onUpdate(l)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Lf),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=a;if(!(!l||!c||!u)){if(this!==a&&this.layout&&u&&T0(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||ge();const f=lt(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+f;const m=lt(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+m}ft(l,c),Wr(l,d),ei(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new p2),this.sharedNodes.get(a).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:l}=this.options;return l?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:l}=this.options;return l?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&Fl("z",a,u,this.animationValues);for(let d=0;d<Vl.length;d++)Fl(`rotate${Vl[d]}`,a,u,this.animationValues),Fl(`skew${Vl[d]}`,a,u,this.animationValues);a.render();for(const d in u)a.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);a.scheduleRender()}getProjectionStyles(a){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return m2;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Eo(a==null?void 0:a.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const w={};return this.options.layoutId&&(w.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,w.pointerEvents=Eo(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!er(this.latestValues)&&(w.transform=d?d({},""):"none",this.hasProjected=!1),w}const m=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=f2(this.projectionDeltaWithTransform,this.treeScale,m),d&&(u.transform=d(m,u.transform));const{x:S,y:b}=this.projectionDelta;u.transformOrigin=`${S.origin*100}% ${b.origin*100}% 0`,f.animationValues?u.opacity=f===this?(c=(l=m.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:u.opacity=f===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const w in aa){if(m[w]===void 0)continue;const{correct:k,applyTo:h}=aa[w],p=u.transform==="none"?m[w]:k(m[w],f);if(h){const y=h.length;for(let j=0;j<y;j++)u[h[j]]=p}else u[w]=p}return this.options.layoutId&&(u.pointerEvents=f===this?Eo(a==null?void 0:a.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(Df),this.root.sharedNodes.clear()}}}function g2(e){e.updateLayout()}function v2(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:i}=e.options,a=n.source!==e.layout.source;i==="size"?vt(f=>{const m=a?n.measuredBox[f]:n.layoutBox[f],S=lt(m);m.min=r[f].min,m.max=m.min+S}):T0(i,n.layoutBox,r)&&vt(f=>{const m=a?n.measuredBox[f]:n.layoutBox[f],S=lt(r[f]);m.max=m.min+S,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+S)});const l=Ur();ei(l,r,n.layoutBox);const c=Ur();a?ei(c,e.applyTransform(s,!0),n.measuredBox):ei(c,r,n.layoutBox);const u=!C0(l);let d=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:m,layout:S}=f;if(m&&S){const b=ge();ti(b,n.layoutBox,m.layoutBox);const w=ge();ti(w,r,S.layoutBox),N0(b,w)||(d=!0),f.options.layoutRoot&&(e.relativeTarget=w,e.relativeTargetOrigin=b,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function x2(e){Bs&&tr.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function w2(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function j2(e){e.clearSnapshot()}function Df(e){e.clearMeasurements()}function S2(e){e.isLayoutDirty=!1}function k2(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function If(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function b2(e){e.resolveTargetDelta()}function C2(e){e.calcProjection()}function N2(e){e.resetSkewAndRotation()}function A2(e){e.removeLeadSnapshot()}function Of(e,t,n){e.translate=de(t.translate,0,n),e.scale=de(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Vf(e,t,n,r){e.min=de(t.min,n.min,r),e.max=de(t.max,n.max,r)}function P2(e,t,n,r){Vf(e.x,t.x,n.x,r),Vf(e.y,t.y,n.y,r)}function T2(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const E2={duration:.45,ease:[.4,0,.1,1]},Ff=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Bf=Ff("applewebkit/")&&!Ff("chrome/")?Math.round:ot;function zf(e){e.min=Bf(e.min),e.max=Bf(e.max)}function _2(e){zf(e.x),zf(e.y)}function T0(e,t,n){return e==="position"||e==="preserve-aspect"&&!LC(Rf(t),Rf(n),.2)}function R2(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const M2=P0({attachResizeListener:(e,t)=>Ci(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Bl={current:void 0},E0=P0({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Bl.current){const e=new M2({});e.mount(window),e.setOptions({layoutScroll:!0}),Bl.current=e}return Bl.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),L2={pan:{Feature:XC},drag:{Feature:QC,ProjectionNode:E0,MeasureLayout:S0}};function Uf(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,i=r[s];i&&ie.postRender(()=>i(t,Ii(t)))}class D2 extends Wn{mount(){const{current:t}=this.node;t&&(this.unmount=Lk(t,n=>(Uf(this.node,n,"Start"),r=>Uf(this.node,r,"End"))))}unmount(){}}class I2 extends Wn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Di(Ci(this.node.current,"focus",()=>this.onFocus()),Ci(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function $f(e,t,n){const{props:r}=e;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),i=r[s];i&&ie.postRender(()=>i(t,Ii(t)))}class O2 extends Wn{mount(){const{current:t}=this.node;t&&(this.unmount=Vk(t,n=>($f(this.node,n,"Start"),(r,{success:s})=>$f(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const cu=new WeakMap,zl=new WeakMap,V2=e=>{const t=cu.get(e.target);t&&t(e)},F2=e=>{e.forEach(V2)};function B2({root:e,...t}){const n=e||document;zl.has(n)||zl.set(n,{});const r=zl.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(F2,{root:e,...t})),r[s]}function z2(e,t,n){const r=B2(t);return cu.set(e,n),r.observe(e),()=>{cu.delete(e),r.unobserve(e)}}const U2={some:0,all:1};class $2 extends Wn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=t,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:U2[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),m=u?d:f;m&&m(c)};return z2(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(W2(t,n))&&this.startObserver()}unmount(){}}function W2({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const H2={inView:{Feature:$2},tap:{Feature:O2},focus:{Feature:I2},hover:{Feature:D2}},K2={layout:{ProjectionNode:E0,MeasureLayout:S0}},uu={current:null},_0={current:!1};function G2(){if(_0.current=!0,!!vd)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>uu.current=e.matches;e.addListener(t),t()}else uu.current=!1}const Y2=[...t0,Ve,Fn],Q2=e=>Y2.find(e0(e)),Wf=new WeakMap;function X2(e,t,n){for(const r in t){const s=t[r],i=n[r];if(Pe(s))e.addValue(r,s);else if(Pe(i))e.addValue(r,ls(s,{owner:e}));else if(i!==s)if(e.hasValue(r)){const a=e.getValue(r);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=e.getStaticValue(r);e.addValue(r,ls(a!==void 0?a:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Hf=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class J2{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:a},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Hd,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const S=Ht.now();this.renderScheduledAt<S&&(this.renderScheduledAt=S,ie.render(this.render,!1,!0))};const{latestValues:c,renderState:u,onUpdate:d}=a;this.onUpdate=d,this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=Ba(n),this.isVariantNode=cv(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:f,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const S in m){const b=m[S];c[S]!==void 0&&Pe(b)&&b.set(c[S],!1)}}mount(t){this.current=t,Wf.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),_0.current||G2(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:uu.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Wf.delete(this.current),this.projection&&this.projection.unmount(),on(this.notifyUpdate),on(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=gr.has(t),s=n.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&ie.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),i(),a&&a(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in as){const n=as[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ge()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Hf.length;r++){const s=Hf[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,a=t[i];a&&(this.propEventSubscriptions[s]=this.on(s,a))}this.prevMotionValues=X2(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=ls(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){var r;let s=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(r=this.getBaseTargetFromProps(this.props,t))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,t,this.options);return s!=null&&(typeof s=="string"&&(qv(s)||$v(s))?s=parseFloat(s):!Q2(s)&&Fn.test(n)&&(s=Qv(t,n)),this.setBaseTarget(t,Pe(s)?s.get():s)),Pe(s)?s.get():s}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const a=Cd(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);a&&(s=a[t])}if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!Pe(i)?i:this.initialValues[t]!==void 0&&s===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Fd),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class R0 extends J2{constructor(){super(...arguments),this.KeyframeResolver=n0}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Pe(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function q2(e){return window.getComputedStyle(e)}class Z2 extends R0{constructor(){super(...arguments),this.type="html",this.renderInstance=vv}readValueFromInstance(t,n){if(gr.has(n)){const r=Wd(n);return r&&r.default||0}else{const r=q2(t),s=(mv(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return w0(t,n)}build(t,n,r){Pd(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return Rd(t,n,r)}}class eN extends R0{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ge}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(gr.has(n)){const r=Wd(n);return r&&r.default||0}return n=xv.has(n)?n:Sd(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return Sv(t,n,r)}build(t,n,r){Td(t,n,this.isSVGTag,r.transformTemplate)}renderInstance(t,n,r,s){wv(t,n,r,s)}mount(t){this.isSVGTag=_d(t.tagName),super.mount(t)}}const tN=(e,t)=>bd(e)?new eN(t):new Z2(t,{allowProjection:e!==g.Fragment}),nN=Ak({...CC,...H2,...L2,...K2},tN),B=US(nN);function pa(e){const t=_i(()=>ls(e)),{isStatic:n}=g.useContext(Ri);if(n){const[,r]=g.useState(e);g.useEffect(()=>t.on("change",r),[])}return t}function M0(e,t){const n=pa(t()),r=()=>n.set(t());return r(),Oa(()=>{const s=()=>ie.preRender(r,!1,!0),i=e.map(a=>a.on("change",s));return()=>{i.forEach(a=>a()),on(r)}}),n}function Kf(e){return typeof e=="number"?e:parseFloat(e)}function Gf(e,t={}){const{isStatic:n}=g.useContext(Ri),r=g.useRef(null),s=pa(Pe(e)?Kf(e.get()):e),i=g.useRef(s.get()),a=g.useRef(()=>{}),l=()=>{const u=r.current;u&&u.time===0&&u.sample(Ne.delta),c(),r.current=qb({keyframes:[s.get(),i.current],velocity:s.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...t,onUpdate:a.current})},c=()=>{r.current&&r.current.stop()};return g.useInsertionEffect(()=>s.attach((u,d)=>n?d(u):(i.current=u,a.current=d,ie.update(l),s.get()),c),[JSON.stringify(t)]),Oa(()=>{if(Pe(e))return e.on("change",u=>s.set(Kf(u)))},[s]),s}const rN=e=>e&&typeof e=="object"&&e.mix,sN=e=>rN(e)?e.mix:void 0;function iN(...e){const t=!Array.isArray(e[0]),n=t?0:-1,r=e[0+n],s=e[1+n],i=e[2+n],a=e[3+n],l=c0(s,i,{mixer:sN(i[0]),...a});return t?l(r):l}function oN(e){Js.current=[],e();const t=M0(Js.current,e);return Js.current=void 0,t}function po(e,t,n,r){if(typeof e=="function")return oN(e);const s=typeof t=="function"?t:iN(t,n,r);return Array.isArray(e)?Yf(e,s):Yf([e],([i])=>s(i))}function Yf(e,t){const n=_i(()=>[]);return M0(e,()=>{n.length=0;const r=e.length;for(let s=0;s<r;s++)n[s]=e[s].get();return t(n)})}/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),L0=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:a,...l},c)=>g.createElement("svg",{ref:c,...lN,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:L0("lucide",s),...l},[...a.map(([u,d])=>g.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=(e,t)=>{const n=g.forwardRef(({className:r,...s},i)=>g.createElement(cN,{ref:i,iconNode:t,className:L0(`lucide-${aN(e)}`,r),...s}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=Y("AlignLeft",[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qf=Y("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=Y("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=Y("BookUser",[["path",{d:"M15 13a3 3 0 1 0-6 0",key:"10j68g"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=Y("BookmarkPlus",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}],["line",{x1:"12",x2:"12",y1:"7",y2:"13",key:"1cppfj"}],["line",{x1:"15",x2:"9",y1:"10",y2:"10",key:"1gty7f"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=Y("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=Y("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xf=Y("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=Y("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=Y("ClipboardCopy",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M8 4H6a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2",key:"4jdomd"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v4",key:"3hqy98"}],["path",{d:"M21 14H11",key:"1bme5i"}],["path",{d:"m15 10-4 4 4 4",key:"5dvupr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=Y("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const du=Y("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=Y("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=Y("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=Y("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=Y("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jf=Y("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=Y("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=Y("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=Y("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qf=Y("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=Y("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=Y("PenTool",[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=Y("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=Y("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=Y("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hu=Y("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ni=Y("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=Y("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=Y("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=Y("ThumbsUp",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=Y("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=Y("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=Y("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=Y("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=Y("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=Y("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=Y("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=Y("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function fo({icon:e,title:t,description:n,delay:r=0,children:s}){return o.jsxs(B.div,{className:"glass-card feature-card",style:{backdropFilter:"blur(18px)"},initial:{opacity:0,y:24},whileInView:{opacity:1,y:0},whileHover:{y:-6,scale:1.02},viewport:{once:!0,amount:.4},transition:{duration:.45,delay:r},children:[o.jsx("div",{className:"feature-card__icon","aria-hidden":!0,children:e}),o.jsx("h3",{children:t}),o.jsx("p",{children:n}),s]})}const Es={hidden:{opacity:0,y:32},visible:{opacity:1,y:0}},Zf={initial:{opacity:.35,scale:.9},animate:{opacity:.75,scale:1.08}},em={duration:6,repeat:1/0,repeatType:"reverse",ease:"easeInOut"},MN=[{title:"Imagine",description:"Start with a spark and a scene."},{title:"Create",description:"Draft with AI and keep control."},{title:"Polish",description:"Tighten voice, pacing, and flow."}],LN=[{q:"Do you store my API keys?",a:"No. Keys remain in your browser."},{q:"Can I add my own endpoint?",a:"Yes. Create a custom provider in settings."},{q:"How long can a story be?",a:"From flash pieces to full chapters."}],DN=[{label:"Solarpunk Mystery",description:"A detective uncovers sabotage inside a climate-positive arcade of gardens."},{label:"Romantic Heist",description:"Two thieves fall for each other during a memory heist in a neon city."},{label:"Mythic Horror",description:"A folklorist excavates sleeping gods beneath a lighthouse town."}],IN=[{label:"Draft in Studio",to:"/studio",icon:o.jsx(bN,{size:18})},{label:"Browse Library",to:"/stories",icon:o.jsx(gN,{size:18})}],ON=[{title:"Command palette",badge:"New",description:"Open the global palette with Cmd/Ctrl+K to jump anywhere or toggle debug tools.",bullets:["Navigate without leaving the keyboard","Toggle the debug console instantly"],cta:{label:"Try it",to:"/studio"}},{title:"Onboarding checklist",badge:"Guide",description:"Stay on track with draft, publish, and feedback milestones right inside the Studio sidebar.",bullets:["Track progress automatically","Celebrate each completed milestone"],cta:{label:"See checklist",to:"/studio"}},{title:"Cinematic covers",badge:"Gallery",description:"Generate multi-style cover art or upload your own and curate a gallery for every story.",bullets:["Three AI-inspired style presets","Instant gallery with thumbnail selector"],cta:{label:"Build covers",to:"/studio"}},{title:"Audio previews",badge:"Listen",description:"Let readers sample your prose with one-click text-to-speech snippets on every story.",bullets:["Web speech integration","Toggle playback right from the story"],cta:{label:"Hear a sample",to:"/stories"}}];function VN(){const e=pa(0),t=pa(0),n=Gf(e,{stiffness:60,damping:12}),r=Gf(t,{stiffness:60,damping:12}),s=po(n,d=>d*-24),i=po(r,d=>d*-12),a=po(n,d=>d*24),l=po(r,d=>d*12),c=d=>{const f=d.currentTarget.getBoundingClientRect(),m=((d.clientX-f.left)/f.width-.5)*2,S=((d.clientY-f.top)/f.height-.5)*2;e.set(m),t.set(S)},u=()=>{e.set(0),t.set(0)};return o.jsxs("div",{className:"landing",children:[o.jsxs("section",{className:"hero",onMouseMove:c,onMouseLeave:u,children:[o.jsxs(B.div,{className:"hero__background",initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:.1},children:[o.jsx(B.span,{className:"hero__aurora",initial:{opacity:0},animate:{opacity:.9},transition:{duration:1}}),o.jsx(B.span,{className:"hero__orb hero__orb--left",style:{x:s,y:i},variants:Zf,initial:"initial",animate:"animate",transition:{...em,duration:8}}),o.jsx(B.span,{className:"hero__orb hero__orb--right",style:{x:a,y:l},variants:Zf,initial:"initial",animate:"animate",transition:{...em,duration:7.5,delay:.4}}),o.jsx(B.span,{className:"hero__grid",initial:{opacity:0,y:40},animate:{opacity:.4,y:0},transition:{duration:1,delay:.32}})]}),o.jsxs(B.div,{className:"hero__eyebrow",variants:Es,initial:"hidden",animate:"visible",transition:{delay:.1,duration:.4},children:[o.jsx(ni,{size:16})," Story tools for every author"]}),o.jsx(B.h1,{className:"hero__heading",variants:Es,initial:"hidden",animate:"visible",transition:{delay:.18,duration:.55},children:"Write unforgettable stories with AI at your side"}),o.jsx(B.p,{className:"hero__description",variants:Es,initial:"hidden",animate:"visible",transition:{delay:.26,duration:.55},children:"Dreamscribe blends narrative craft with orchestrated AI collaborators. Generate fresh drafts, invite critical feedback, and sculpt prose line by line  all in a single cinematic workspace."}),o.jsxs(B.div,{className:"hero__cta",variants:Es,initial:"hidden",animate:"visible",transition:{delay:.32,duration:.45},children:[o.jsxs(Be,{to:"/signup",className:"primary-button",children:["Start for free ",o.jsx(fa,{size:18})]}),o.jsx(Be,{to:"/studio",className:"ghost-button",children:"Enter the studio"})]}),o.jsxs(B.div,{className:"hero__metrics",initial:"hidden",animate:"visible",variants:Es,transition:{delay:.38,duration:.45},children:[o.jsxs("div",{className:"metric-chip",children:[o.jsx("h3",{children:"40+"}),o.jsx("p",{children:"Genre presets tuned with narrative prompts"})]}),o.jsxs("div",{className:"metric-chip",children:[o.jsx("h3",{children:"Multimodel"}),o.jsx("p",{children:"Blend OpenAI, Anthropic, Gemini, and DeepSeek"})]}),o.jsxs("div",{className:"metric-chip",children:[o.jsx("h3",{children:"Debug first"}),o.jsx("p",{children:"See prompts, tokens, and timing for runs"})]})]})]}),o.jsx("section",{className:"get-started-shell",children:o.jsxs("div",{className:"get-started__billboard",children:[o.jsxs("div",{className:"get-started__intro",children:[o.jsx("span",{className:"get-started__eyebrow",children:"Quick start"}),o.jsx("h2",{children:"Jump into the studio with a ready-made prompt"}),o.jsx("p",{children:"Choose a vibe, paste it into the Studio, and generate your first draft in under a minute."}),o.jsx("div",{className:"get-started__cta",children:IN.map(d=>o.jsxs(Be,{to:d.to,className:"primary-button",children:[d.icon,d.label]},d.label))})]}),o.jsxs("div",{className:"get-started__prompts",children:[DN.map(d=>o.jsxs("button",{type:"button",className:"prompt-chip",onClick:()=>navigator.clipboard.writeText(d.description).catch(()=>{}),children:[o.jsx("strong",{children:d.label}),o.jsx("span",{children:d.description})]},d.label)),o.jsx("p",{className:"get-started__hint",children:"Click to copy a prompt. Paste it into the Studio to try it out."})]})]})}),o.jsxs("section",{className:"section-shell innovation-lab",children:[o.jsx(B.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.4},transition:{duration:.45},children:"Fresh upgrades in Dreamscribe"}),o.jsx("p",{className:"section-subtitle",children:"These launch-ready tools make the writing loop faster and more fun."}),o.jsx("div",{className:"innovation-grid",children:ON.map((d,f)=>o.jsxs(B.article,{className:"innovation-card",initial:{opacity:0,y:24},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.3},transition:{duration:.4,delay:f*.06},children:[o.jsxs("header",{children:[o.jsx("span",{className:"innovation-badge",children:d.badge}),o.jsx("h3",{children:d.title})]}),o.jsx("p",{children:d.description}),o.jsx("ul",{className:"innovation-list",children:d.bullets.map(m=>o.jsx("li",{children:m},m))}),o.jsx("footer",{children:o.jsxs(Be,{to:d.cta.to,className:"primary-button",children:[d.cta.label," ",o.jsx(fa,{size:16})]})})]},d.title))})]}),o.jsxs("section",{className:"section-shell",id:"features",children:[o.jsx(B.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.4},transition:{delay:.1,duration:.45},children:"A studio where every draft has backup"}),o.jsx("p",{className:"section-subtitle",children:"Fast, clear, and playful. You stay in charge."}),o.jsxs("div",{className:"card-grid",children:[o.jsx(fo,{icon:o.jsx(pu,{size:24}),title:"Intent aware drafting",description:"Set tone, pace, and POV. We turn intent into prompts.",children:o.jsxs("ul",{className:"feature-list",children:[o.jsx("li",{children:"Outline to prose pipelines"}),o.jsx("li",{children:"Snapshot checkpoints for branches"}),o.jsx("li",{children:"Scene level beat guidance"})]})}),o.jsx(fo,{icon:o.jsx(jN,{size:24}),title:"Feedback that coaches",description:"Ask for critiques on dialogue, worldbuilding, or narrative tension. Models respond with practical edits.",delay:.08,children:o.jsxs("ul",{className:"feature-list",children:[o.jsx("li",{children:"Grammar + style aligned to your genre"}),o.jsx("li",{children:"Highlight problem sentences automatically"}),o.jsx("li",{children:"Rewrite suggestions you can accept inline"})]})}),o.jsx(fo,{icon:o.jsx(pN,{size:24}),title:"Deep debugging",description:"Track prompts, tokens, and latency to tune your runs.",delay:.16,children:o.jsxs("ul",{className:"feature-list",children:[o.jsx("li",{children:"Structured log timeline"}),o.jsx("li",{children:"Prompt diffing between revisions"}),o.jsx("li",{children:"Abort + retry with one keystroke"})]})}),o.jsx(fo,{icon:o.jsx(wN,{size:24}),title:"Publish ready exports",description:"Export to markdown or TXT, copy fast, and sync to apps.",delay:.24,children:o.jsxs("ul",{className:"feature-list",children:[o.jsx("li",{children:"Built in style sheets for ereaders"}),o.jsx("li",{children:"Chapter bundling with auto table of contents"}),o.jsx("li",{children:"Version history with restore"})]})})]})]}),o.jsxs("section",{className:"section-shell",id:"workflow",children:[o.jsx(B.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.4},transition:{duration:.45},children:"Your writing flow, amplified"}),o.jsx("div",{className:"workflow-grid",children:MN.map((d,f)=>o.jsxs(B.div,{className:"workflow-step glass-card",initial:{opacity:0,y:28},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.4},transition:{duration:.4,delay:f*.08},children:[o.jsxs("span",{className:"workflow-step__index",children:["0",f+1]}),o.jsx("h3",{children:d.title}),o.jsx("p",{children:d.description})]},d.title))})]}),o.jsxs("section",{className:"section-shell",id:"pricing",children:[o.jsx(B.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.4},transition:{duration:.45},children:"Pricing that respects your stack"}),o.jsxs("div",{className:"pricing-grid",children:[o.jsxs(B.div,{className:"pricing-card glass-card",initial:{opacity:0,y:24},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.4},transition:{duration:.45,delay:.04},children:[o.jsx("h3",{children:"Creator"}),o.jsx("p",{className:"pricing-card__price",children:"Free"}),o.jsxs("ul",{children:[o.jsx("li",{children:"Bring your own API keys"}),o.jsx("li",{children:"Unlimited drafts & branches"}),o.jsx("li",{children:"Feedback coach + grammar passes"})]}),o.jsx(Be,{to:"/signup",className:"primary-button",children:"Start writing"})]}),o.jsxs(B.div,{className:"pricing-card glass-card pricing-card--accent",initial:{opacity:0,y:32},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.4},transition:{duration:.45,delay:.12},children:[o.jsx("h3",{children:"Studios"}),o.jsx("p",{className:"pricing-card__price",children:"$12 / seat"}),o.jsxs("ul",{children:[o.jsx("li",{children:"Team prompt library"}),o.jsx("li",{children:"Shared debug timeline"}),o.jsx("li",{children:"Anthology export + brand kit"})]}),o.jsx("button",{type:"button",className:"ghost-button",children:"Talk to us"})]})]})]}),o.jsxs("section",{className:"section-shell",id:"faq",children:[o.jsx(B.h2,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.4},transition:{duration:.45},children:"Answers for curious creators"}),o.jsx("div",{className:"faq-grid",children:LN.map((d,f)=>o.jsxs(B.div,{className:"faq-item glass-card",initial:{opacity:0,y:24},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.4},transition:{duration:.45,delay:f*.08},children:[o.jsx("h3",{children:d.q}),o.jsx("p",{children:d.a})]},d.q))})]})]})}const FN=new TextEncoder;async function BN(e,t){const n=FN.encode(`${t}:${e}`),r=await crypto.subtle.digest("SHA-256",n);return Array.from(new Uint8Array(r)).map(i=>i.toString(16).padStart(2,"0")).join("")}function xe(e="id"){return typeof crypto<"u"&&typeof crypto.randomUUID=="function"?`${e}_${crypto.randomUUID().replace(/-/g,"").slice(0,12)}`:`${e}_${Math.random().toString(36).slice(2,10)}`}const Qd="sf:blacklist:emails",Xd="sf:blacklist:pwdhashes",tm="dreamscribe_salt",V0=e=>Array.from(new Set(e));function Jd(){try{return JSON.parse(localStorage.getItem(Qd)||"[]")}catch{return[]}}function qd(){try{return JSON.parse(localStorage.getItem(Xd)||"[]")}catch{return[]}}function zN(e){const t=Jd();t.push(e.toLowerCase()),localStorage.setItem(Qd,JSON.stringify(V0(t)))}function UN(e){const t=Jd().filter(n=>n!==e.toLowerCase());localStorage.setItem(Qd,JSON.stringify(t))}function $N(e){const t=qd();t.push(e),localStorage.setItem(Xd,JSON.stringify(V0(t)))}function WN(e){const t=qd().filter(n=>n!==e);localStorage.setItem(Xd,JSON.stringify(t))}function F0(e){return Jd().includes(e.toLowerCase())}function B0(e){const t=HN(e);return qd().includes(t)}function HN(e){try{return btoa(e+tm)}catch{return e+":"+tm}}const z0=g.createContext(null),_s=["masondaking"],Ul=["darnix"],vn="",xn="#7c3aed";async function Rs(e,t){return BN(e,t)}const KN="dreamscribe_salt",Xn=1e3*60*60*24*182;function nm(e){const t=`${e}${KN}`,n=globalThis;return typeof n.btoa=="function"?n.btoa(t):t}const U0="dreamscribe_users",fu="dreamscribe_current_user",$0="dreamscribe_ban_appeals",mt=()=>{try{return JSON.parse(localStorage.getItem(U0)||"{}")}catch{return{}}},yt=e=>{localStorage.setItem(U0,JSON.stringify(e))},GN=()=>{try{const e=localStorage.getItem(fu);return e?JSON.parse(e):null}catch{return null}},Gt=e=>{e?localStorage.setItem(fu,JSON.stringify(e)):localStorage.removeItem(fu)},$l=()=>{try{const e=localStorage.getItem($0);if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch{return[]}},rm=e=>{localStorage.setItem($0,JSON.stringify(e))};function YN({children:e}){const[t,n]=g.useState(null),[r,s]=g.useState(!0);g.useEffect(()=>{let k=!1;return(async()=>{try{const p=mt(),y=async(x,N,A)=>{const P=x,C=N.trim().toLowerCase(),E=await Rs(A,x);p[P]?(_s.includes(x.toLowerCase())&&(p[P].banned=!1,p[P].banReason=void 0,p[P].bannedAt=void 0,p[P].roleId=getDefaultRoleId(x)),p[P].password!==E&&(p[P].password=E),p[P].email=C):p[P]={id:xe("user"),username:x,displayName:x,email:C,password:E,createdAt:new Date().toISOString(),banned:!1,roleId:getDefaultRoleId(x),warnings:[],bio:"",accentColor:xn,avatarEmoji:vn,subscriptions:[]},p[P].warnings=p[P].warnings??[],p[P].bio=p[P].bio??"",p[P].accentColor=p[P].accentColor??xn,p[P].avatarEmoji=p[P].avatarEmoji??vn,p[P].subscriptions=p[P].subscriptions??[],p[P].lastAppealAt=p[P].lastAppealAt??void 0};await Promise.all([y("masondaking","masondaking@dev.local","MasonDev#2025"),y("darnix","darnix@dev.local","DarnixDev#2025")]),yt(p);const j=GN();if(j){const x=Object.values(p).find(N=>N.id===j.id);if(x!=null&&x.banned)Gt(null),k||n(null);else{const N={...j,warnings:(x==null?void 0:x.warnings)??j.warnings??[],bio:(x==null?void 0:x.bio)??j.bio??"",accentColor:(x==null?void 0:x.accentColor)??j.accentColor??xn,avatarEmoji:(x==null?void 0:x.avatarEmoji)??j.avatarEmoji??vn,subscriptions:(x==null?void 0:x.subscriptions)??j.subscriptions??[],isAdmin:Ul.includes(((x==null?void 0:x.username)??j.username).toLowerCase()),bannedAt:(x==null?void 0:x.bannedAt)??j.bannedAt,lastAppealAt:(x==null?void 0:x.lastAppealAt)??j.lastAppealAt,banReason:(x==null?void 0:x.banReason)??j.banReason,banned:(x==null?void 0:x.banned)??j.banned};Gt(N),k||n(N)}}}catch(p){console.error("Failed to initialise auth context",p)}finally{k||s(!1)}})(),()=>{k=!0}},[]);const w={user:t,login:async({email:k,password:h})=>{const p=mt(),y=k.trim().toLowerCase(),j=Object.values(p).find(C=>C.email.toLowerCase()===y);if(F0(y)){const C=j!=null&&j.lastAppealAt?Date.parse(j.lastAppealAt):null,E=j&&C&&Number.isFinite(C)?new Date(C+Xn).toISOString():null,T=j?!C||Date.now()>=(C??0)+Xn:!1,M=new Error("This email is banned");throw M.code="BANNED",M.ban={reason:(j==null?void 0:j.banReason)??"This account is banned",bannedAt:(j==null?void 0:j.bannedAt)??null,lastAppealAt:(j==null?void 0:j.lastAppealAt)??null,nextAppealAt:E,canAppeal:T},M}if(!j)throw new Error("Invalid email or password");if(B0(h)){const C=new Error("This password is banned");throw C.code="BANNED_PASSWORD",C}if(j.banned){const C=j.banReason?`: ${j.banReason}`:"",E=j.lastAppealAt?Date.parse(j.lastAppealAt):null,T=E&&Number.isFinite(E)?new Date(E+Xn).toISOString():null,M=!E||Date.now()>=E+Xn,D=new Error(`This account has been banned${C}`);throw D.code="BANNED",D.ban={reason:j.banReason??null,bannedAt:j.bannedAt??null,lastAppealAt:j.lastAppealAt??null,nextAppealAt:T,canAppeal:M},D}const x=j.username,N=await Rs(h,j.username);let A=p[x];if(!A)throw new Error("Invalid email or password");if(A.password!==N){const C=nm(h);if(A.password===C)A={...A,password:N},p[x]=A,yt(p);else throw new Error("Invalid email or password")}A.warnings=A.warnings??[],A.bio=A.bio??"",A.accentColor=A.accentColor??xn,A.avatarEmoji=A.avatarEmoji??vn,A.subscriptions=A.subscriptions??[],p[x]=A,yt(p);const P={id:A.id,username:A.username,displayName:A.displayName||A.username,email:A.email,isDev:_s.includes(A.username.toLowerCase()),isAdmin:Ul.includes(A.username.toLowerCase()),createdAt:A.createdAt,banned:!!A.banned,banReason:A.banReason,bannedAt:A.bannedAt,lastAppealAt:A.lastAppealAt,roleId:A.roleId??null,warnings:A.warnings??[],bio:A.bio,accentColor:A.accentColor,avatarEmoji:A.avatarEmoji,subscriptions:A.subscriptions};n(P),Gt(P)},signup:async({displayName:k,email:h,password:p})=>{const y=k.trim();if(!y)throw new Error("Display name is required");const j=h.trim().toLowerCase(),x=mt(),N=Object.values(x).find(T=>T.email.toLowerCase()===j);if(N){if(N.banned){const T=N.banReason?`: ${N.banReason}`:"";throw new Error(`Sign up blocked  this email is banned${T}`)}throw new Error("An account with this email already exists")}const A=x[y];if(A&&A.banned){const T=A.banReason?`: ${A.banReason}`:"";throw new Error(`Sign up blocked  this username is banned${T}`)}const C={id:xe("user"),username:y,displayName:y,email:j,password:await Rs(p,y),createdAt:new Date().toISOString(),banned:!1,roleId:"free",warnings:[],bio:"",accentColor:xn,avatarEmoji:vn,subscriptions:[],lastAppealAt:void 0};x[y]=C,yt(x);const E={id:C.id,username:C.username,displayName:C.displayName,email:C.email,isDev:_s.includes(C.username.toLowerCase()),isAdmin:Ul.includes(C.username.toLowerCase()),createdAt:C.createdAt,banned:!1,banReason:void 0,roleId:"free",warnings:[],bio:C.bio,accentColor:C.accentColor,avatarEmoji:C.avatarEmoji,subscriptions:C.subscriptions??[],bannedAt:void 0,lastAppealAt:void 0};n(E),Gt(E)},logout:()=>{n(null),Gt(null)},isAuthenticated:!!t,isLoading:r,getUsers:()=>{const k=mt();return Object.values(k).map(h=>({id:h.id,username:h.username,displayName:h.displayName||h.username,email:h.email,isDev:_s.includes(h.username.toLowerCase()),createdAt:h.createdAt,banned:!!h.banned,banReason:h.banReason,bannedAt:h.bannedAt,lastAppealAt:h.lastAppealAt,roleId:h.roleId??null,warnings:h.warnings??[],bio:h.bio??"",accentColor:h.accentColor??xn,avatarEmoji:h.avatarEmoji??vn,subscriptions:h.subscriptions??[]}))},banUser:(k,h)=>{const p=mt(),y=p[k];if(y){if(_s.includes(y.username.toLowerCase()))return;const j=(h||"").trim();if(!j)return;y.banned=!0,y.banReason=j,y.bannedAt=new Date().toISOString(),p[k]=y,yt(p),t&&t.username===k&&(n(null),Gt(null))}},unbanUser:k=>{const h=mt(),p=h[k];p&&(p.banned=!1,p.banReason=void 0,p.bannedAt=void 0,p.lastAppealAt=void 0,h[k]=p,yt(h))},updateProfile:k=>{const h=t;if(!h)return;const p=mt(),y=p[h.username];if(!y)return;if(k.email&&k.email.toLowerCase()!==y.email.toLowerCase()){if(Object.values(p).some(N=>N.email.toLowerCase()===k.email.toLowerCase()))throw new Error("Email already in use");y.email=k.email}if(k.displayName&&k.displayName.trim()&&k.displayName!==y.displayName&&(y.displayName=k.displayName.trim()),k.bio!==void 0&&(y.bio=k.bio.trim().slice(0,320)),k.accentColor!==void 0){const x=k.accentColor.trim(),N=/^#([0-9a-f]{3}|[0-9a-f]{6})$/i.test(x);y.accentColor=N?x:xn}if(k.avatarEmoji!==void 0){const x=k.avatarEmoji.trim();y.avatarEmoji=x?x.slice(0,4):vn}y.bio=y.bio??"",y.accentColor=y.accentColor??xn,y.avatarEmoji=y.avatarEmoji??vn,p[h.username]=y,yt(p);const j={...h,displayName:y.displayName,email:y.email,bio:y.bio,accentColor:y.accentColor,avatarEmoji:y.avatarEmoji,subscriptions:y.subscriptions??h.subscriptions??[]};n(j),Gt(j)},updatePassword:async({currentPassword:k,newPassword:h})=>{const p=t;if(!p)throw new Error("You must be signed in to update your password");const y=mt(),j=y[p.username];if(!j)throw new Error("Account could not be found");const x=k.trim(),N=h.trim();if(!x)throw new Error("Current password is required");if(N.length<8)throw new Error("New password must be at least 8 characters long");const A=await Rs(x,j.username);if(j.password!==A){const P=nm(x);if(j.password!==P)throw new Error("Current password is incorrect")}j.password=await Rs(N,j.username),y[p.username]=j,yt(y)},submitBanAppeal:({email:k,message:h})=>{const p=k.trim().toLowerCase(),y=h.trim();if(!p)throw new Error("Email is required for an appeal");if(!y)throw new Error("Please share details for your appeal");const j=mt(),x=Object.values(j).find(T=>T.email.toLowerCase()===p);if(!x||!x.banned)throw new Error("No banned account found for this email");const N=x.lastAppealAt?Date.parse(x.lastAppealAt):null;if(N&&Number.isFinite(N)&&Date.now()<N+Xn){const T=new Date(N+Xn).toISOString(),M=new Error("You can send another appeal after the cooldown period");throw M.code="APPEAL_COOLDOWN",M.nextAllowedAt=T,M}const A=new Date,P={id:xe("appeal"),userId:x.id,username:x.username,email:x.email,message:y,submittedAt:A.toISOString(),status:"pending"},C=[P,...$l()].slice(0,300);return rm(C),x.lastAppealAt=P.submittedAt,j[x.username]=x,yt(j),{nextAllowedAt:new Date(A.getTime()+Xn).toISOString()}},getBanAppeals:()=>[...$l()].sort((k,h)=>Date.parse(h.submittedAt||"")-Date.parse(k.submittedAt||"")),resolveBanAppeal:(k,h,p)=>{if(!(t!=null&&t.isDev))return;const y=$l(),j=y.findIndex(P=>P.id===k);if(j===-1)return;const x=y[j];if(x.status!=="pending")return;const N=h==="approve"?"approved":"rejected",A=new Date().toISOString();if(y[j]={...x,status:N,resolvedAt:A,resolvedBy:t.username,resolutionNote:(p==null?void 0:p.trim())||void 0},rm(y),h==="approve"){const P=mt(),C=Object.values(P).find(E=>E.id===x.userId);C&&(C.banned=!1,C.banReason=void 0,C.bannedAt=void 0,P[C.username]=C,yt(P))}},toggleSubscription:k=>{if(!t||!k||k===t.id)return;const h=mt(),p=h[t.username];if(!p)return;const y=p.subscriptions??[],j=y.includes(k)?y.filter(N=>N!==k):[...y,k];p.subscriptions=j,h[t.username]=p,yt(h);const x={...t,subscriptions:j};n(x),Gt(x)},warnUser:(k,h)=>{if(!h.trim())return;const p=mt(),y=p[k];if(!y)return;const j={id:xe("warn"),message:h.trim(),createdAt:new Date().toISOString()};if(y.warnings=[...y.warnings??[],j],p[k]=y,yt(p),t&&t.username===k){const x={...t,warnings:y.warnings};n(x),Gt(x)}}};return o.jsx(z0.Provider,{value:w,children:e})}function Ge(){const e=g.useContext(z0);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e}function QN(){const e=$n(),{signup:t}=Ge(),[n,r]=g.useState({displayName:"",email:"",password:""}),[s,i]=g.useState(null),[a,l]=g.useState(!1),c=async u=>{if(u.preventDefault(),i(null),!n.displayName.trim()){i("Please enter a display name");return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)){i("Enter a valid email address");return}if(n.password.length<8){i("Password must be at least 8 characters");return}if(F0(n.email)){i("This email is banned");return}if(B0(n.password)){i("This password is not allowed");return}try{l(!0),await t(n),e("/studio",{replace:!0})}catch(d){const f=d instanceof Error?d.message:"Something went wrong";i(f)}finally{l(!1)}};return o.jsx("div",{className:"auth-shell",children:o.jsxs(B.section,{className:"auth-card",initial:{opacity:0,y:26},animate:{opacity:1,y:0},transition:{duration:.45},children:[o.jsx("h1",{children:"Create your account"}),o.jsx("p",{children:"Build a free profile to personalize prompts, save drafts, and sync your API keys."}),o.jsxs("form",{className:"auth-form",onSubmit:c,children:[o.jsxs("label",{children:[o.jsx("span",{children:"Display name"}),o.jsx("input",{type:"text",value:n.displayName,onChange:u=>r(d=>({...d,displayName:u.target.value})),placeholder:"Aria the Author",required:!0})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Email"}),o.jsx("input",{type:"email",value:n.email,onChange:u=>r(d=>({...d,email:u.target.value})),placeholder:"you@example.com",required:!0})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Password"}),o.jsx("input",{type:"password",value:n.password,onChange:u=>r(d=>({...d,password:u.target.value})),placeholder:"Create a password",required:!0,minLength:8}),o.jsx("small",{children:"Use at least 8 characters with a mix of letters and numbers."})]}),s&&o.jsx("div",{className:"auth-form__error",children:s}),o.jsx("button",{type:"submit",className:"primary-button auth-form__submit",disabled:a,children:a?"Creating account":"Sign up"})]}),o.jsxs("footer",{children:["Already have an account? ",o.jsx(Be,{to:"/login",children:"Log in"})]})]})})}function XN(){const e=$n(),t=Lt(),{login:n,submitBanAppeal:r}=Ge(),[s,i]=g.useState({email:"",password:""}),[a,l]=g.useState(null),[c,u]=g.useState(null),[d,f]=g.useState(""),[m,S]=g.useState(null),[b,w]=g.useState(!1),[k,h]=g.useState(!1),p=async x=>{var N;x.preventDefault(),l(null),u(null),f(""),S(null);try{h(!0),await n(s);const A=t.state;e(((N=A==null?void 0:A.from)==null?void 0:N.pathname)??"/studio",{replace:!0})}catch(A){const P=A instanceof Error?A.message:"Unable to sign in";if(A instanceof Error&&A.code==="BANNED"){const C=A.ban??{};u({reason:(C==null?void 0:C.reason)??null,bannedAt:(C==null?void 0:C.bannedAt)??null,lastAppealAt:(C==null?void 0:C.lastAppealAt)??null,nextAppealAt:(C==null?void 0:C.nextAppealAt)??null,canAppeal:!!(C!=null&&C.canAppeal)})}l(P)}finally{h(!1)}},y=async()=>{if(c!=null&&c.canAppeal){if(!d.trim()){S({type:"error",text:"Please include details so the dev team can review your appeal."});return}try{w(!0),S(null);const x=r({email:s.email,message:d});S({type:"success",text:"Appeal submitted. A developer will review it soon."}),f(""),u(N=>N&&{...N,canAppeal:!1,lastAppealAt:new Date().toISOString(),nextAppealAt:x.nextAllowedAt})}catch(x){if(x instanceof Error){if(x.code==="APPEAL_COOLDOWN"){const A=x.nextAllowedAt??null;u(P=>P?{...P,canAppeal:!1,nextAppealAt:A??P.nextAppealAt}:{reason:null,bannedAt:null,lastAppealAt:null,nextAppealAt:A,canAppeal:!1})}S({type:"error",text:x.message})}else S({type:"error",text:"Unable to submit appeal right now"})}finally{w(!1)}}},j=x=>{if(!x)return null;try{return new Date(x).toLocaleString()}catch{return null}};return o.jsx("div",{className:"auth-shell",children:o.jsxs(B.section,{className:"auth-card",initial:{opacity:0,y:26},animate:{opacity:1,y:0},transition:{duration:.45},children:[o.jsx("h1",{children:"Welcome back"}),o.jsx("p",{children:"Continue the stories you started, or spin up a fresh narrative."}),o.jsxs("form",{className:"auth-form",onSubmit:p,children:[o.jsxs("label",{children:[o.jsx("span",{children:"Email"}),o.jsx("input",{type:"email",value:s.email,onChange:x=>i(N=>({...N,email:x.target.value})),placeholder:"you@example.com",required:!0})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Password"}),o.jsx("input",{type:"password",value:s.password,onChange:x=>i(N=>({...N,password:x.target.value})),placeholder:"Your password",required:!0})]}),a&&o.jsx("div",{className:"auth-form__error",children:a}),o.jsx("button",{type:"submit",className:"primary-button auth-form__submit",disabled:k,children:k?"Signing in...":"Log in"})]}),c&&o.jsxs("div",{className:"auth-appeal",children:[o.jsx("h2",{children:"Request a review"}),o.jsxs("p",{children:["Your account is currently banned",c.reason?` for "${c.reason}"`:"",".",c.bannedAt&&o.jsxs(o.Fragment,{children:[" ","This action was recorded on ",o.jsx("strong",{children:j(c.bannedAt)}),"."]})]}),c.canAppeal?o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"notice--muted",children:"You may submit one appeal every six months. Share context so a developer knows what changed."}),o.jsxs("label",{className:"auth-appeal__input",children:[o.jsx("span",{children:"Appeal message"}),o.jsx("textarea",{rows:3,value:d,onChange:x=>f(x.target.value),placeholder:"Explain what happened and why the ban should be reconsidered."})]}),o.jsx("div",{className:"auth-appeal__actions",children:o.jsx("button",{type:"button",className:"ghost-button",onClick:y,disabled:b,children:b?"Submitting...":"Submit appeal"})})]}):o.jsxs("p",{className:"notice--muted",children:["You recently submitted an appeal. You can try again after "," ",o.jsx("strong",{children:j(c.nextAppealAt)}),"."]}),m&&o.jsx("div",{className:`notice notice--${m.type==="error"?"error":"success"}`,children:m.text})]}),o.jsxs("footer",{children:["New to Dreamscribe? ",o.jsx(Be,{to:"/signup",children:"Create an account"})]})]})})}const sm={short:"Short (flash, about 800 words)",medium:"Medium (about 2k words)",long:"Long (3k+ words)"};function JN({metadata:e,onChange:t}){const n=l=>{const{name:c,value:u}=l.target;t({...e,[c]:u})},r=l=>t({...e,targetLength:l}),s=["Witty","Eerie","Lyrical","Moody","Optimistic"],i=l=>{const c=e.tone.split(",").map(u=>u.trim()).filter(Boolean);if(!c.includes(l)){const u=c.length?`${e.tone.trim()}, ${l}`:l;t({...e,tone:u})}},a=l=>l==="short"?"~900":l==="medium"?"~1500":"~2200";return o.jsxs("div",{className:"studio-panel",children:[o.jsx("header",{className:"studio-panel__header",children:o.jsxs("div",{children:[o.jsx("h3",{children:"Story profile"}),o.jsx("p",{children:"Shape the vibe, perspective, and pacing before you generate."})]})}),o.jsxs("div",{className:"studio-form-grid",children:[o.jsxs("label",{children:[o.jsx("span",{children:"Title"}),o.jsx("input",{name:"title",value:e.title,onChange:n,placeholder:"The Clockwork Garden"}),o.jsx("small",{children:"Give your draft a memorable working title."})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Genre"}),o.jsx("input",{name:"genre",value:e.genre,onChange:n,placeholder:"Solarpunk mystery"}),o.jsx("small",{children:"e.g., Cozy fantasy, Near-future sci-fi, Gothic romance"})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Tone"}),o.jsx("input",{name:"tone",value:e.tone,onChange:n,placeholder:"Warm, hopeful, poetic"}),o.jsx("div",{className:"chip-group",style:{marginTop:6},children:s.map(l=>o.jsx("button",{type:"button",className:"chip",onClick:()=>i(l),children:l},l))})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Perspective"}),o.jsx("input",{name:"perspective",value:e.perspective,onChange:n,placeholder:"First person"}),o.jsx("small",{children:"Examples: First person, Close third, Omniscient"})]}),o.jsxs("div",{children:[o.jsx("span",{children:"Target length"}),o.jsx("div",{className:"chip-group",style:{marginTop:6},children:Object.keys(sm).map(l=>o.jsx("button",{type:"button",className:e.targetLength===l?"chip chip--active":"chip",onClick:()=>r(l),children:sm[l].split(" (")[0]},l))}),o.jsxs("div",{style:{display:"grid",gap:6,marginTop:8},children:[o.jsxs("label",{children:[o.jsx("span",{children:"Custom tokens (optional)"}),o.jsx("input",{type:"number",min:1,step:1,name:"targetTokens",value:Number.isFinite(e.targetTokens)?String(e.targetTokens):"",onChange:l=>{const c=l.target.value,u=c===""?void 0:Math.max(1,Math.floor(Number(c))||0);t({...e,targetTokens:u})},placeholder:"e.g. 5000"})]}),o.jsx("small",{children:e.targetTokens&&e.targetTokens>0?`Using custom budget: ${e.targetTokens} tokens`:`Token budget hint: ${a(e.targetLength)} tokens`})]})]})]})]})}function qN(e){return e.split(",").map(t=>t.trim()).filter(Boolean).map(t=>t.startsWith("#")?t:`#${t.replace(/^#+/,"")}`)}function ZN({currentPrompt:e,metadata:t,selectedModel:n,recipes:r,onSaveRecipe:s,onApplyRecipe:i,onRemixRecipe:a,onDeleteRecipe:l,onShareRecipe:c}){const[u,d]=g.useState(""),[f,m]=g.useState(t.tone),[S,b]=g.useState(()=>{switch(t.targetLength){case"short":return"Keep momentum punchy and end on a strong image.";case"medium":return"Balance rising tension with reflective beats.";case"long":return"Layer subplots and allow quieter character moments.";default:return""}}),[w,k]=g.useState(n??""),[h,p]=g.useState(""),[y,j]=g.useState(null),[x,N]=g.useState("muted"),A=e.trim().length===0,P=A||!u.trim(),C=g.useMemo(()=>[...r].sort((T,M)=>new Date(M.updatedAt).getTime()-new Date(T.updatedAt).getTime()),[r]),E=T=>{if(T.preventDefault(),A){N("error"),j("Write or paste a prompt before saving it to the palette.");return}const M=u.trim();if(!M){N("error"),j("Name your recipe so you can find it again later.");return}const D={title:M,prompt:e,toneNotes:f.trim()||void 0,pacingNotes:S.trim()||void 0,bestModel:w.trim()||void 0,tags:qN(h)};s(D),d(""),m(t.tone),b(""),k(n??""),p(""),N("muted"),j(`Saved "${M}" to your palette.`)};return o.jsxs("div",{className:"studio-panel",children:[o.jsx("header",{className:"studio-panel__header",children:o.jsxs("div",{children:[o.jsx("h3",{children:"Prompt palette"}),o.jsx("p",{children:"Save, remix, and resurface your strongest setups."})]})}),o.jsxs("form",{className:"prompt-palette__form",onSubmit:E,children:[o.jsxs("label",{children:[o.jsx("span",{children:"Recipe name"}),o.jsx("input",{value:u,placeholder:"Oceanic heist inciting prompt",onChange:T=>d(T.target.value)})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Tone notes"}),o.jsx("input",{value:f,placeholder:"Gritty, neon-lit, but hopeful underneath",onChange:T=>m(T.target.value)})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Pacing notes"}),o.jsx("textarea",{rows:2,value:S,placeholder:"Open with a sharp hook, escalate in two beats, breathe before the midpoint twist.",onChange:T=>b(T.target.value)})]}),o.jsxs("div",{className:"prompt-palette__meta",children:[o.jsxs("label",{children:[o.jsx("span",{children:"Best-fit model"}),o.jsx("input",{value:w,placeholder:"e.g. gpt-4o-mini",onChange:T=>k(T.target.value)})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Signals / tags"}),o.jsx("input",{value:h,placeholder:"#noir, #character-driven",onChange:T=>p(T.target.value)})]})]}),y&&o.jsx("div",{className:`notice ${x==="error"?"notice--error":"notice--muted"}`,children:y}),o.jsxs("button",{type:"submit",className:"primary-button",disabled:P,children:[o.jsx(hN,{size:16})," Save recipe"]})]}),o.jsx("hr",{className:"prompt-palette__divider"}),o.jsx("div",{className:"prompt-palette__list",children:C.length===0?o.jsx("p",{className:"studio-output__placeholder",children:"Save your current prompt to build a reusable palette of openers and tonal guides."}):C.map(T=>{var M;return o.jsxs("article",{className:"prompt-recipe-card",children:[o.jsxs("header",{children:[o.jsxs("div",{children:[o.jsx("h4",{children:T.title}),o.jsxs("div",{className:"prompt-recipe-card__meta",children:[T.bestModel&&o.jsxs("span",{children:["Model: ",T.bestModel]}),(M=T.tags)!=null&&M.length?o.jsx("span",{children:T.tags.join(" ")}):null]})]}),o.jsx("time",{children:new Date(T.updatedAt).toLocaleDateString()})]}),o.jsxs("p",{className:"prompt-recipe-card__notes",children:[T.toneNotes&&o.jsxs("span",{children:[o.jsx("strong",{children:"Tone:"})," ",T.toneNotes]}),T.pacingNotes&&o.jsxs("span",{children:[o.jsx("strong",{children:"Pacing:"})," ",T.pacingNotes]})]}),o.jsx("pre",{className:"prompt-recipe-card__prompt",children:T.prompt}),o.jsxs("div",{className:"prompt-recipe-card__actions",children:[o.jsxs("button",{type:"button",className:"ghost-button",onClick:()=>{i(T),N("muted"),j(`Loaded "${T.title}" into the editor.`)},children:[o.jsx(ni,{size:16})," Use"]}),o.jsxs("button",{type:"button",className:"ghost-button",onClick:()=>{a(T),N("muted"),j(`Remixed a fresh variant of "${T.title}".`)},children:[o.jsx(CN,{size:16})," Remix"]}),o.jsxs("button",{type:"button",className:"ghost-button",onClick:async()=>{try{await c(T),N("muted"),j("Copied a sharable prompt bundle to your clipboard.")}catch(D){console.error(D),N("error"),j("Unable to copy the recipe. Check clipboard permissions and try again.")}},children:[o.jsx(du,{size:16})," Share"]}),o.jsxs("button",{type:"button",className:"ghost-button ghost-button--danger",onClick:()=>{l(T.id),N("muted"),j(`Removed "${T.title}" from your palette.`)},children:[o.jsx(Oi,{size:16})," Delete"]})]})]},T.id)})})]})}const mo=3;function mu(e){return e?e.split(new RegExp("(?<=[.!?])\\s+")).map(t=>t.trim()).filter(Boolean):[]}function eA(e,t){const n=mu(e),r=mu(t);if(!n.length||!r.length)return{uniqueSentences:r.slice(0,3),overlapScore:0};const s=new Set(n.map(l=>l.toLowerCase())),i=r.filter(l=>!s.has(l.toLowerCase())),a=1-i.length/Math.max(r.length,1);return{uniqueSentences:i.slice(0,3),overlapScore:a}}function tA({metadata:e,providers:t,modelSelections:n,apiKeys:r,selectedProviderId:s,selectedModel:i,experiments:a,workingExperiment:l,onRun:c,onMarkWinner:u,onAdopt:d,error:f,isRunning:m}){const[S,b]=g.useState(()=>[{providerId:s,model:i}]),[w,k]=g.useState(null),h=g.useMemo(()=>new Map(t.map(C=>[C.id,C])),[t]),p=g.useMemo(()=>{if(e.targetTokens&&e.targetTokens>0)return e.targetTokens;switch(e.targetLength){case"short":return 900;case"medium":return 1500;case"long":return 2200;default:return 1400}},[e]);g.useEffect(()=>{b(C=>C.find(T=>T.providerId===s)?C.map(T=>T.providerId===s?{providerId:s,model:i}:T):[{providerId:s,model:i},...C].slice(0,mo))},[s,i]);const y=g.useMemo(()=>[{id:"openai-anthropic",label:"OpenAI vs Anthropic",providers:["openai","anthropic"]},{id:"openai-gemini",label:"OpenAI vs Gemini",providers:["openai","gemini"]},{id:"openai-deepseek",label:"OpenAI vs DeepSeek",providers:["openai","deepseek"]},{id:"anthropic-gemini",label:"Anthropic vs Gemini",providers:["anthropic","gemini"]}].filter(E=>E.providers.every(T=>h.has(T))),[h]),j=C=>{k(null),b(C.slice(0,mo).map(E=>{const T=h.get(E),M=n[E]??(T==null?void 0:T.defaultModel)??"";return{providerId:E,model:M}}))},x=C=>{b(E=>{if(E.find($=>$.providerId===C))return E.filter($=>$.providerId!==C);if(E.length>=mo)return k(`Pick up to ${mo} providers at once.`),E;const M=t.find($=>$.id===C),D=n[C]??(M==null?void 0:M.defaultModel)??"";return[...E,{providerId:C,model:D}]})},N=(C,E)=>{b(T=>T.map(M=>M.providerId===C?{providerId:C,model:E}:M))},A=async C=>{if(C.preventDefault(),k(null),S.length<2){k("Select at least two providers to compare.");return}await c(S)},P=g.useMemo(()=>l?[l,...a]:a,[l,a]);return o.jsxs("div",{className:"studio-panel",children:[o.jsx("header",{className:"studio-panel__header",children:o.jsxs("div",{children:[o.jsx("h3",{children:"Model A/B explorer"}),o.jsx("p",{children:"Stack providers side by side, then vote on the strongest draft."})]})}),o.jsxs("form",{className:"ab-explorer__form",onSubmit:A,children:[o.jsxs("fieldset",{children:[o.jsx("legend",{children:"Pick competitors"}),o.jsx("div",{className:"ab-explorer__provider-grid",children:t.map(C=>{const E=S.some(M=>M.providerId===C.id),T=!!r[C.id];return o.jsxs("label",{className:E?"ab-provider ab-provider--active":"ab-provider",children:[o.jsx("input",{type:"checkbox",checked:E,onChange:()=>x(C.id)}),o.jsxs("div",{children:[o.jsx("strong",{children:C.label}),o.jsx("small",{children:T?"Key ready":"Missing key"})]})]},C.id)})}),o.jsxs("p",{className:"ab-explorer__hint",children:["Token budget target  ",p]})]}),y.length>0&&o.jsxs("div",{className:"ab-explorer__quick",children:[o.jsx("span",{children:"Quick compare:"}),o.jsx("div",{children:y.map(C=>o.jsx("button",{type:"button",className:"text-button",onClick:()=>j(C.providers),children:C.label},C.id))})]}),o.jsx("div",{className:"ab-explorer__models",children:S.map(C=>{const E=t.find(T=>T.id===C.providerId);return E?o.jsxs("label",{children:[o.jsxs("span",{children:[E.label," model"]}),o.jsx("select",{value:C.model,onChange:T=>N(E.id,T.target.value),children:E.models.map(T=>o.jsx("option",{value:T,children:T},T))})]},E.id):null})}),(w||f)&&o.jsx("div",{className:"notice notice--error",children:w||f}),o.jsx("button",{type:"submit",className:"primary-button",disabled:m,children:m?o.jsxs(o.Fragment,{children:[o.jsx(ma,{className:"spin",size:16})," Comparing"]}):o.jsxs(o.Fragment,{children:[o.jsx(NN,{size:16})," Run comparison"]})})]}),P.length===0?o.jsx("div",{className:"ab-explorer__empty",children:o.jsx("p",{children:"Pick at least two providers and run a comparison to see side-by-side drafts and cost estimates."})}):o.jsx("div",{className:"ab-explorer__experiments",children:P.map(C=>{const E=C.variants.find(D=>D.status==="success"),T=C.winnerId?C.variants.find(D=>D.id===C.winnerId):null,M=(l==null?void 0:l.id)===C.id&&m;return o.jsxs("section",{className:"ab-experiment",children:[o.jsxs("header",{children:[o.jsxs("div",{children:[o.jsxs("h4",{children:["Comparison run  ",new Date(C.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),o.jsx("small",{children:mu(C.prompt).slice(0,1).join(" ")||"Prompt snapshot"})]}),T&&o.jsxs("span",{className:"ab-experiment__winner",children:["Winner: ",T.providerLabel]})]}),o.jsx("div",{className:"ab-experiment__variants",children:C.variants.map(D=>{const $=eA(E==null?void 0:E.content,D.content),Ye=C.winnerId===D.id;return o.jsxs("article",{className:Ye?"ab-variant-card ab-variant-card--winner":"ab-variant-card",children:[o.jsxs("header",{children:[o.jsxs("div",{children:[o.jsxs("strong",{children:[D.providerLabel,"  ",D.model]}),o.jsxs("span",{className:`ab-variant-status ab-variant-status--${D.status}`,children:[D.status==="pending"&&o.jsxs(o.Fragment,{children:[o.jsx(ma,{className:"spin",size:14})," Pending"]}),D.status==="success"&&o.jsxs(o.Fragment,{children:[o.jsx(Xf,{size:14})," Ready"]}),D.status==="error"&&o.jsxs(o.Fragment,{children:[o.jsx(EN,{size:14})," Failed"]})]})]}),o.jsxs("dl",{children:[o.jsxs("div",{children:[o.jsx("dt",{children:"Cost est."}),o.jsxs("dd",{children:["$",D.costEstimate.toFixed(3)]})]}),o.jsxs("div",{children:[o.jsx("dt",{children:"Tokens"}),o.jsx("dd",{children:D.tokensUsed??D.estimatedTokens})]}),typeof D.durationMs=="number"&&o.jsxs("div",{children:[o.jsx("dt",{children:"Latency"}),o.jsxs("dd",{children:[Math.round(D.durationMs)," ms"]})]})]})]}),D.status==="error"?o.jsx("p",{className:"ab-variant-error",children:D.error??"Generation failed."}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"ab-variant-diff",children:[o.jsxs("h5",{children:[o.jsx(fN,{size:14})," Standout beats (",Math.round($.overlapScore*100),"% overlap)"]}),$.uniqueSentences.length?o.jsx("ul",{children:$.uniqueSentences.map((Se,q)=>o.jsx("li",{children:Se},q))}):o.jsx("p",{children:"No major deviations from baseline."})]}),o.jsx("pre",{className:"ab-variant-snippet",children:(D.content??"").slice(0,600)||"Awaiting generation output"})]}),o.jsxs("div",{className:"ab-variant-actions",children:[o.jsxs("button",{type:"button",className:"ghost-button",disabled:D.status!=="success"||M,onClick:()=>u(C.id,D.id),children:[o.jsx(TN,{size:16})," Vote winner"]}),o.jsxs("button",{type:"button",className:"ghost-button",disabled:D.status!=="success",onClick:()=>d(C.id,D.id),children:[o.jsx(Xf,{size:16})," Adopt draft"]})]})]},D.id)})})]},C.id)})})]})}const nA={character:"Character",plot:"Plot thread",world:"World fact"};function rA(e){return e.join(", ")}function im(e){return e.split(",").map(t=>t.trim()).filter(Boolean)}function sA({entries:e,warnings:t,onCreate:n,onUpdate:r,onDelete:s,onQuickAdd:i}){const[a,l]=g.useState("character"),[c,u]=g.useState(""),[d,f]=g.useState(""),[m,S]=g.useState(""),[b,w]=g.useState(null),[k,h]=g.useState(""),[p,y]=g.useState(""),[j,x]=g.useState(""),N=g.useMemo(()=>e.reduce((T,M)=>(T[M.type]=T[M.type]?[...T[M.type],M]:[M],T),{character:[],plot:[],world:[]}),[e]),A=T=>{T.preventDefault(),c.trim()&&(n({type:a,label:c.trim(),summary:d.trim(),traits:im(m)}),u(""),f(""),S(""))},P=T=>{w(T.id),h(T.label),y(T.summary),x(rA(T.traits))},C=T=>{b&&(r(T.id,{type:T.type,label:k.trim()||T.label,summary:p.trim(),traits:im(j)}),w(null),h(""),y(""),x(""))},E=()=>{w(null),h(""),y(""),x("")};return o.jsxs("div",{className:"studio-panel continuity-panel",children:[o.jsx("header",{className:"studio-panel__header",children:o.jsxs("div",{children:[o.jsx("h3",{children:"Continuity coach"}),o.jsx("p",{children:"Track characters, threads, and world details as you draft."})]})}),o.jsxs("form",{className:"continuity-form",onSubmit:A,children:[o.jsxs("label",{children:[o.jsx("span",{children:"Entry type"}),o.jsxs("select",{value:a,onChange:T=>l(T.target.value),children:[o.jsx("option",{value:"character",children:"Character"}),o.jsx("option",{value:"plot",children:"Plot thread"}),o.jsx("option",{value:"world",children:"World fact"})]})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Name / label"}),o.jsx("input",{value:c,onChange:T=>u(T.target.value),placeholder:"e.g. Captain Mara Ives"})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Summary"}),o.jsx("textarea",{rows:3,value:d,onChange:T=>f(T.target.value),placeholder:"Role, motivations, key beats, or world rules."})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Key traits (comma separated)"}),o.jsx("input",{value:m,onChange:T=>S(T.target.value),placeholder:"green eyes, veteran pilot, secret agenda"})]}),o.jsxs("button",{type:"submit",className:"ghost-button",children:[o.jsx(mN,{size:16})," Add to continuity"]})]}),t.length>0&&o.jsx("div",{className:"continuity-warnings",children:t.map(T=>o.jsxs("article",{className:`continuity-warning continuity-warning--${T.severity}`,children:[o.jsx("span",{className:"continuity-warning__icon",children:T.severity==="error"?o.jsx(dN,{size:14}):T.severity==="warn"?o.jsx(Jf,{size:14}):o.jsx(Jf,{size:14})}),o.jsxs("div",{children:[o.jsx("p",{children:T.message}),T.suggestion&&o.jsx("small",{children:T.suggestion}),T.candidate&&o.jsxs("button",{type:"button",className:"ghost-button",onClick:()=>i(T.candidate),children:["Track ",T.candidate.label]})]})]},T.id))}),o.jsx("div",{className:"continuity-groups",children:Object.keys(N).map(T=>o.jsxs("section",{className:"continuity-group",children:[o.jsxs("header",{children:[o.jsx("h4",{children:nA[T]}),o.jsx("span",{children:N[T].length})]}),N[T].length===0?o.jsx("p",{className:"continuity-empty",children:"Nothing tracked yet."}):o.jsx("ul",{children:N[T].map(M=>{const D=b===M.id;return o.jsxs("li",{className:"continuity-entry",children:[o.jsxs("div",{className:"continuity-entry__header",children:[o.jsx("strong",{children:D?o.jsx("input",{value:k,onChange:$=>h($.target.value)}):M.label}),o.jsx("div",{className:"continuity-entry__actions",children:D?o.jsxs(o.Fragment,{children:[o.jsx("button",{type:"button",className:"ghost-button",onClick:()=>C(M),children:"Save"}),o.jsx("button",{type:"button",className:"ghost-button",onClick:E,children:"Cancel"})]}):o.jsxs(o.Fragment,{children:[o.jsxs("button",{type:"button",className:"ghost-button",onClick:()=>P(M),children:[o.jsx(kN,{size:14})," Edit"]}),o.jsxs("button",{type:"button",className:"ghost-button ghost-button--danger",onClick:()=>s(M.id),children:[o.jsx(Oi,{size:14})," Remove"]})]})})]}),o.jsxs("div",{className:"continuity-entry__body",children:[D?o.jsx("textarea",{rows:3,value:p,onChange:$=>y($.target.value)}):o.jsx("p",{children:M.summary||"No summary yet."}),o.jsxs("div",{className:"continuity-entry__traits",children:[o.jsx("span",{children:"Traits"}),D?o.jsx("input",{value:j,onChange:$=>x($.target.value),placeholder:"comma separated traits"}):M.traits.length?o.jsx("ul",{children:M.traits.map($=>o.jsx("li",{children:$},$))}):o.jsx("small",{children:"None listed."})]})]})]},M.id)})})]},T))})]})}function iA({lines:e=6,lineWidth:t="100%"}){const n=Array.from({length:e});return o.jsx("div",{className:"skeleton-lines",children:n.map((r,s)=>o.jsx(g.Fragment,{children:o.jsx("div",{className:"skeleton skeleton-line",style:{width:s===e-1?t:"100%"}})},s))})}const W0="sf:workspace";function yu(e){var t,n,r,s;return{...e,title:((t=e.title)==null?void 0:t.trim())||"Untitled recipe",prompt:e.prompt,toneNotes:((n=e.toneNotes)==null?void 0:n.trim())||void 0,pacingNotes:((r=e.pacingNotes)==null?void 0:r.trim())||void 0,bestModel:((s=e.bestModel)==null?void 0:s.trim())||void 0,tags:Array.isArray(e.tags)?e.tags.filter(Boolean):[],createdAt:e.createdAt??new Date().toISOString(),updatedAt:e.updatedAt??new Date().toISOString()}}function oA(e){return{...e,createdAt:e.createdAt??new Date().toISOString(),prompt:e.prompt??"",summary:e.summary??"",winnerId:e.winnerId??null,variants:(e.variants||[]).map(t=>({...t,status:t.status||"success",costEstimate:Number.isFinite(t.costEstimate)?t.costEstimate:0,estimatedTokens:Number.isFinite(t.estimatedTokens)?t.estimatedTokens:0,createdAt:t.createdAt??e.createdAt??new Date().toISOString()}))}}function gu(e){var t,n;return{...e,label:((t=e.label)==null?void 0:t.trim())||"Untitled",summary:((n=e.summary)==null?void 0:n.trim())||"",traits:Array.isArray(e.traits)?e.traits.filter(Boolean):[],createdAt:e.createdAt??new Date().toISOString(),updatedAt:e.updatedAt??new Date().toISOString()}}function H0(e){return{...e,kind:e.kind??"sensory",response:e.response??"",createdAt:e.createdAt??new Date().toISOString()}}function aA(){var t;const e=localStorage.getItem(W0);if(!e)return{drafts:[],activeDraftId:null,promptRecipes:[]};try{const n=JSON.parse(e),r=(n.drafts||[]).map(i=>{var a;return{...i,summary:i.summary??"",updatedAt:i.updatedAt??i.generatedAt??new Date().toISOString(),feedbackThreads:i.feedbackThreads??[],abExperiments:(i.abExperiments||[]).map(oA),continuity:{entries:(a=i.continuity)!=null&&a.entries?i.continuity.entries.map(gu):[]},sensoryPasses:(i.sensoryPasses||[]).map(H0)}}),s=(n.promptRecipes||[]).map(yu);return{drafts:r,activeDraftId:n.activeDraftId??((t=r[0])==null?void 0:t.id)??null,promptRecipes:s}}catch(n){return console.error("Failed to parse workspace",n),{drafts:[],activeDraftId:null,promptRecipes:[]}}}function gt(e){localStorage.setItem(W0,JSON.stringify(e))}const K0=g.createContext(void 0);function lA(e,t){switch(t.type){case"create":{const n=[t.draft,...e.drafts],r={...e,drafts:n,activeDraftId:t.draft.id};return gt(r),r}case"update":{const n=e.drafts.map(s=>s.id===t.draftId?{...s,...t.patch,updatedAt:new Date().toISOString()}:s),r={...e,drafts:n};return gt(r),r}case"append":{const n=e.drafts.map(s=>s.id===t.draftId?{...s,content:s.content+t.content,generatedAt:t.timestamp??new Date().toISOString(),updatedAt:new Date().toISOString()}:s),r={...e,drafts:n};return gt(r),r}case"feedback":{const n=e.drafts.map(s=>s.id===t.draftId?{...s,feedbackThreads:[t.feedback,...s.feedbackThreads],updatedAt:new Date().toISOString()}:s),r={...e,drafts:n};return gt(r),r}case"select":{const n={...e,activeDraftId:t.draftId};return gt(n),n}case"reset":{const n={...e,drafts:[],activeDraftId:null};return gt(n),n}case"prompt_upsert":{const r=e.promptRecipes.find(i=>i.id===t.recipe.id)?e.promptRecipes.map(i=>i.id===t.recipe.id?t.recipe:i):[t.recipe,...e.promptRecipes],s={...e,promptRecipes:r};return gt(s),s}case"prompt_delete":{const n=e.promptRecipes.filter(s=>s.id!==t.recipeId),r={...e,promptRecipes:n};return gt(r),r}case"continuity_add":{const n=e.drafts.map(s=>{var i;return s.id===t.draftId?{...s,continuity:{entries:[t.entry,...((i=s.continuity)==null?void 0:i.entries)??[]]},updatedAt:new Date().toISOString()}:s}),r={...e,drafts:n};return gt(r),r}case"continuity_update":{const n=e.drafts.map(s=>{var i;return s.id===t.draftId?{...s,continuity:{entries:(((i=s.continuity)==null?void 0:i.entries)??[]).map(a=>a.id===t.entry.id?t.entry:a)},updatedAt:new Date().toISOString()}:s}),r={...e,drafts:n};return gt(r),r}case"continuity_delete":{const n=e.drafts.map(s=>{var i;return s.id===t.draftId?{...s,continuity:{entries:(((i=s.continuity)==null?void 0:i.entries)??[]).filter(a=>a.id!==t.entryId)},updatedAt:new Date().toISOString()}:s}),r={...e,drafts:n};return gt(r),r}case"sensory_pass_add":{const n=e.drafts.map(s=>s.id===t.draftId?{...s,sensoryPasses:[t.pass,...s.sensoryPasses??[]],updatedAt:new Date().toISOString()}:s),r={...e,drafts:n};return gt(r),r}default:return e}}function cA({children:e}){const[t,n]=g.useReducer(lA,void 0,aA),r=g.useCallback(({metadata:h,prompt:p,summary:y})=>{const j={id:xe("draft"),metadata:h,prompt:p,summary:y??"",content:"",feedbackThreads:[],abExperiments:[],continuity:{entries:[]},sensoryPasses:[],generatedAt:void 0,updatedAt:new Date().toISOString()};return n({type:"create",draft:j}),j},[]),s=g.useCallback((h,p)=>{n({type:"update",draftId:h,patch:p})},[]),i=g.useCallback((h,p,y)=>{n({type:"append",draftId:h,content:p,timestamp:y})},[]),a=g.useCallback((h,p)=>{const y={id:xe("fbk"),createdAt:new Date().toISOString(),...p};return n({type:"feedback",draftId:h,feedback:y}),y},[]),l=g.useCallback(h=>{n({type:"select",draftId:h})},[]),c=g.useCallback(()=>{n({type:"reset"})},[]),u=g.useCallback(h=>{const p=new Date().toISOString(),y=yu({id:xe("prompt"),createdAt:p,updatedAt:p,title:h.title,prompt:h.prompt,toneNotes:h.toneNotes,pacingNotes:h.pacingNotes,bestModel:h.bestModel,tags:h.tags});return n({type:"prompt_upsert",recipe:y}),y},[]),d=g.useCallback((h,p)=>{const y=t.promptRecipes.find(N=>N.id===h);if(!y){console.warn(`Attempted to update missing recipe ${h}`);return}const j=new Date().toISOString(),x=yu({...y,title:p.title??y.title,prompt:p.prompt??y.prompt,toneNotes:p.toneNotes??y.toneNotes,pacingNotes:p.pacingNotes??y.pacingNotes,bestModel:p.bestModel??y.bestModel,tags:p.tags??y.tags,createdAt:y.createdAt,updatedAt:j});n({type:"prompt_upsert",recipe:x})},[t.promptRecipes]),f=g.useCallback(h=>{n({type:"prompt_delete",recipeId:h})},[]),m=g.useCallback((h,p)=>{const y=gu({id:xe("continuity"),type:p.type,label:p.label,summary:p.summary,traits:p.traits??[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});return n({type:"continuity_add",draftId:h,entry:y}),y},[]),S=g.useCallback((h,p,y)=>{var A;const j=t.drafts.find(P=>P.id===h);if(!j){console.warn(`Attempted to update continuity on missing draft ${h}`);return}const x=(A=j.continuity)==null?void 0:A.entries.find(P=>P.id===p);if(!x){console.warn(`Attempted to update missing continuity entry ${p}`);return}const N=gu({...x,type:y.type??x.type,label:y.label??x.label,summary:y.summary??x.summary,traits:y.traits??x.traits,createdAt:x.createdAt,updatedAt:new Date().toISOString()});n({type:"continuity_update",draftId:h,entry:N})},[t.drafts]),b=g.useCallback((h,p)=>{n({type:"continuity_delete",draftId:h,entryId:p})},[]),w=g.useCallback((h,p)=>{const y=H0(p);n({type:"sensory_pass_add",draftId:h,pass:y})},[]),k=g.useMemo(()=>{const h=t.activeDraftId?t.drafts.find(p=>p.id===t.activeDraftId)??null:t.drafts[0]??null;return{drafts:t.drafts,activeDraft:h,createDraft:r,updateDraft:s,appendContent:i,addFeedback:a,selectDraft:l,resetWorkspace:c,promptRecipes:t.promptRecipes,createPromptRecipe:u,updatePromptRecipe:d,deletePromptRecipe:f,addContinuityEntry:m,updateContinuityEntry:S,deleteContinuityEntry:b,addSensoryPass:w}},[t,r,s,i,a,l,c,u,d,f,m,S,b,w]);return o.jsx(K0.Provider,{value:k,children:e})}function uA(){const e=g.useContext(K0);if(!e)throw new Error("useWorkspace must be used within WorkspaceProvider");return e}const G0=g.createContext(void 0),om="sf:provider-keys",am="sf:provider-selected",lm="sf:provider-custom",cm="sf:provider-models",um=[{id:"openai",label:"OpenAI",docsUrl:"https://platform.openai.com/docs",models:["gpt-4o-mini","gpt-4o"],defaultModel:"gpt-4o-mini",type:"chat"},{id:"anthropic",label:"Anthropic Claude",docsUrl:"https://docs.anthropic.com",models:["claude-3-5-haiku-latest","claude-3-5-sonnet","claude-3-5-opus","claude-3-opus","claude-3-haiku"],defaultModel:"claude-3-5-haiku-latest",type:"chat"},{id:"gemini",label:"Google Gemini",docsUrl:"https://ai.google.dev/gemini-api/docs",models:["gemini-1.5-flash-001","gemini-1.5-flash","gemini-1.5-flash-8b","gemini-1.5-flash-8b-001","gemini-1.5-pro-001","gemini-1.5-pro","gemini-1.5-pro-exp"],defaultModel:"gemini-1.5-flash-001",type:"chat"},{id:"deepseek",label:"DeepSeek",docsUrl:"https://api-docs.deepseek.com/",models:["deepseek-chat","deepseek-reasoner","deepseek-coder","deepseek-math"],defaultModel:"deepseek-chat",type:"chat"}];function yo(e,t){const n=localStorage.getItem(e);if(!n)return t;try{return JSON.parse(n)}catch(r){return console.error(`Failed to parse ${e}`,r),t}}function dA({children:e}){const[t,n]=g.useState(()=>yo(om,{})),[r,s]=g.useState(()=>yo(lm,[])),[i,a]=g.useState(()=>yo(am,um[0].id)),[l,c]=g.useState(()=>yo(cm,{})),u=g.useMemo(()=>[...um,...r],[r]),d=g.useMemo(()=>u.find(p=>p.id===i)??u[0],[u,i]),f=g.useMemo(()=>{const h=l[d.id];return h&&d.models.includes(h)?h:d.defaultModel},[l,d]),m=g.useCallback((h,p)=>{const y=p.trim();n(j=>{const x={...j};return y?x[h]=y:delete x[h],localStorage.setItem(om,JSON.stringify(x)),x})},[]),S=g.useCallback(h=>{a(h),localStorage.setItem(am,JSON.stringify(h))},[]),b=g.useCallback((h,p)=>{c(y=>{const j={...y,[h]:p};return localStorage.setItem(cm,JSON.stringify(j)),j})},[]),w=g.useCallback(h=>{var y;const p={id:`custom:${xe("prov")}`,label:h.label,models:h.models??["text-generation"],docsUrl:h.docsUrl??"",defaultModel:((y=h.models)==null?void 0:y[0])??"text-generation",type:"chat"};return s(j=>{const x=[...j,p];return localStorage.setItem(lm,JSON.stringify(x)),x}),b(p.id,p.defaultModel),p},[b]),k=g.useMemo(()=>({providers:u,selectedProvider:d,selectedModel:f,apiKeys:t,modelSelections:l,setApiKey:m,selectProvider:S,setModel:b,registerCustomProvider:w}),[u,d,f,t,l,m,S,b,w]);return o.jsx(G0.Provider,{value:k,children:e})}function Y0(){const e=g.useContext(G0);if(!e)throw new Error("useProviderRegistry must be used within ProviderRegistryProvider");return e}const Q0=g.createContext(void 0);function hA(e,t){switch(t.type){case"append":return{entries:[t.entry,...e.entries].slice(0,200)};case"clear":return{entries:[]};default:return e}}function pA({children:e}){const[t,n]=g.useReducer(hA,{entries:[]}),[r,s]=g.useState(!1),i=g.useCallback(u=>{n({type:"append",entry:{id:xe("log"),timestamp:new Date().toISOString(),...u}})},[]),a=g.useCallback(()=>n({type:"clear"}),[]),l=g.useCallback(()=>s(u=>!u),[]);g.useEffect(()=>{const u=d=>{d.altKey&&d.key.toLowerCase()==="d"&&(d.preventDefault(),s(f=>!f))};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[]);const c=g.useMemo(()=>({logs:t.entries,append:i,clear:a,isConsoleOpen:r,toggleConsole:l}),[t.entries,i,a,r,l]);return o.jsx(Q0.Provider,{value:c,children:e})}function Vi(){const e=g.useContext(Q0);if(!e)throw new Error("useDebug must be used within a DebugProvider");return e}class se extends Error{constructor(t,n,r){super(t),this.status=n,this.payload=r,this.name="AIClientError"}}function fA(e,t=6e4){let n;const r=new Promise((s,i)=>{n=setTimeout(()=>i(new se("Request timed out")),t)});return Promise.race([e,r]).finally(()=>clearTimeout(n))}async function Fi(e,t,n){try{return await fA(fetch(e,t))}catch(r){throw r instanceof TypeError?new se(`${n} request failed before reaching the API. If you're running locally, ensure the dev proxy is active (npm run dev) or configure a VITE_${n.replace(/\s+/g,"_").toUpperCase()}_BASE_URL override.`,void 0,{cause:String(r)}):r}}function Ha(e){return["You are Dreamscribe, an AI co-author who crafts immersive fiction while respecting the author's voice.","Write with cinematic detail, grounded emotions, and coherent pacing.",`Tone guidance: ${e.tone}`,`Genre: ${e.genre}`,`Narrative perspective: ${e.perspective}`,"Structure scenes with clear beats, rising tension, and satisfying payoff."].join(" ")}function Ka(e,t){return[`Title: ${e.title||"Untitled"}`,`Target length: ${mA(e.targetLength)}`,"Author instructions:",t.trim()].join(`

`)}function Ga(e,t,n){return["You are a developmental editor critiquing a work in progress.",`Story title: ${e.title}`,`Genre: ${e.genre}`,`Tone: ${e.tone}`,"First provide a concise summary of your feedback, then bullet actionable revisions. Quote lines where useful.","Draft:",t,"Feedback focus:",n].join(`

`)}function mA(e){switch(e){case"short":return"Flash (500-1,000 words)";case"medium":return"Short story (1,000-3,000 words)";case"long":return"Long form (3,000+ words)";default:return"Moderate"}}const yA="https://api.openai.com/v1/responses",gA="https://api.openai.com/v1/models";async function vA(e,t){var r,s;const n=await Fi(yA,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(t)},"OpenAI");if(!n.ok){const i=await n.json().catch(()=>{}),a=((s=(r=i==null?void 0:i.error)==null?void 0:r.message)==null?void 0:s.trim())??"",l=a?`OpenAI error (${n.status}): ${a}`:`OpenAI error (${n.status})`;throw new se(l,n.status,i)}return n.json()}function dm(e,t){const n=[e??t,t,"gpt-4o-mini","gpt-4o","gpt-4o-mini-2024-07-18","gpt-4o-2024-08-06"];return Array.from(new Set(n.filter(Boolean)))}function hm(e){if(Array.isArray(e.output_text)&&e.output_text.length)return e.output_text.join(`
`).trim();if(Array.isArray(e.output)&&e.output.length){const t=e.output.map(n=>"text"in n&&typeof n.text=="string"?n.text:"").filter(Boolean).join(`
`).trim();if(t)return t}if(Array.isArray(e.response)&&e.response.length){const t=e.response.flatMap(n=>n.content??[]).map(n=>typeof n.text=="string"?n.text:"").filter(Boolean).join(`
`).trim();if(t)return t}return""}async function pm(e,t,n,r){let s;const i=await wA(e,t);if(i.length===0)throw new se("OpenAI models unavailable. This API key does not have access to gpt-4o or gpt-4o-mini.",404);for(const a of i)try{const l=await vA(e,n(a));return r(l)}catch(l){const c=l;if(c instanceof se&&c.status===404){s=c;continue}throw l}throw s instanceof Error?s:new se("OpenAI returned 404 for all fallback models")}const Wl=new Map,xA=60*60*1e3;async function wA(e,t){const n=Wl.get(e),r=Date.now();if(n&&r-n.timestamp<xA)return t.filter(i=>n.models.has(i));const s=new Set;return await Promise.all(t.map(async i=>{if(i)try{(await Fi(`${gA}/${encodeURIComponent(i)}`,{method:"GET",headers:{Authorization:`Bearer ${e}`}},"OpenAI")).ok&&s.add(i)}catch{}})),s.size===0?(Wl.set(e,{timestamp:r,models:new Set}),[]):(Wl.set(e,{timestamp:r,models:s}),t.filter(i=>s.has(i)))}const jA={async generateStory(e){const t=Ha(e.metadata),n=Ka(e.metadata,e.prompt),r=dm(e.model,e.provider.defaultModel);return await pm(e.apiKey,r,s=>({model:s,max_output_tokens:e.maxTokens??1400,temperature:e.temperature??.7,input:[{role:"system",content:[{type:"text",text:t}]},{role:"user",content:[{type:"text",text:n}]}]}),s=>{var a,l;const i=hm(s);if(!i)throw new se("OpenAI returned an empty response",void 0,s);return{content:i,tokensUsed:((a=s.usage)==null?void 0:a.total_tokens)??((l=s.usage)==null?void 0:l.output_tokens),raw:s}})},async requestFeedback(e){const t=Ga(e.metadata,e.draft,e.instruction),n=dm(e.model,e.provider.defaultModel);return await pm(e.apiKey,n,r=>({model:r,max_output_tokens:900,temperature:.4,input:[{role:"system",content:[{type:"text",text:"You are a world-class fiction editor offering constructive critiques."}]},{role:"user",content:[{type:"text",text:t}]}]}),r=>{var i,a;const s=hm(r);if(!s)throw new se("OpenAI returned an empty feedback response",void 0,r);return{content:s,tokensUsed:((i=r.usage)==null?void 0:i.total_tokens)??((a=r.usage)==null?void 0:a.output_tokens),raw:r}})}},SA="https://api.anthropic.com/v1/messages",kA="2023-06-01";async function fm(e,t){var r,s;const n=await Fi(SA,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":e,"anthropic-version":kA},body:JSON.stringify(t)},"Anthropic");if(!n.ok){const i=await n.json().catch(()=>{}),a=((s=(r=i==null?void 0:i.error)==null?void 0:r.message)==null?void 0:s.trim())??"",l=a?`Anthropic error (${n.status}): ${a}`:`Anthropic error (${n.status})`;throw new se(l,n.status,i)}return n.json()}const bA={async generateStory(e){var s,i,a,l;const t={model:e.model??e.provider.defaultModel,max_tokens:e.maxTokens??1500,temperature:e.temperature??.7,system:Ha(e.metadata),messages:[{role:"user",content:[{type:"text",text:Ka(e.metadata,e.prompt)}]}]},n=await fm(e.apiKey,t),r=(a=(i=(s=n.content)==null?void 0:s[0])==null?void 0:i.text)==null?void 0:a.trim();if(!r)throw new se("Anthropic returned an empty response",void 0,n);return{content:r,tokensUsed:(l=n.usage)==null?void 0:l.output_tokens,raw:n}},async requestFeedback(e){var s,i,a,l;const t={model:e.model??e.provider.defaultModel,max_tokens:900,temperature:.3,system:"You are a precise, encouraging fiction editor.",messages:[{role:"user",content:[{type:"text",text:Ga(e.metadata,e.draft,e.instruction)}]}]},n=await fm(e.apiKey,t),r=(a=(i=(s=n.content)==null?void 0:s[0])==null?void 0:i.text)==null?void 0:a.trim();if(!r)throw new se("Anthropic returned an empty feedback response",void 0,n);return{content:r,tokensUsed:(l=n.usage)==null?void 0:l.output_tokens,raw:n}}},Hl="https://generativelanguage.googleapis.com";function mm(e,t){return`${Hl.endsWith("/")?Hl.slice(0,-1):Hl}/v1/models/${e}:generateContent?key=${encodeURIComponent(t)}`}async function ym(e,t){var r,s;const n=await Fi(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)},"Gemini");if(!n.ok){const i=await n.json().catch(()=>{}),a=((s=(r=i==null?void 0:i.error)==null?void 0:r.message)==null?void 0:s.trim())??"",l=a?`Gemini error (${n.status}): ${a}`:`Gemini error (${n.status})`;throw new se(l,n.status,i)}return n.json()}function gm(e){var n;const t=(n=e==null?void 0:e.content)==null?void 0:n.parts;if(Array.isArray(t))return t.map(r=>r==null?void 0:r.text).filter(Boolean).join(`
`).trim()}function vm(e){const t=[e];return/^gemini-1\.5-flash$/.test(e)&&t.push("gemini-1.5-flash-001"),/^gemini-1\.5-flash-8b$/.test(e)&&t.push("gemini-1.5-flash-8b-001"),/^gemini-1\.5-pro$/.test(e)&&t.push("gemini-1.5-pro-001"),/^gemini-pro$/.test(e)&&t.push("gemini-1.5-pro","gemini-1.5-pro-001"),Array.from(new Set(t))}const CA={async generateStory(e){var i;const t=e.model??e.provider.defaultModel,n={contents:[{role:"user",parts:[{text:Ha(e.metadata)+`

`+Ka(e.metadata,e.prompt)}]}],generationConfig:{temperature:e.temperature??.75,maxOutputTokens:e.maxTokens??1400}},r=vm(t);let s;for(const a of r)try{const l=mm(a,e.apiKey),c=await ym(l,n),u=(i=c.candidates)==null?void 0:i[0],d=gm(u);if(!d)throw new se("Gemini returned an empty response",void 0,c);return{content:d,raw:c}}catch(l){const c=l,u=String(c&&(c.message||c.payload)||"").toLowerCase();if(!(c&&c.status===404||u.includes("not found"))||a===r[r.length-1]){s=l;break}s=l}throw s},async requestFeedback(e){var i;const t=e.model??e.provider.defaultModel,n={contents:[{role:"user",parts:[{text:`You are an expert fiction editor offering constructive feedback.

`+Ga(e.metadata,e.draft,e.instruction)}]}],generationConfig:{temperature:.35,maxOutputTokens:900}},r=vm(t);let s;for(const a of r)try{const l=mm(a,e.apiKey),c=await ym(l,n),u=(i=c.candidates)==null?void 0:i[0],d=gm(u);if(!d)throw new se("Gemini returned an empty feedback response",void 0,c);return{content:d,raw:c}}catch(l){const c=l,u=String(c&&(c.message||c.payload)||"").toLowerCase();if(!(c&&c.status===404||u.includes("not found"))||a===r[r.length-1]){s=l;break}s=l}throw s}},NA="https://api.deepseek.com/chat/completions";async function xm(e,t){var r,s;const n=await Fi(NA,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(t)},"DeepSeek");if(!n.ok){const i=await n.json().catch(()=>{}),a=((s=(r=i==null?void 0:i.error)==null?void 0:r.message)==null?void 0:s.trim())??"",l=a?`DeepSeek error (${n.status}): ${a}`:`DeepSeek error (${n.status})`;throw new se(l,n.status,i)}return n.json()}const AA={async generateStory(e){var s,i,a,l,c;const t={model:e.model??e.provider.defaultModel,temperature:e.temperature??.65,max_tokens:e.maxTokens??1400,messages:[{role:"system",content:Ha(e.metadata)},{role:"user",content:Ka(e.metadata,e.prompt)}]},n=await xm(e.apiKey,t),r=(l=(a=(i=(s=n.choices)==null?void 0:s[0])==null?void 0:i.message)==null?void 0:a.content)==null?void 0:l.trim();if(!r)throw new se("DeepSeek returned an empty response",void 0,n);return{content:r,tokensUsed:(c=n.usage)==null?void 0:c.total_tokens,raw:n}},async requestFeedback(e){var s,i,a,l,c;const t={model:e.model??e.provider.defaultModel,temperature:.4,max_tokens:900,messages:[{role:"system",content:"You are a careful fiction editor."},{role:"user",content:Ga(e.metadata,e.draft,e.instruction)}]},n=await xm(e.apiKey,t),r=(l=(a=(i=(s=n.choices)==null?void 0:s[0])==null?void 0:i.message)==null?void 0:a.content)==null?void 0:l.trim();if(!r)throw new se("DeepSeek returned an empty feedback response",void 0,n);return{content:r,tokensUsed:(c=n.usage)==null?void 0:c.total_tokens,raw:n}}},PA={openai:jA,anthropic:bA,gemini:CA,deepseek:AA};function X0(e){if(e.id.startsWith("custom:"))throw new se("Custom providers require a user-supplied connector.");return PA[e.id]}async function wm(e){const t=X0(e.provider);try{return await t.generateStory(e)}catch(n){const r=n,s=r instanceof se&&r.payload?JSON.stringify(r.payload).toLowerCase():"",i=r instanceof se&&(r.status===404||r.message.toLowerCase().includes("model")||s.includes("model")||r.message.toLowerCase().includes("does not exist")),a=e.provider.defaultModel;if(i&&e.model!==a)return await t.generateStory({...e,model:a});throw n}}async function jm(e){const t=X0(e.provider);try{return await t.requestFeedback(e)}catch(n){const r=n,s=r instanceof se&&r.payload?JSON.stringify(r.payload).toLowerCase():"",i=r instanceof se&&(r.status===404||r.message.toLowerCase().includes("model")||s.includes("model")||r.message.toLowerCase().includes("does not exist")),a=e.provider.defaultModel;if(i&&e.model!==a)return await t.requestFeedback({...e,model:a});throw n}}const J0="sf:blocked-words",q0="sf:moderation-logs",ya=["nigger","retard","rape","kill yourself","kys"];function TA(){try{const e=localStorage.getItem(J0),t=e?JSON.parse(e):[];return Array.from(new Set([...ya,...t])).map(r=>r.toLowerCase())}catch{return ya}}function EA(){try{const e=localStorage.getItem(q0);return e?JSON.parse(e):[]}catch{return[]}}function Kl(e){const t=e.filter(n=>!ya.includes(n));localStorage.setItem(J0,JSON.stringify(t))}function _A(e){localStorage.setItem(q0,JSON.stringify(e))}function RA(e,t){switch(t.type){case"add":{const n=Array.from(new Set([...e.blockedWords,t.word.toLowerCase()]));return Kl(n),{...e,blockedWords:n}}case"remove":{const n=e.blockedWords.filter(r=>r!==t.word.toLowerCase());return Kl(n),{...e,blockedWords:n}}case"clear_words":return Kl([]),{...e,blockedWords:ya};case"log":{const n=[t.entry,...e.logs].slice(0,500);return _A(n),{...e,logs:n}}default:return e}}const Z0=g.createContext(void 0);function MA({children:e}){const[t,n]=g.useReducer(RA,void 0,()=>({blockedWords:TA(),logs:EA()})),r=g.useCallback(u=>{const d=u.trim().toLowerCase();d&&n({type:"add",word:d})},[]),s=g.useCallback(u=>{n({type:"remove",word:u.trim().toLowerCase()})},[]),i=g.useCallback(()=>n({type:"clear_words"}),[]),a=g.useCallback(u=>{n({type:"log",entry:{id:xe("mod"),timestamp:new Date().toISOString(),...u}})},[]),l=g.useCallback(u=>{const d=(u||"").toLowerCase();for(const f of t.blockedWords){const m=d.indexOf(f);if(m>=0)return{ok:!1,word:f,index:m}}return{ok:!0}},[t.blockedWords]),c=g.useMemo(()=>({blockedWords:t.blockedWords,addBlockedWord:r,removeBlockedWord:s,clearBlockedWords:i,logs:t.logs,recordLog:a,validateText:l}),[t.blockedWords,t.logs,r,s,i,a,l]);return o.jsx(Z0.Provider,{value:c,children:e})}function Zd(){const e=g.useContext(Z0);if(!e)throw new Error("useModeration must be used within a ModerationProvider");return e}const ex=g.createContext(void 0),tx="sf:published-stories";function LA(){const e=localStorage.getItem(tx);if(!e)return{stories:[]};try{return{stories:JSON.parse(e).map(({ttsConfig:r,reviews:s,...i})=>({...i,reviews:s??[],coverGallery:i.coverGallery??(i.coverImage?[i.coverImage]:[]),likeUserIds:i.likeUserIds??[]}))}}catch(t){return console.error("Failed to parse published stories",t),{stories:[]}}}function Ms(e){localStorage.setItem(tx,JSON.stringify(e.stories))}function DA(e,t){switch(t.type){case"publish":{const r={stories:[t.story,...e.stories]};return Ms(r),r}case"review":{const r={stories:e.stories.map(s=>s.id===t.storyId?{...s,reviews:[t.review,...s.reviews]}:s)};return Ms(r),r}case"delete":{const r={stories:e.stories.filter(s=>s.id!==t.storyId)};return Ms(r),r}case"review_delete":{const r={stories:e.stories.map(s=>({...s,reviews:s.reviews.filter(i=>i.id!==t.reviewId)}))};return Ms(r),r}case"toggle_like":{const r={stories:e.stories.map(s=>{if(s.id!==t.storyId)return s;const i=new Set(s.likeUserIds??[]);return i.has(t.userId)?i.delete(t.userId):i.add(t.userId),{...s,likeUserIds:Array.from(i)}})};return Ms(r),r}default:return e}}function IA({children:e}){const[t,n]=g.useReducer(DA,void 0,LA),{validateText:r,recordLog:s}=Zd(),{user:i}=Ge(),a=!!(i!=null&&i.isDev||(i==null?void 0:i.roleId)==="mod"||(i==null?void 0:i.roleId)==="staff"),l=g.useCallback(w=>{if(!a){const h=[w.content,w.summary,w.metadata.title,w.tags.join(" ")];for(const p of h){const y=r(p);if(!y.ok)throw s({type:"blocked_content",details:`publish blocked on word: ${y.word}`}),new Error("Story contains blocked terms. Please edit and try again.")}}const k={id:xe("story"),authorId:w.authorId,authorName:w.authorName,metadata:w.metadata,content:w.content,summary:w.summary,tags:w.tags,publishedAt:new Date().toISOString(),reviews:[],coverImage:w.coverImage,coverGallery:w.coverGallery??(w.coverImage?[w.coverImage]:[]),coverStyle:w.coverStyle,likeUserIds:[]};return n({type:"publish",story:k}),k},[s,r,a]),c=g.useCallback(w=>{if(!a){const h=r(w.comment);if(!h.ok)throw s({type:"blocked_content",details:`review blocked on word: ${h.word}`,targetResourceId:w.storyId}),new Error("Review contains blocked terms.")}const k={id:xe("rev"),storyId:w.storyId,reviewerName:w.reviewerName,rating:w.rating,comment:w.comment,createdAt:new Date().toISOString()};return n({type:"review",storyId:w.storyId,review:k}),k},[s,r,a]),u=g.useCallback(w=>t.stories.find(k=>k.id===w),[t.stories]),d=g.useCallback(w=>{n({type:"delete",storyId:w})},[]),f=g.useCallback(w=>{n({type:"review_delete",reviewId:w})},[]),m=g.useCallback((w,k)=>{var y;const h=t.stories.find(j=>j.id===w);if(!h)return!1;const p=((y=h.likeUserIds)==null?void 0:y.includes(k))??!1;return n({type:"toggle_like",storyId:w,userId:k}),!p},[t.stories]),S=g.useCallback(w=>{const k=w?t.stories.filter(p=>p.id!==w):t.stories;if(k.length===0)return;const h=Math.floor(Math.random()*k.length);return k[h]},[t.stories]),b=g.useMemo(()=>({stories:t.stories,publishStory:l,addReview:c,getStoryById:u,deleteStory:d,deleteReview:f,toggleStoryLike:m,getRandomStory:S}),[t.stories,l,c,u,d,f,m,S]);return o.jsx(ex.Provider,{value:b,children:e})}function gs(){const e=g.useContext(ex);if(!e)throw new Error("useLibrary must be used within a LibraryProvider");return e}const nx=g.createContext(void 0),rx="sf:achievements",sx={publishedStoryIds:[],publishedGenres:[],reviewsWritten:0,reviewsReceived:0},OA=[{id:"story-starter",title:"Story Starter",description:"Publish your first story.",check:(e,t)=>e.publishedStoryIds.length>=1},{id:"prolific-author",title:"Prolific Author",description:"Publish five stories.",check:(e,t)=>e.publishedStoryIds.length>=5},{id:"genre-explorer",title:"Genre Explorer",description:"Publish stories across three different genres.",check:(e,t)=>[...new Set(e.publishedGenres)].length>=3},{id:"thoughtful-critic",title:"Thoughtful Critic",description:"Leave your first review.",check:(e,t)=>e.reviewsWritten>=1},{id:"community-favorite",title:"Community Favorite",description:"Receive five reviews across your stories.",check:(e,t)=>e.reviewsReceived>=5},{id:"curator",title:"Curator",description:"Create your first collection.",check:(e,t)=>t.length>=1}];function VA(){const e=localStorage.getItem(rx);if(!e)return{};try{return JSON.parse(e)}catch(t){return console.error("Failed to parse achievements store",t),{}}}function Sm(e){localStorage.setItem(rx,JSON.stringify(e))}function Gl(e){var t,n,r,s;return e?{achievements:e.achievements??[],collections:e.collections??[],stats:{publishedStoryIds:((t=e.stats)==null?void 0:t.publishedStoryIds)??[],publishedGenres:((n=e.stats)==null?void 0:n.publishedGenres)??[],reviewsWritten:((r=e.stats)==null?void 0:r.reviewsWritten)??0,reviewsReceived:((s=e.stats)==null?void 0:s.reviewsReceived)??0}}:{achievements:[],collections:[],stats:{...sx}}}function FA({children:e}){const{user:t}=Ge(),[n,r]=g.useState(()=>VA()),s=g.useMemo(()=>Gl(t?n[t.id]:void 0),[n,t]),i=g.useCallback(w=>{t&&r(k=>{const h={...k},p=Gl(k[t.id]);return h[t.id]=w(p),Sm(h),h})},[t]),a=g.useCallback(w=>{const k=new Set(w.achievements.map(p=>p.id)),h=[];return OA.forEach(p=>{if(k.has(p.id))return;p.check(w.stats,w.collections)&&h.push({id:p.id,title:p.title,description:p.description,unlockedAt:new Date().toISOString()})}),h.length===0?w:{...w,achievements:[...w.achievements,...h]}},[]),l=g.useCallback(w=>{i(k=>{const h={...k.stats,publishedStoryIds:Array.from(new Set([...k.stats.publishedStoryIds,w.id])),publishedGenres:Array.from(new Set([...k.stats.publishedGenres,w.metadata.genre]))};return{...a({...k,stats:h}),stats:h}})},[i,a]),c=g.useCallback(w=>{i(k=>{const h={...k.stats,reviewsWritten:k.stats.reviewsWritten+1};return{...a({...k,stats:h}),stats:h}})},[i,a]),u=g.useCallback(w=>{i(k=>{const h={...k.stats,reviewsReceived:k.stats.reviewsReceived+1};return{...a({...k,stats:h}),stats:h}})},[i,a]),d=g.useCallback(w=>{if(!w.trim())return null;let k=null;return i(h=>{const p={id:xe("col"),name:w.trim(),createdAt:new Date().toISOString(),stories:[]};return k=p,{...a({...h,collections:[p,...h.collections]})}}),k},[i,a]),f=g.useCallback(w=>{i(k=>({...k,collections:k.collections.filter(h=>h.id!==w)}))},[i]),m=g.useCallback((w,k)=>{i(h=>{const p=h.collections.map(y=>y.id!==w||y.stories.some(x=>x.id===k.id)?y:{...y,stories:[{...k},...y.stories].slice(0,50)});return{...h,collections:p}})},[i]),S=g.useCallback((w,k)=>{i(h=>{const p=h.collections.map(y=>y.id===w?{...y,stories:y.stories.filter(j=>j.id!==k)}:y);return{...h,collections:p}})},[i]);g.useEffect(()=>{Sm(n)},[n]);const b=g.useMemo(()=>({achievements:t?s.achievements:[],collections:t?s.collections:[],stats:t?s.stats:{...sx},createCollection:d,removeCollection:f,addStoryToCollection:m,removeStoryFromCollection:S,recordStoryPublished:l,recordReviewWritten:c,recordReviewReceived:u}),[s,t,d,f,m,S,l,c,u]);return o.jsx(nx.Provider,{value:b,children:e})}function eh(){const e=g.useContext(nx);if(!e)throw new Error("useAchievements must be used within an AchievementsProvider");return e}const nr=[{id:"neon-noir",label:"Neon Noir",background:"#080820",accentA:"rgba(124,77,255,0.85)",accentB:"rgba(244,143,177,0.85)",overlay:"rgba(10,10,30,0.72)"},{id:"sunrise-parchment",label:"Sunrise Parchment",background:"#1a130a",accentA:"rgba(245,210,140,0.9)",accentB:"rgba(255,120,92,0.85)",overlay:"rgba(28,20,10,0.78)"},{id:"cosmic-aether",label:"Cosmic Aether",background:"#050b1d",accentA:"rgba(94,211,255,0.85)",accentB:"rgba(167,139,255,0.8)",overlay:"rgba(6,12,30,0.78)"}];function km(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function BA(e){return`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(e)))}`}function bm(e,t=nr[0]){const n=km(e.title||"Untitled"),r=km(`${e.genre}  ${e.tone}`),s=`<?xml version="1.0" encoding="UTF-8"?>
  <svg xmlns='http://www.w3.org/2000/svg' width='1200' height='630' viewBox='0 0 1200 630'>
    <defs>
      <linearGradient id='g' x1='0' y1='0' x2='1' y2='1'>
        <stop offset='0%' stop-color='${t.accentA}'/>
        <stop offset='100%' stop-color='${t.accentB}'/>
      </linearGradient>
      <filter id='blur'>
        <feGaussianBlur stdDeviation='70'/>
      </filter>
    </defs>
    <rect width='1200' height='630' fill='${t.background}'/>
    <g opacity='0.6' filter='url(#blur)'>
      <circle cx='240' cy='160' r='240' fill='url(#g)'/>
      <circle cx='960' cy='500' r='280' fill='url(#g)'/>
    </g>
    <rect x='40' y='40' width='1120' height='550' rx='28' fill='${t.overlay??"rgba(8,8,20,0.72)"}' stroke='rgba(255,255,255,0.12)'/>
    <text x='80' y='280' font-family='Inter, system-ui, -apple-system, "Segoe UI"' font-size='64' fill='white' font-weight='700'>${n}</text>
    <text x='80' y='340' font-family='Inter, system-ui, -apple-system, "Segoe UI"' font-size='24' fill='rgba(230,232,255,0.92)' font-weight='500'>${r}</text>
  </svg>`;return BA(s)}const Cm={title:"Untitled Tale",genre:"Speculative fiction",tone:"Evocative and character-driven",perspective:"Close third person",targetLength:"medium"},Nm="You are a collaborative storytelling assistant. Craft an engaging story that follows the author's intent. Focus on vivid sensory details, grounded character motivations, and strong pacing.",Yl="A new story ready for its first sparks of inspiration.";function Ar(e){if(e.targetTokens&&Number.isFinite(e.targetTokens)&&e.targetTokens>0)return Math.floor(e.targetTokens);switch(e.targetLength){case"short":return 900;case"medium":return 1500;case"long":return 2200;default:return 1400}}const Am={openai:{input:15e-5,output:6e-4},anthropic:{input:8e-4,output:.003},gemini:{input:125e-6,output:375e-6},deepseek:{input:2e-4,output:4e-4},default:{input:2e-4,output:6e-4}};function Pm(e,t){const n=e.startsWith("custom")?"default":e,r=Am[n]??Am.default,s=t/1e3*(r.input+r.output);return Number(s.toFixed(3))}const zA=new Set(["The","They","Their","Them","That","This","With","From","Into","And","But","She","Her","He","His","Its","For","When","Where","While","Once","Upon"]),Jn={sensory:{label:"Sensory detail",description:"Layer richer sense impressions into the current draft.",instruction:"Enhance the provided excerpt by weaving in vivid sensory details across sight, sound, smell, taste, and touch. Preserve plot, character voice, and approximate length. Return the rewritten passage only."},dialogue:{label:"Dialogue polish",description:"Sharpen voices, subtext, and conversational rhythm.",instruction:"Review the excerpt and return a refined version that tightens dialogue, strengthens subtext, and keeps character voices consistent. Maintain story beats and format."},pacing:{label:"Pacing tighten",description:"Speed up slack moments without losing clarity.",instruction:"Identify sluggish portions of the excerpt and rewrite them for brisker pacing while preserving essential information. Respond with the adjusted prose and brief inline notes for major cuts."}};function go(e,t){var n,r,s,i;if(e instanceof se){const a=e.payload,l=((n=a==null?void 0:a.error)==null?void 0:n.message)||((r=a==null?void 0:a.error)==null?void 0:r.detail)||((s=a==null?void 0:a.error)==null?void 0:s.type)||((i=a==null?void 0:a.error)==null?void 0:i.code);return l?`${e.message}: ${l}`:e.message}return e instanceof Error?`${t}: ${e.message}`:t}function UA(e){return e.split(",").map(t=>t.trim()).filter(Boolean).map(t=>t.startsWith("#")?t:`#${t.replace(/^#+/,"")}`)}function $A(){var dh,hh,ph;const e=$n(),{publishStory:t}=gs(),{user:n}=Ge(),{recordStoryPublished:r}=eh(),{drafts:s,activeDraft:i,createDraft:a,updateDraft:l,selectDraft:c,addFeedback:u,promptRecipes:d,createPromptRecipe:f,deletePromptRecipe:m,addContinuityEntry:S,updateContinuityEntry:b,deleteContinuityEntry:w,addSensoryPass:k}=uA(),{providers:h,selectedProvider:p,selectedModel:y,selectProvider:j,apiKeys:x,setApiKey:N,setModel:A,modelSelections:P}=Y0(),{append:C}=Vi(),[E,T]=g.useState((i==null?void 0:i.metadata)??Cm),[M,D]=g.useState((i==null?void 0:i.prompt)??Nm),[$,Ye]=g.useState((i==null?void 0:i.summary)??Yl),[Se,q]=g.useState("#Dreamscribe"),[O,U]=g.useState(!1),[W,te]=g.useState(null),[X,Qe]=g.useState("grammar"),[ke,Ct]=g.useState(""),[Le,Ue]=g.useState(null),[Dt,vr]=g.useState(null),[dn,dt]=g.useState(null),[xr,wr]=g.useState(!1),[De,hn]=g.useState([]),[jr,pn]=g.useState(null),[R,H]=g.useState(null),[V,K]=g.useState(null),[Xe,fn]=g.useState(""),[Hn,nh]=g.useState(null),[Bi,Ya]=g.useState(""),Qa=g.useRef(""),[It,zi]=g.useState(null),[mx,Ui]=g.useState(null),Z=(i==null?void 0:i.id)??null;g.useEffect(()=>{if(!i){const v=a({metadata:Cm,prompt:Nm,summary:Yl});T(v.metadata),D(v.prompt),Ye(v.summary);return}T(i.metadata),D(i.prompt),Ye(i.summary??Yl)},[i,a]),g.useEffect(()=>{Z&&l(Z,{metadata:E})},[E,Z,l]),g.useEffect(()=>{hn([]),K(null)},[Z]),g.useEffect(()=>{Z&&l(Z,{prompt:M})},[M,Z,l]),g.useEffect(()=>{Z&&l(Z,{summary:$})},[$,Z,l]),g.useEffect(()=>{if(!Hn||!Z||Hn!==Z)return;const v=Qa.current??"",_=Bi?`${v}

${Bi}`:v;(i==null?void 0:i.content)!==_&&l(Z,{content:_})},[Bi,Hn,Z,i,l]);const mn=(i==null?void 0:i.content)??"",vs=x[p.id]??"",Kn=(i==null?void 0:i.abExperiments)??[],yx=It?[It,...Kn]:Kn,gx=!!It,nt=(i==null?void 0:i.continuity.entries)??[],Sr=(i==null?void 0:i.sensoryPasses)??[],Xa=[...d].sort((v,_)=>new Date(_.updatedAt).getTime()-new Date(v.updatedAt).getTime());g.useMemo(()=>new Map(h.map(v=>[v.id,v])),[h]);const rh=Kn.length,sh=Kn.filter(v=>v.winnerId).length,$i=mn?mn.split(/\s+/).map(v=>v.trim()).filter(Boolean).length:0,xs=i!=null&&i.generatedAt?new Date(i.generatedAt):null,Gn=((dh=i==null?void 0:i.feedbackThreads)==null?void 0:dh[0])??null,Yn=Sr[0]??null,Ja=yx[0]??null,yn=v=>{if(!v)return"";const _=Date.now()-v.getTime(),L=Math.floor(_/6e4);if(L<1)return"just now";if(L<60)return`${L}m ago`;const z=Math.floor(L/60);return z<24?`${z}h ago`:`${Math.floor(z/24)}d ago`},vx=g.useMemo(()=>[{id:"title",label:"Title set",detail:E.title.trim().length?E.title:"Add a working title to stay organised",done:!!E.title.trim().length},{id:"summary",label:"Summary ready",detail:$.trim().length?$.slice(0,100)+($.length>100?"":""):"Write a quick hook for the publish card",done:!!$.trim().length},{id:"feedback",label:"Feedback pass",detail:Gn?`${Gn.focus}  ${yn(new Date(Gn.createdAt))}`:"Request a feedback pass",done:!!Gn},{id:"sensory",label:"Sensory polish",detail:Yn?`${Jn[Yn.kind].label}  ${yn(new Date(Yn.createdAt))}`:"Run a sensory pass to enrich detail",done:!!Yn},{id:"cover",label:"Cover ready",detail:De.length?`${De.length} variants generated`:"Generate or upload cover art",done:!!De.length},{id:"tags",label:"Tags added",detail:Se.trim().length?Se:"Add discovery tags",done:!!Se.trim().length}],[E.title,$,Gn,Yn,De,Se]),xx=g.useMemo(()=>{const v=[],_=E.tone.split(",").map(L=>L.trim()).filter(Boolean)[0]||"the current vibe";return v.push({id:"character",title:"Character beat",body:`Write a single paragraph that shows how your protagonist reacts when the tone turns ${_.toLowerCase()}.`}),v.push({id:"setting",title:"Setting detail",body:"Describe the setting using a sense you've ignored so far (sound, smell, or touch)."}),v.push({id:"stakes",title:"Raise the stakes",body:"Add one line that clarifies what your protagonist loses if they fail in this scene."}),nt.length===0?v.push({id:"continuity",title:"Continuity seed",body:"Capture a quick note in the Continuity Coach for the most important character in this draft."}):v.push({id:"callback",title:"Continuity callback",body:`Reference ${nt[0].label} to keep your continuity thread alive.`}),v},[E.tone,nt]),kr=g.useMemo(()=>{const v=new Map;return d.forEach(_=>{(_.tags??[]).forEach(L=>v.set(L,(v.get(L)??0)+1))}),Array.from(v.entries()).sort((_,L)=>L[1]-_[1]).slice(0,6)},[d]),qa=g.useMemo(()=>{const v={character:0,plot:0,world:0};return nt.forEach(_=>{v[_.type]=(v[_.type]??0)+1}),v},[nt]),Za=g.useMemo(()=>{const v=`${M}
${$}
${mn}`,_=v.toLowerCase(),L=Array.from(v.matchAll(/\b[A-Z][a-z]+(?:\s+[A-Z][a-z]+)?\b/g)).map(ne=>ne[0]),z=Array.from(new Set(L.map(ne=>ne.trim()))),ee=new Set(nt.map(ne=>ne.label.toLowerCase())),ht=[];z.filter(ne=>ne.length>2).filter(ne=>{const Kt=ne.split(" ")[0];return!zA.has(Kt)}).forEach(ne=>{ee.has(ne.toLowerCase())||ht.push({id:`untracked-${ne}`,severity:"warn",message:`Untracked entity "${ne}" detected in your draft.`,suggestion:"Add it to keep names, roles, and traits consistent.",candidate:{label:ne,type:"character"}})});const br=nt.reduce((ne,Kt)=>{const Wi=Kt.label.toLowerCase();return ne[Wi]=(ne[Wi]??0)+1,ne},{});return Object.entries(br).forEach(([ne,Kt])=>{Kt>1&&ht.push({id:`duplicate-${ne}`,severity:"error",message:`Multiple continuity entries found for "${ne}". Consider merging them.`})}),nt.forEach(ne=>{_.includes(ne.label.toLowerCase())||ht.push({id:`dormant-${ne.id}`,severity:"info",message:`"${ne.label}" hasn't appeared in this draft yet.`})}),ht.slice(0,8)},[nt,M,$,mn]),ih=g.useMemo(()=>{var _;const v=[];return xs&&v.push({id:`gen-${Z??"draft"}`,title:"Story generated",detail:`Model ${p.label}  ${y}`,timestamp:xs,type:"generation"}),Kn.forEach(L=>{v.push({id:`exp-${L.id}`,title:L.winnerId?"Comparison winner picked":"A/B comparison run",detail:`${L.variants.length} variants  ${L.winnerId?"Winner selected":"Awaiting vote"}`,timestamp:new Date(L.createdAt),type:"experiment"})}),(_=i==null?void 0:i.feedbackThreads)==null||_.forEach(L=>{v.push({id:`fb-${L.id}`,title:`Feedback: ${L.focus}`,detail:L.provider,timestamp:new Date(L.createdAt),type:"feedback"})}),Sr.forEach(L=>{const z=Jn[L.kind];v.push({id:`sensory-${L.id}`,title:`${z.label} pass`,detail:z.description,timestamp:new Date(L.createdAt),type:"sensory"})}),v.sort((L,z)=>z.timestamp.getTime()-L.timestamp.getTime()).slice(0,12)},[Kn,i==null?void 0:i.feedbackThreads,Sr,xs,p.label,y,Z]),oh=g.useMemo(()=>{const v=Xe.trim().toLowerCase();return v?s.filter(_=>_.metadata.title.toLowerCase().includes(v)).slice(0,5):[]},[Xe,s]),wx=X==="custom",ah=g.useMemo(()=>{switch(X){case"grammar":return"Provide grammar, spelling, and clarity adjustments. Highlight concrete edits.";case"dialogue":return"Evaluate dialogue authenticity, subtext, and pacing. Suggest specific line edits.";case"flow":return"Analyze story structure, pacing, and transitions. Recommend improvements.";case"custom":return ke||"Offer targeted feedback based on the author's note.";default:return""}},[X,ke]),jx=()=>{if(!(i!=null&&i.content))return;const v=document.createElement("a"),_=new Blob([i.content],{type:"text/plain"});v.href=URL.createObjectURL(_),v.download=`${i.metadata.title||"story"}.txt`,v.click(),URL.revokeObjectURL(v.href)},Sx=async()=>{i!=null&&i.content&&await navigator.clipboard.writeText(i.content)},el=(v,_)=>{const L={id:xe("cover"),src:v,styleId:_};hn(z=>{const ht=[...z.filter(br=>br.src!==v),L];return K(L.id),ht})},kx=v=>{try{const _=v?nr.find(z=>z.id===v)??nr[0]:nr[0],L=bm(E,_);el(L,_.id)}catch(_){console.error(_),alert("Unable to generate a cover image.")}},bx=()=>{nr.forEach(v=>{try{const _=bm(E,v);el(_,v.id)}catch(_){console.error(_)}})},Cx=v=>{const _=new FileReader;_.onload=()=>{typeof _.result=="string"&&el(_.result,"upload")},_.readAsDataURL(v)},Nx=v=>{hn(_=>{const L=_.filter(z=>z.id!==v);return L.length===0?K(null):L.some(z=>z.id===V)||K(L[L.length-1].id),L})},lh=v=>{if(!v.bestModel)return;const _=v.bestModel.trim();if(!_)return;const L=h.find(z=>z.models.includes(_));L?(j(L.id),A(L.id,_)):A(p.id,_)},Ax=v=>{const _=f(v);C({level:"info",summary:`Saved prompt recipe "${_.title}"`,payload:{recipeId:_.id,tags:_.tags}})},Px=v=>{D(v.prompt),v.toneNotes&&T(_=>({..._,tone:v.toneNotes??_.tone})),lh(v),C({level:"request",summary:`Applied prompt recipe "${v.title}"`,payload:{recipeId:v.id}})},Tx=v=>{const _=[v.toneNotes?`Dial the tone toward ${v.toneNotes}.`:null,v.pacingNotes?`Respect pacing guidance: ${v.pacingNotes}.`:null,"Offer two variant hooks and commit to the strongest before drafting."].filter(Boolean).map(z=>`- ${z}`).join(`
`),L=`${v.prompt.trim()}

Remix directives:
${_}`;D(L),v.toneNotes&&T(z=>({...z,tone:v.toneNotes||z.tone})),lh(v),C({level:"info",summary:`Remixed prompt recipe "${v.title}"`,payload:{recipeId:v.id}})},Ex=v=>{m(v),C({level:"info",summary:"Deleted prompt recipe",payload:{recipeId:v}})},_x=async v=>{const _={schema:"dreamscribe/prompt-recipe@1",exportedAt:new Date().toISOString(),recipe:{title:v.title,prompt:v.prompt,toneNotes:v.toneNotes,pacingNotes:v.pacingNotes,bestModel:v.bestModel,tags:v.tags,updatedAt:v.updatedAt},context:{storyTitle:E.title,genre:E.genre,perspective:E.perspective,targetLength:E.targetLength}};if(!navigator.clipboard||typeof navigator.clipboard.writeText!="function")throw new Error("Clipboard access is not available in this environment.");await navigator.clipboard.writeText(JSON.stringify(_,null,2)),C({level:"response",summary:`Copied prompt recipe "${v.title}" bundle`,payload:{recipeId:v.id}})},Rx=v=>{if(!Z)return;const _=S(Z,v);C({level:"info",summary:"Continuity entry added",payload:{entryId:_.id,type:_.type}})},Mx=(v,_)=>{var L;Z&&(b(Z,v,_),C({level:"info",summary:"Continuity entry updated",payload:{entryId:v,type:_.type??((L=nt.find(z=>z.id===v))==null?void 0:L.type)}}))},Lx=v=>{Z&&(w(Z,v),C({level:"info",summary:"Continuity entry removed",payload:{entryId:v}}))},Dx=v=>{if(!Z)return;const _=S(Z,{type:v.type,label:v.label,summary:"",traits:[]});C({level:"info",summary:"Continuity entry quick-added",payload:{entryId:_.id,label:v.label}})},Ix=async v=>{if(!i||!tl())return;if(!i.content.trim()){H("Generate story content before running a stylistic pass.");return}const _=Jn[v];H(null),pn(v);const L={provider:p,apiKey:vs,metadata:E,draft:i.content,focus:"custom",instruction:_.instruction,model:y};C({level:"request",summary:`${_.label} pass`,payload:{provider:p.id,model:y,kind:v}});try{const z=await jm(L),ee={id:xe("pass"),kind:v,createdAt:new Date().toISOString(),response:z.content};k(i.id,ee),C({level:"response",summary:`${_.label} pass ready`,payload:{passId:ee.id,kind:v}})}catch(z){const ee=go(z,`${_.label} pass failed`);H(ee);const ht=z instanceof se?{status:z.status,payload:z.payload}:{error:String(z)};C({level:"error",summary:ee,payload:{provider:p.id,kind:v,...ht}})}finally{pn(null)}},Ox=async v=>{await navigator.clipboard.writeText(v.response)},Vx=v=>{if(!Z||!i)return;const L=`

[${Jn[v.kind].label} pass]
${v.response.trim()}`;l(Z,{content:`${i.content}${L}`}),C({level:"info",summary:"Sensory pass appended to draft",payload:{passId:v.id,kind:v.kind}})},Fx=async v=>{if(!i){Ui("Create or select a draft before running a comparison.");return}const _=v.map(we=>{const pt=h.find(Cr=>Cr.id===we.providerId);if(!pt)return null;const Ot=pt.models.includes(we.model)?we.model:pt.defaultModel;return{provider:pt,model:Ot}}).filter(Boolean);if(_.length<2){Ui("Select at least two supported providers to compare.");return}const L=_.find(({provider:we})=>{var pt;return!((pt=x[we.id])!=null&&pt.trim())});if(L){Ui(`Add an API key for ${L.provider.label} before running the comparison.`);return}const z=Ar(E),ee=new Date().toISOString(),ht=xe("ab"),br=_.map(({provider:we,model:pt})=>({id:xe("variant"),providerId:we.id,providerLabel:we.label,model:pt,status:"pending",costEstimate:Pm(we.id,z),estimatedTokens:z,createdAt:ee})),ne={id:ht,createdAt:ee,prompt:M,summary:$,variants:br,winnerId:null};Ui(null),zi(ne);const Kt=br.map(we=>({...we}));await Promise.all(Kt.map(async we=>{const pt=_.find(({provider:Ee})=>Ee.id===we.providerId);if(!pt)return;const{provider:Ot,model:Cr}=pt,Yx=x[Ot.id]??"",Qx={provider:Ot,apiKey:Yx,metadata:E,prompt:M,temperature:.72,maxTokens:z,model:Cr},Xx=performance.now();C({level:"request",summary:`A/B request - ${Ot.label}`,payload:{provider:Ot.id,model:Cr,tokensEstimate:z}});try{const Ee=await wm(Qx);Object.assign(we,{status:"success",content:Ee.content,tokensUsed:Ee.tokensUsed,durationMs:performance.now()-Xx}),C({level:"response",summary:`A/B result - ${Ot.label}`,payload:{provider:Ot.id,model:Cr,tokensUsed:Ee.tokensUsed}})}catch(Ee){const ws=go(Ee,`Failed to generate with ${Ot.label}`);Object.assign(we,{status:"error",error:ws});const Jx=Ee instanceof se?{status:Ee.status,payload:Ee.payload}:{error:String(Ee)};C({level:"error",summary:ws,payload:{provider:Ot.id,model:Cr,...Jx}})}finally{zi(Ee=>Ee&&Ee.id===ht?{...Ee,variants:Ee.variants.map(ws=>ws.id===we.id?{...we}:ws)}:Ee)}}));const Wi={...ne,variants:Kt,winnerId:ne.winnerId??null};zi(null);const Gx=i.abExperiments??[];l(i.id,{abExperiments:[Wi,...Gx]}),C({level:"info",summary:"Completed model comparison",payload:{experimentId:ht,variants:Kt.map(we=>({provider:we.providerId,status:we.status}))}})},Bx=(v,_)=>{if(It&&It.id===v){zi({...It,winnerId:_});return}if(!Z)return;const z=((i==null?void 0:i.abExperiments)??[]).map(ee=>ee.id===v?{...ee,winnerId:_}:ee);l(Z,{abExperiments:z}),C({level:"info",summary:"Marked A/B winner",payload:{experimentId:v,variantId:_}})},zx=(v,_)=>{const L=It&&It.id===v?It:((i==null?void 0:i.abExperiments)??[]).find(ee=>ee.id===v)??null,z=L==null?void 0:L.variants.find(ee=>ee.id===_);!z||z.status!=="success"||!z.content||!Z||(l(Z,{content:z.content,generatedAt:new Date().toISOString()}),C({level:"info",summary:"Adopted A/B variant output",payload:{experimentId:v,variantId:_,provider:z.providerId}}))},tl=()=>vs?!0:(C({level:"error",summary:"Missing API key",payload:{provider:p.id}}),alert("Please enter an API key for the selected provider before continuing."),!1),Ux=v=>{const _=s.find(L=>L.id===v);_&&(nh(v),Qa.current=_.content,Ya(""),c(v))},$x=()=>{nh(null),Ya(""),Qa.current=""},Wx=async v=>{if(v.preventDefault(),!i||!tl())return;te(null),U(!0);const _={provider:p,apiKey:vs,metadata:E,prompt:M,temperature:.72,maxTokens:Ar(E),model:y};C({level:"request",summary:`Story request - ${p.label}`,payload:{provider:p.id,model:y,temperature:_.temperature,maxTokens:_.maxTokens,promptLength:M.length}});try{const L=await wm(_);l(i.id,{content:L.content,generatedAt:new Date().toISOString()}),C({level:"response",summary:"Story generated",payload:{provider:p.id,model:y,tokensUsed:L.tokensUsed}})}catch(L){const z=go(L,"Failed to generate story");te(z);const ee=L instanceof se?{status:L.status,payload:L.payload}:{error:String(L)};C({level:"error",summary:z,payload:{provider:p.id,...ee}})}finally{U(!1)}},Hx=async()=>{if(!i){dt("Create or select a draft before publishing.");return}if(!i.content.trim()){dt("Generate or enter story content first.");return}if(!$.trim()){dt("Add a short summary so readers know what to expect.");return}if(!n){e("/login",{replace:!0,state:{from:{pathname:"/studio"}}});return}try{wr(!0),dt(null);const v=UA(Se),_=De.map(ee=>ee.src),L=De.find(ee=>ee.id===V)??De[0],z=t({authorId:n.id,authorName:n.displayName,metadata:E,content:i.content,summary:$.trim(),tags:v,coverImage:L==null?void 0:L.src,coverGallery:_,coverStyle:L==null?void 0:L.styleId});r(z),C({level:"info",summary:"Story published",payload:{storyId:z.id,hasCover:!!(L!=null&&L.src)}}),e(`/stories/${z.id}`)}catch(v){const _=v instanceof Error?v.message:"Unable to publish";dt(_)}finally{wr(!1)}},ch=async v=>{if(!i||!tl())return;if(!i.content){Ue("Generate a story before requesting feedback.");return}Ue(null),vr(v.loadingKey);const _={provider:p,apiKey:vs,metadata:E,draft:i.content,focus:v.focus,instruction:v.instruction,model:y};C({level:"request",summary:`Feedback request (${v.focus})`,payload:{provider:p.id,model:y,focus:v.focus,instructionLength:v.instruction.length}});try{const L=await jm(_),z=u(i.id,{provider:`${p.label} - ${y}`,focus:v.focus,request:v.instruction,response:L.content});C({level:"response",summary:`Feedback received (${v.focus})`,payload:{provider:p.id,model:y,feedbackId:z.id}})}catch(L){const z=go(L,"Feedback request failed");Ue(z);const ee=L instanceof se?{status:L.status,payload:L.payload}:{error:String(L)};C({level:"error",summary:z,payload:{provider:p.id,...ee}})}finally{vr(null)}},uh=()=>{ch({focus:X,instruction:ah,loadingKey:"general"})},Kx=()=>{ch({focus:"dialogue",instruction:"Review the draft's dialogue. Tighten pacing, infuse subtext, and ensure each character's voice is distinct. Provide revised line suggestions.",loadingKey:"dialogue"})};return o.jsxs("form",{className:"studio-shell",onSubmit:Wx,children:[o.jsxs("section",{className:"studio-sidebar",children:[o.jsxs("div",{className:"studio-panel",children:[o.jsx("header",{className:"studio-panel__header",children:o.jsxs("div",{children:[o.jsx("h3",{children:"AI provider"}),o.jsx("p",{children:"Select which model will lead your next draft."})]})}),o.jsx("div",{className:"studio-provider-list",children:h.map(v=>o.jsxs("button",{type:"button",onClick:()=>j(v.id),className:v.id===p.id?"provider-option provider-option--active":"provider-option",children:[o.jsx("span",{children:v.label}),o.jsx("small",{children:v.defaultModel})]},v.id))}),o.jsxs("div",{className:"studio-provider-credentials",children:[o.jsxs("label",{className:"studio-provider-key",children:[o.jsx("span",{children:"API key"}),o.jsx("input",{type:"password",value:vs,onChange:v=>N(p.id,v.target.value),placeholder:"Paste your secret key"}),o.jsxs("small",{children:["Keys stay in your browser. Read provider docs"," ",p.docsUrl&&o.jsx("a",{href:p.docsUrl,target:"_blank",rel:"noreferrer","aria-label":"Open provider documentation",children:o.jsx(xN,{size:14,"aria-hidden":"true"})})]})]}),p.models.length>0&&o.jsxs("label",{className:"studio-provider-model",children:[o.jsx("span",{children:"Model"}),o.jsx("select",{value:y,onChange:v=>A(p.id,v.target.value),children:p.models.map(v=>o.jsx("option",{value:v,children:v},v))}),o.jsx("small",{children:"Switch models if your account lacks access to the default."})]})]})]}),o.jsx(JN,{metadata:E,onChange:T}),o.jsx(ZN,{currentPrompt:M,metadata:E,selectedModel:y,recipes:d,onSaveRecipe:Ax,onApplyRecipe:Px,onRemixRecipe:Tx,onDeleteRecipe:Ex,onShareRecipe:_x}),o.jsx(sA,{entries:nt,warnings:Za,onCreate:Rx,onUpdate:Mx,onDelete:Lx,onQuickAdd:Dx}),o.jsxs("div",{className:"studio-panel",children:[o.jsx("header",{className:"studio-panel__header",children:o.jsxs("div",{children:[o.jsx("h3",{children:"Draft analytics"}),o.jsx("p",{children:"Monitor generation costs and word counts at a glance."})]})}),o.jsxs("div",{className:"insight-grid",children:[o.jsxs("article",{children:[o.jsx("span",{className:"insight-label",children:"Current tokens"}),o.jsx("strong",{children:Ar(E)}),o.jsx("small",{children:"Target budget based on story length"})]}),o.jsxs("article",{children:[o.jsx("span",{className:"insight-label",children:"Word count"}),o.jsx("strong",{children:$i.toLocaleString()}),o.jsx("small",{children:$i>0?`${Math.round($i/Math.max(Ar(E)/4,1)*100)}% of plan`:"Draft not generated yet"})]}),o.jsxs("article",{children:[o.jsx("span",{className:"insight-label",children:"Experiments"}),o.jsx("strong",{children:rh}),o.jsxs("small",{children:[sh," recorded winners"]})]})]}),o.jsxs("div",{className:"cost-table",children:[o.jsxs("header",{children:[o.jsx("span",{children:"Provider"}),o.jsx("span",{children:"Model"}),o.jsx("span",{children:"Est. cost"})]}),h.map(v=>{const _=P[v.id]??v.defaultModel,L=Pm(v.id,Ar(E));return o.jsxs("div",{children:[o.jsx("span",{children:v.label}),o.jsx("span",{children:_}),o.jsxs("span",{children:["$",L.toFixed(3)]})]},v.id)})]})]}),o.jsxs("div",{className:"studio-panel",children:[o.jsx("header",{className:"studio-panel__header",children:o.jsxs("div",{children:[o.jsx("h3",{children:"Provider health check"}),o.jsx("p",{children:"Ensure your keys and models are ready before you generate."})]})}),o.jsx("ul",{className:"panel-list",children:h.map(v=>{const _=!!x[v.id],L=P[v.id]??v.defaultModel,z=v.models.includes(L)?"Model available":"Model not in preset list";return o.jsxs("li",{children:[o.jsxs("div",{children:[o.jsx("strong",{children:v.label}),o.jsx("small",{children:_?"Key stored":"Key missing"})]}),o.jsx("p",{children:z})]},v.id)})})]}),o.jsxs("div",{className:"studio-panel",children:[o.jsx("header",{className:"studio-panel__header",children:o.jsxs("div",{children:[o.jsx("h3",{children:"Draft checkpoints"}),o.jsx("p",{children:"Upcoming steps to keep your workflow moving forward."})]})}),o.jsxs("ul",{className:"panel-list",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Run a fresh comparison"}),o.jsx("p",{children:"Pick a new pair of models to see how they adapt to your latest edits."})]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Request feedback"}),o.jsx("p",{children:"Pull a flow or dialogue pass to stress-test pacing and voice."})]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Update prompt palette"}),o.jsx("p",{children:"Add the current setup to your palette so you can reuse it on future chapters."})]})]})]}),o.jsxs("div",{className:"studio-panel",children:[o.jsx("header",{className:"studio-panel__header",children:o.jsxs("div",{children:[o.jsx("h3",{children:"Collaboration notes"}),o.jsx("p",{children:"Jot reminders for co-authors or future edits."})]})}),o.jsx("textarea",{className:"studio-textarea",rows:6,placeholder:"Future edit ideas, co-author notes, open questions",value:(i==null?void 0:i.summary)??"",onChange:v=>Ye(v.target.value)}),o.jsx("p",{className:"studio-output__placeholder",children:"Notes save with your draft so you can revisit them later."})]})]}),o.jsxs("section",{className:"studio-main",children:[o.jsx(B.div,{initial:{opacity:0,y:18},animate:{opacity:1,y:0},transition:{delay:.04},children:o.jsx(tA,{metadata:E,providers:h,modelSelections:P,apiKeys:x,selectedProviderId:p.id,selectedModel:y,experiments:Kn,workingExperiment:It,onRun:Fx,onMarkWinner:Bx,onAdopt:zx,error:mx,isRunning:gx})}),o.jsxs(B.div,{className:"studio-panel",initial:{opacity:0,y:18},animate:{opacity:1,y:0},children:[o.jsxs("header",{className:"studio-panel__header",children:[o.jsxs("div",{children:[o.jsx("h3",{children:"Story prompt"}),o.jsx("p",{children:"Explain the scene, stakes, and stylistic anchors for the AI writers."})]}),o.jsxs("button",{type:"submit",className:"primary-button",disabled:O,children:[o.jsx(pu,{size:18})," ",O?"Working...":"Generate story"]})]}),o.jsx("textarea",{className:"studio-textarea",value:M,onChange:v=>D(v.target.value),placeholder:"Describe the story you want to tell...",rows:10}),W&&o.jsx("div",{className:"notice notice--error",children:W})]}),o.jsxs(B.div,{className:"studio-panel",initial:{opacity:0,y:18},animate:{opacity:1,y:0},transition:{delay:.08},children:[o.jsx("header",{className:"studio-panel__header",children:o.jsxs("div",{children:[o.jsx("h3",{children:"Feedback passes"}),o.jsx("p",{children:"Invite a model to critique and refine the current draft."})]})}),o.jsxs("div",{className:"studio-feedback-controls",children:[o.jsx("div",{className:"chip-group",children:["grammar","dialogue","flow","custom"].map(v=>o.jsx("button",{type:"button",className:X===v?"chip chip--active":"chip",onClick:()=>Qe(v),children:v==="custom"?"Custom":v.charAt(0).toUpperCase()+v.slice(1)},v))}),wx&&o.jsx("textarea",{className:"studio-textarea",rows:3,value:ke,onChange:v=>Ct(v.target.value),placeholder:"Describe the feedback you want (e.g., tighten the ending, amplify tension)."}),o.jsxs("div",{className:"studio-feedback-actions",children:[o.jsxs("button",{type:"button",className:"ghost-button",disabled:Dt!==null,onClick:uh,children:[o.jsx(qf,{size:16}),Dt==="general"?"Analysing...":"Request feedback"]}),o.jsxs("button",{type:"button",className:"ghost-button",disabled:Dt!==null,onClick:Kx,children:[o.jsx(uN,{size:16}),Dt==="dialogue"?"Polishing...":"Improve dialogue"]})]}),o.jsxs("p",{className:"studio-feedback-note",children:["Focus: ",ah]}),Le&&o.jsx("div",{className:"notice notice--error",children:Le})]})]}),o.jsxs(B.div,{className:"studio-panel studio-panel--tall",initial:{opacity:0,y:18},animate:{opacity:1,y:0},transition:{delay:.16},children:[o.jsxs("header",{className:"studio-panel__header",children:[o.jsxs("div",{children:[o.jsx("h3",{children:"Story output"}),o.jsx("p",{children:"See generations and apply revisions inline."})]}),o.jsxs("div",{className:"studio-output-actions",children:[o.jsxs("button",{type:"button",className:"ghost-button",onClick:Sx,disabled:!mn,children:[o.jsx(du,{size:16})," Copy"]}),o.jsxs("button",{type:"button",className:"ghost-button",onClick:jx,disabled:!mn,children:[o.jsx(vN,{size:16})," Download"]})]})]}),o.jsx("div",{className:"studio-output",children:O?o.jsx(iA,{lines:10}):mn?o.jsxs("article",{children:[o.jsx("h2",{children:i==null?void 0:i.metadata.title}),o.jsx("pre",{children:mn})]}):o.jsx("p",{className:"studio-output__placeholder",children:"Your story will appear here once you generate a draft."})})]}),o.jsxs(B.div,{className:"studio-panel",initial:{opacity:0,y:18},animate:{opacity:1,y:0},transition:{delay:.22},children:[o.jsx("header",{className:"studio-panel__header",children:o.jsxs("div",{children:[o.jsx("h3",{children:"Feedback threads"}),o.jsx("p",{children:"Track critiques and revision suggestions from your AI editors."})]})}),(hh=i==null?void 0:i.feedbackThreads)!=null&&hh.length?o.jsx("div",{className:"feedback-thread-list",children:i.feedbackThreads.map(v=>o.jsxs("article",{className:"feedback-thread",children:[o.jsxs("header",{children:[o.jsxs("span",{className:"feedback-thread__provider",children:[o.jsx(ni,{size:14})," ",v.provider]}),o.jsx("time",{children:new Date(v.createdAt).toLocaleTimeString()})]}),o.jsxs("p",{className:"feedback-thread__focus",children:["Focus: ",v.focus.charAt(0).toUpperCase()+v.focus.slice(1)]}),o.jsx("pre",{children:v.response})]},v.id))}):o.jsx("p",{className:"studio-output__placeholder",children:"Request feedback to see critiques and action items here."})]}),o.jsxs(B.div,{className:"studio-panel",initial:{opacity:0,y:18},animate:{opacity:1,y:0},transition:{delay:.28},children:[o.jsxs("header",{className:"studio-panel__header",children:[o.jsxs("div",{children:[o.jsx("h3",{children:"Sensory passes"}),o.jsx("p",{children:"One-click style passes that keep your original draft intact."})]}),jr&&o.jsx(ma,{className:"spin",size:16})]}),o.jsx("div",{className:"sensory-pass-actions",children:Object.keys(Jn).map(v=>{const _=Jn[v],L=jr===v;return o.jsxs("button",{type:"button",className:"ghost-button",disabled:L||O,onClick:()=>Ix(v),children:[L?o.jsx(ma,{className:"spin",size:14}):o.jsx(ni,{size:14})," ",_.label]},v)})}),o.jsx("p",{className:"sensory-pass-hint",children:"Pick a pass to inject focused improvements without overwriting the existing prose."}),R&&o.jsx("div",{className:"notice notice--error",children:R}),o.jsx("div",{className:"sensory-pass-list",children:Sr.length===0?o.jsx("p",{className:"studio-output__placeholder",children:"Run a pass to see targeted revisions here."}):Sr.map(v=>{const _=Jn[v.kind];return o.jsxs("article",{className:"sensory-pass-card",children:[o.jsxs("header",{children:[o.jsxs("div",{children:[o.jsx("strong",{children:_.label}),o.jsx("small",{children:_.description})]}),o.jsx("time",{children:new Date(v.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),o.jsx("pre",{className:"sensory-pass-card__body",children:v.response}),o.jsxs("div",{className:"sensory-pass-card__actions",children:[o.jsxs("button",{type:"button",className:"ghost-button",onClick:()=>Ox(v),children:[o.jsx(du,{size:14})," Copy"]}),o.jsxs("button",{type:"button",className:"ghost-button",onClick:()=>Vx(v),children:[o.jsx(ni,{size:14})," Append"]})]})]},v.id)})})]}),o.jsxs(B.div,{className:"studio-panel",initial:{opacity:0,y:18},animate:{opacity:1,y:0},transition:{delay:.34},children:[o.jsx("header",{className:"studio-panel__header",children:o.jsxs("div",{children:[o.jsx("h3",{children:"Studio insights"}),o.jsx("p",{children:"Snapshot of this draft's momentum and recent activity."})]})}),o.jsxs("div",{className:"insight-grid",children:[o.jsxs("article",{children:[o.jsx("span",{className:"insight-label",children:"Words in draft"}),o.jsx("strong",{children:$i.toLocaleString()})]}),o.jsxs("article",{children:[o.jsx("span",{className:"insight-label",children:"Experiments"}),o.jsx("strong",{children:rh}),o.jsxs("small",{children:[sh," marked as winners"]})]}),o.jsxs("article",{children:[o.jsx("span",{className:"insight-label",children:"Feedback threads"}),o.jsx("strong",{children:((ph=i==null?void 0:i.feedbackThreads)==null?void 0:ph.length)??0}),o.jsx("small",{children:Gn?yn(new Date(Gn.createdAt)):"No feedback yet"})]}),o.jsxs("article",{children:[o.jsx("span",{className:"insight-label",children:"Sensory passes"}),o.jsx("strong",{children:Sr.length}),o.jsx("small",{children:Yn?yn(new Date(Yn.createdAt)):"No passes run"})]}),o.jsxs("article",{children:[o.jsx("span",{className:"insight-label",children:"Last generation"}),o.jsx("strong",{children:xs?yn(xs):"Not yet generated"}),o.jsxs("small",{children:["Token budget  ",Ar(E)]})]})]}),Ja&&o.jsxs("section",{className:"insight-detail",children:[o.jsxs("header",{children:[o.jsx("h4",{children:"Latest comparison"}),o.jsx("span",{children:yn(new Date(Ja.createdAt))})]}),o.jsx("ul",{children:Ja.variants.map(v=>o.jsxs("li",{children:[o.jsx("strong",{children:v.providerLabel}),"  ",v.model,o.jsx("small",{children:v.status==="success"?`${v.tokensUsed??v.estimatedTokens} tokens`:v.status==="error"?v.error??"Failed":"Pending"})]},v.id))})]})]}),o.jsxs(B.div,{className:"studio-panel",initial:{opacity:0,y:18},animate:{opacity:1,y:0},transition:{delay:.4},children:[o.jsx("header",{className:"studio-panel__header",children:o.jsxs("div",{children:[o.jsx("h3",{children:"Activity timeline"}),o.jsx("p",{children:"Track the latest comparisons, feedback, and sensory tweaks."})]})}),o.jsx("div",{className:"timeline-list",children:ih.length===0?o.jsx("p",{className:"studio-output__placeholder",children:"Run a comparison, request feedback, or trigger a sensory pass to see activity here."}):ih.map(v=>o.jsxs("article",{className:`timeline-item timeline-item--${v.type}`,children:[o.jsxs("div",{className:"timeline-item__meta",children:[o.jsx("span",{className:"timeline-item__title",children:v.title}),o.jsx("time",{children:yn(v.timestamp)})]}),o.jsx("p",{children:v.detail})]},v.id))})]}),o.jsxs(B.div,{className:"studio-panel",initial:{opacity:0,y:18},animate:{opacity:1,y:0},transition:{delay:.46},children:[o.jsx("header",{className:"studio-panel__header",children:o.jsxs("div",{children:[o.jsx("h3",{children:"Prompt palette overview"}),o.jsx("p",{children:"Resurface your favourite recipes and see trending tags."})]})}),Xa.length===0?o.jsx("p",{className:"studio-output__placeholder",children:"Save a prompt to start building your palette."}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"insight-grid",children:[o.jsxs("article",{children:[o.jsx("span",{className:"insight-label",children:"Recipes saved"}),o.jsx("strong",{children:Xa.length})]}),o.jsxs("article",{children:[o.jsx("span",{className:"insight-label",children:"Top tag"}),kr.length?o.jsx("strong",{children:kr[0][0]}):o.jsx("strong",{children:""}),o.jsx("small",{children:kr.length?`${kr[0][1]} uses`:"Tag recipes to keep them organised"})]})]}),kr.length>0&&o.jsx("div",{className:"tag-cloud",children:kr.map(([v,_])=>o.jsxs("span",{className:"tag-chip",children:[v,"  ",_]},v))}),o.jsx("ul",{className:"panel-list",children:Xa.slice(0,4).map(v=>o.jsxs("li",{children:[o.jsxs("div",{children:[o.jsx("strong",{children:v.title}),o.jsx("small",{children:yn(new Date(v.updatedAt))})]}),o.jsxs("p",{children:[v.toneNotes||v.prompt.slice(0,120),v.prompt.length>120?"":""]})]},v.id))})]})]}),o.jsxs(B.div,{className:"studio-panel",initial:{opacity:0,y:18},animate:{opacity:1,y:0},transition:{delay:.52},children:[o.jsx("header",{className:"studio-panel__header",children:o.jsxs("div",{children:[o.jsx("h3",{children:"Continuity snapshot"}),o.jsx("p",{children:"Keep track of characters, plot threads, and world rules."})]})}),o.jsxs("div",{className:"insight-grid",children:[o.jsxs("article",{children:[o.jsx("span",{className:"insight-label",children:"Characters"}),o.jsx("strong",{children:qa.character})]}),o.jsxs("article",{children:[o.jsx("span",{className:"insight-label",children:"Plot threads"}),o.jsx("strong",{children:qa.plot})]}),o.jsxs("article",{children:[o.jsx("span",{className:"insight-label",children:"World facts"}),o.jsx("strong",{children:qa.world})]}),o.jsxs("article",{children:[o.jsx("span",{className:"insight-label",children:"Warnings"}),o.jsx("strong",{children:Za.length}),o.jsx("small",{children:Za.length?"Resolve continuity gaps":"All clear"})]})]}),o.jsxs("ul",{className:"panel-list",children:[nt.slice(0,4).map(v=>o.jsxs("li",{children:[o.jsxs("div",{children:[o.jsx("strong",{children:v.label}),o.jsx("small",{children:v.type})]}),o.jsx("p",{children:v.summary||"No summary yet."})]},v.id)),nt.length===0&&o.jsx("li",{children:o.jsx("p",{className:"studio-output__placeholder",children:"Capture key characters and world notes in the Continuity Coach sidebar."})})]})]}),o.jsxs(B.div,{className:"studio-panel",initial:{opacity:0,y:18},animate:{opacity:1,y:0},transition:{delay:.58},children:[o.jsx("header",{className:"studio-panel__header",children:o.jsxs("div",{children:[o.jsx("h3",{children:"Generation playbook"}),o.jsx("p",{children:"Quick reminders to keep drafts sharp and consistent."})]})}),o.jsxs("ul",{className:"panel-list",children:[o.jsxs("li",{children:[o.jsx("strong",{children:"Cross-check POV"}),o.jsx("p",{children:"Ensure the prompt, continuity notes, and latest generation share the same perspective to avoid voice drift."})]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Compare models after major edits"}),o.jsx("p",{children:"Run an A/B pass on the current paragraph to see which provider keeps tone and pacing closest to your intent."})]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Layer sensory passes sparingly"}),o.jsx("p",{children:"Append the suggested rewrite, then blend it with your draft instead of replacing everything wholesale."})]}),o.jsxs("li",{children:[o.jsx("strong",{children:"Refresh prompt palette tags"}),o.jsx("p",{children:"Group related recipes with matching tags so you can stack experiments quickly for each genre."})]})]})]}),o.jsxs(B.div,{className:"studio-panel",initial:{opacity:0,y:18},animate:{opacity:1,y:0},transition:{delay:.64},children:[o.jsx("header",{className:"studio-panel__header",children:o.jsxs("div",{children:[o.jsx("h3",{children:"Workspace shortcuts"}),o.jsx("p",{children:"Speed through the studio with these handy keys."})]})}),o.jsxs("ul",{className:"shortcut-list",children:[o.jsxs("li",{children:[o.jsx("kbd",{children:"Alt"})," + ",o.jsx("kbd",{children:"D"}),"  Toggle debug console"]}),o.jsxs("li",{children:[o.jsx("kbd",{children:"Ctrl"})," + ",o.jsx("kbd",{children:"Enter"}),"  Run story generation"]}),o.jsxs("li",{children:[o.jsx("kbd",{children:"Shift"})," + ",o.jsx("kbd",{children:"Enter"}),"  Request feedback"]}),o.jsxs("li",{children:[o.jsx("kbd",{children:"Ctrl"})," + ",o.jsx("kbd",{children:"S"}),"  Save prompt recipe"]}),o.jsxs("li",{children:[o.jsx("kbd",{children:"Ctrl"})," + ",o.jsx("kbd",{children:"L"}),"  Focus story library search"]})]}),o.jsx("p",{className:"studio-output__placeholder",children:"Customize shortcuts in Settings  Keyboard if you need a different layout."})]}),o.jsxs(B.div,{className:"studio-panel memory-panel",initial:{opacity:0,y:18},animate:{opacity:1,y:0},transition:{delay:.7},children:[o.jsx("header",{className:"studio-panel__header",children:o.jsxs("div",{children:[o.jsx("h3",{children:"Story memory"}),o.jsx("p",{children:"Search earlier drafts and continue them in real time."})]})}),o.jsxs("label",{children:[o.jsx("span",{children:"Search by title"}),o.jsx("input",{type:"text",value:Xe,onChange:v=>fn(v.target.value),placeholder:"e.g., Bob's Job"})]}),Xe.trim()?oh.length?o.jsx("ul",{className:"memory-result-list",children:oh.map(v=>o.jsxs("li",{children:[o.jsxs("div",{children:[o.jsx("strong",{children:v.metadata.title}),o.jsx("span",{children:v.summary?v.summary:v.metadata.genre})]}),o.jsx("button",{type:"button",className:"ghost-button",onClick:()=>Ux(v.id),children:"Continue"})]},v.id))}):o.jsx("p",{className:"memory-hint",children:"No drafts matched that title."}):o.jsx("p",{className:"memory-hint",children:"Type a title to locate earlier drafts."}),Hn&&Z===Hn&&o.jsxs("div",{className:"memory-editor",children:[o.jsxs("header",{children:[o.jsxs("h4",{children:['Continuing "',i==null?void 0:i.metadata.title,'"']}),o.jsx("button",{type:"button",className:"ghost-button",onClick:$x,children:"Done"})]}),o.jsx("textarea",{value:Bi,onChange:v=>Ya(v.target.value),rows:4,placeholder:"Add new beats or revisions  updates apply live."})]})]}),o.jsxs(B.div,{className:"studio-panel publish-panel",initial:{opacity:0,y:18},animate:{opacity:1,y:0},transition:{delay:.76},children:[o.jsx("header",{className:"studio-panel__header",children:o.jsxs("div",{children:[o.jsx("h3",{children:"Publish & share"}),o.jsx("p",{children:"Summarize your story, tag it, and make it discoverable."})]})}),o.jsxs("div",{className:"cover-builder",children:[o.jsxs("div",{className:"cover-builder__header",children:[o.jsx("span",{children:"Cover gallery (optional)"}),o.jsx("button",{type:"button",className:"ghost-button",onClick:bx,children:"Generate set"})]}),o.jsx("div",{className:"cover-style-chip-row",children:nr.map(v=>o.jsx("button",{type:"button",className:"cover-style-chip",onClick:()=>kx(v.id),children:v.label},v.id))}),De.length?o.jsx("div",{className:"cover-variant-grid",children:De.map(v=>{const _=nr.find(ee=>ee.id===v.styleId),L=(_==null?void 0:_.label)??"Uploaded",z=V?v.id===V:De[De.length-1].id===v.id;return o.jsxs("figure",{className:z?"cover-thumb cover-thumb--active":"cover-thumb",children:[o.jsx("button",{type:"button",onClick:()=>K(v.id),children:o.jsx("img",{src:v.src,alt:L})}),o.jsxs("figcaption",{children:[o.jsx("span",{children:L}),o.jsx("button",{type:"button",onClick:()=>Nx(v.id),children:"Remove"})]})]},v.id)})}):o.jsx("p",{className:"cover-empty",children:"No cover yet. Generate a preset or upload your own art."}),o.jsxs("div",{className:"cover-upload-row",children:[o.jsxs("label",{className:"ghost-button cover-upload",children:["Upload image",o.jsx("input",{type:"file",accept:"image/*",onChange:v=>{var L;const _=(L=v.target.files)==null?void 0:L[0];_&&Cx(_)}})]}),De.length>0&&o.jsx("button",{type:"button",className:"ghost-button",onClick:()=>{hn([]),K(null)},children:"Clear all"})]})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Short description"}),o.jsx("textarea",{rows:3,value:$,onChange:v=>Ye(v.target.value),placeholder:"Give readers a hook before they dive in."})]}),o.jsxs("label",{children:[o.jsx("span",{children:"Tags (comma separated)"}),o.jsx("input",{type:"text",value:Se,onChange:v=>q(v.target.value),placeholder:"#fantasy, #foundfamily"})]}),dn&&o.jsx("div",{className:"notice notice--error",children:dn}),o.jsxs("button",{type:"button",className:"primary-button",onClick:Hx,disabled:xr,children:[o.jsx(_N,{size:16})," ",xr?"Publishing...":"Publish story"]})]}),o.jsxs(B.div,{className:"studio-panel",initial:{opacity:0,y:18},animate:{opacity:1,y:0},transition:{delay:.82},children:[o.jsx("header",{className:"studio-panel__header",children:o.jsxs("div",{children:[o.jsx("h3",{children:"Recent drafts"}),o.jsx("p",{children:"Jump back to iterate on earlier branches."})]})}),o.jsx("div",{className:"studio-draft-list",children:s.slice(0,6).map(v=>o.jsxs("button",{type:"button",className:v.id===(i==null?void 0:i.id)?"draft-card draft-card--active":"draft-card",onClick:()=>c(v.id),children:[o.jsx("strong",{children:v.metadata.title}),o.jsx("span",{children:new Date(v.updatedAt??v.generatedAt??Date.now()).toLocaleString()})]},v.id))})]}),o.jsxs(B.div,{className:"studio-panel",initial:{opacity:0,y:18},animate:{opacity:1,y:0},transition:{delay:.88},children:[o.jsx("header",{className:"studio-panel__header",children:o.jsxs("div",{children:[o.jsx("h3",{children:"Scene checklist"}),o.jsx("p",{children:"Quickly see which publishing tasks are already covered."})]})}),o.jsx("ul",{className:"panel-list",children:vx.map(v=>o.jsxs("li",{children:[o.jsxs("div",{children:[o.jsx("strong",{children:v.label}),o.jsx("span",{className:v.done?"status-pill status-pill--done":"status-pill status-pill--todo",children:v.done?"Done":"To do"})]}),o.jsx("p",{children:v.detail})]},v.id))})]}),o.jsxs(B.div,{className:"studio-panel",initial:{opacity:0,y:18},animate:{opacity:1,y:0},transition:{delay:.94},children:[o.jsx("header",{className:"studio-panel__header",children:o.jsxs("div",{children:[o.jsx("h3",{children:"Creative spark"}),o.jsx("p",{children:"Use these mini prompts to punch up the current scene."})]})}),o.jsx("ul",{className:"panel-list",children:xx.map(v=>o.jsxs("li",{children:[o.jsx("div",{children:o.jsx("strong",{children:v.title})}),o.jsx("p",{children:v.body})]},v.id))})]})]}),o.jsxs("div",{className:"studio-sticky-bar",children:[o.jsxs("button",{type:"submit",className:"primary-button",disabled:O,children:[o.jsx(pu,{size:16})," ",O?"Working...":"Generate"]}),o.jsxs("button",{type:"button",className:"ghost-button",disabled:Dt!==null||!(i!=null&&i.content),onClick:uh,children:[o.jsx(qf,{size:16})," ",Dt?"Processing...":"Feedback"]})]})]})}function WA({story:e,averageRating:t}){var b,w,k;const{user:n,toggleSubscription:r}=Ge(),{deleteStory:s,toggleStoryLike:i}=gs(),a=e.reviews.length,l=((b=e.likeUserIds)==null?void 0:b.length)??0,c=n?((w=e.likeUserIds)==null?void 0:w.includes(n.id))??!1:!1,u=!!n&&n.id!==e.authorId,d=!!((k=n==null?void 0:n.subscriptions)!=null&&k.includes(e.authorId)),f=()=>{if(!(n!=null&&n.isDev))return;window.confirm("Delete this story? This cannot be undone.")&&s(e.id)},m=()=>{if(!n){window.alert("Log in or create an account to like stories and lift them to the top.");return}i(e.id,n.id)},S=()=>{if(!n){window.alert("Create an account to follow your favourite storytellers.");return}r(e.authorId)};return o.jsxs(B.article,{className:"glass-card published-story-card",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0,amount:.4},transition:{duration:.4},children:[o.jsxs("header",{children:[o.jsx("h3",{children:e.metadata.title}),o.jsx("p",{children:e.summary})]}),o.jsxs("ul",{className:"story-tag-list",children:[[e.metadata.genre,e.metadata.tone,e.metadata.perspective].filter(Boolean).slice(0,3).map(h=>o.jsx("li",{children:h},h)),e.tags.map(h=>o.jsx("li",{children:h},h))]}),o.jsxs("footer",{children:[o.jsxs("div",{className:"story-card-insights",children:[o.jsxs("div",{className:"story-card-meta",children:[o.jsx("span",{children:new Date(e.publishedAt).toLocaleDateString()}),o.jsxs("span",{className:"story-rating",children:[o.jsx(D0,{size:14})," ",t.toFixed(1)," (",a,")"]})]}),o.jsxs("button",{type:"button",className:`ghost-button story-like-button${c?" is-liked":""}`,onClick:m,"aria-pressed":c,title:c?"Unlike this story":"Like this story",children:[o.jsx(Wa,{size:14}),o.jsx("span",{children:l})]})]}),o.jsxs("div",{className:"story-card-actions",children:[u&&o.jsxs("button",{type:"button",className:`ghost-button story-subscribe-button${d?" is-subscribed":""}`,onClick:S,"aria-pressed":d,title:d?"Unfollow author":"Follow this author",children:[d?o.jsx(I0,{size:14}):o.jsx(O0,{size:14}),o.jsx("span",{children:d?"Following":"Follow author"})]}),o.jsxs(Be,{to:`/stories/${e.id}`,className:"ghost-button",children:["Read story ",o.jsx(fa,{size:14})]}),(n==null?void 0:n.isDev)&&o.jsxs("button",{type:"button",className:"ghost-button",onClick:f,title:"Delete story",children:[o.jsx(Oi,{size:14})," Delete"]})]})]})]})}const Tm=["linear-gradient(135deg, #1d976c, #93f9b9)","linear-gradient(135deg, #654ea3, #eaafc8)","linear-gradient(135deg, #ff512f, #dd2476)","linear-gradient(135deg, #3a7bd5, #3a6073)"];function HA({stories:e}){return e.length?o.jsx("div",{className:"featured-gallery",children:e.map((t,n)=>{var c,u,d;const r=((c=t.coverGallery)==null?void 0:c[0])??t.coverImage,s=((u=t.likeUserIds)==null?void 0:u.length)??0,i=((d=t.summary)==null?void 0:d.trim())||t.content.split(/\n+/).find(Boolean)||"",a=i?`${i.slice(0,160)}${i.length>160?"":""}`:"",l=r?`linear-gradient(135deg, rgba(10, 8, 30, 0.12), rgba(10, 8, 30, 0.68)), url("${r}")`:Tm[n%Tm.length];return o.jsx(B.article,{className:"featured-gallery__card",style:{backgroundImage:l},initial:{opacity:0,y:24},whileInView:{opacity:1,y:0},whileHover:{y:-6,scale:1.01},transition:{duration:.45},viewport:{once:!0,amount:.3},children:o.jsxs("div",{className:"featured-gallery__overlay",children:[o.jsxs("span",{className:"featured-gallery__eyebrow",children:["#",n+1," spotlight"]}),o.jsx("h3",{children:t.metadata.title}),a&&o.jsx("p",{children:a}),o.jsxs("div",{className:"featured-gallery__meta",children:[o.jsxs("span",{children:["By ",t.authorName]}),o.jsxs("span",{children:[o.jsx(Wa,{size:14})," ",s]})]}),o.jsxs("ul",{className:"featured-gallery__tags",children:[[t.metadata.genre,t.metadata.tone].filter(Boolean).slice(0,2).map(f=>o.jsx("li",{children:f},f)),t.tags.slice(0,2).map(f=>o.jsx("li",{children:f},f))]}),o.jsxs(Be,{to:`/stories/${t.id}`,className:"ghost-button featured-gallery__cta",children:["Read now ",o.jsx(fa,{size:14})]})]})},t.id)})}):null}function KA(e,t){return t===0?e:e/t}function GA(){const{stories:e,getRandomStory:t}=gs(),{achievements:n,collections:r,createCollection:s,stats:i}=eh(),{user:a}=Ge(),l=$n(),[c,u]=g.useState(""),[d,f]=g.useState(null),m=g.useMemo(()=>e.slice().sort((h,p)=>{var j,x;const y=(((j=p.likeUserIds)==null?void 0:j.length)??0)-(((x=h.likeUserIds)==null?void 0:x.length)??0);return y!==0?y:new Date(p.publishedAt).getTime()-new Date(h.publishedAt).getTime()}),[e]),S=g.useMemo(()=>m.slice(0,4),[m]),b=g.useMemo(()=>m.map(h=>{const p=h.reviews.reduce((j,x)=>(j.total+=x.rating,j),{total:0}),y=h.reviews.length?KA(p.total,h.reviews.length):0;return{story:h,avg:y}}),[m]),w=()=>{if(f(null),!a){f("Log in to create collections.");return}if(!c.trim()){f("Choose a name before creating a collection.");return}const h=s(c.trim());h&&(u(""),f(`Collection "${h.name}" is ready for stories.`))},k=()=>{const h=t();if(!h){window.alert("No published stories yet. Be the first to contribute!");return}l(`/stories/${h.id}`)};return o.jsxs("div",{className:"library-page",children:[o.jsxs("section",{className:"library-hero",children:[o.jsxs(B.div,{className:"library-hero__content",initial:{opacity:0,y:36},animate:{opacity:1,y:0},transition:{duration:.6},children:[o.jsx("span",{className:"library-hero__eyebrow",children:"Community bookshelf"}),o.jsx("h1",{children:"Published stories from Dreamscribe writers"}),o.jsx("p",{children:"Explore narratives crafted with multi-model collaboration. Rate your favorites, leave thoughtful feedback, and follow the creative process from prompt to polish."}),o.jsxs("div",{className:"library-hero__cta",children:[o.jsx(Be,{to:"/studio",className:"primary-button",children:"Publish your own"}),o.jsx("a",{className:"ghost-button",href:"#stories",children:"Browse collection"}),o.jsxs("button",{type:"button",className:"ghost-button",onClick:k,disabled:!e.length,children:[o.jsx(hu,{size:16})," Surprise me"]})]})]}),o.jsx(B.div,{className:"library-hero__glow",initial:{opacity:0},animate:{opacity:1},transition:{delay:.2,duration:.8}})]}),S.length>0&&o.jsxs("section",{className:"section-shell library-featured",id:"spotlight",children:[o.jsxs("header",{className:"library-section__header",children:[o.jsxs("div",{children:[o.jsx("h2",{children:"Spotlight stories"}),o.jsx("p",{children:'The most loved tales rise here ?" powered by reader likes.'})]}),o.jsxs("button",{type:"button",className:"ghost-button",onClick:k,children:[o.jsx(hu,{size:16})," Random story"]})]}),o.jsx(HA,{stories:S})]}),a&&o.jsxs("section",{className:"section-shell library-dashboard",children:[o.jsxs("div",{className:"library-dashboard__column",children:[o.jsx("h2",{children:"Your achievements"}),o.jsxs("p",{className:"library-dashboard__meta",children:["Published ",i.publishedStoryIds.length," story",i.publishedStoryIds.length===1?"":"ies",", received ",i.reviewsReceived," review",i.reviewsReceived===1?"":"s",", wrote ",i.reviewsWritten," review",i.reviewsWritten===1?"":"s","."]}),n.length?o.jsx("ul",{className:"achievement-list",children:n.slice().sort((h,p)=>h.unlockedAt<p.unlockedAt?1:-1).map(h=>o.jsxs("li",{children:[o.jsx("strong",{children:h.title}),o.jsx("span",{children:h.description}),o.jsx("time",{children:new Date(h.unlockedAt).toLocaleDateString()})]},h.id))}):o.jsx("p",{className:"studio-output__placeholder",children:"Unlock your first badge by publishing a story or leaving a review."})]}),o.jsxs("div",{className:"library-dashboard__column",children:[o.jsx("h2",{children:"Your collections"}),o.jsxs("div",{className:"library-dashboard__actions",children:[o.jsx("input",{type:"text",value:c,onChange:h=>u(h.target.value),placeholder:"New collection name"}),o.jsx("button",{type:"button",className:"ghost-button",onClick:w,children:"Create"})]}),d&&o.jsx("div",{className:"notice notice--muted",children:d}),r.length?o.jsx("ul",{className:"collection-list",children:r.map(h=>o.jsxs("li",{children:[o.jsxs("div",{children:[o.jsx("strong",{children:h.name}),o.jsxs("span",{children:[h.stories.length," story",h.stories.length===1?"":"ies"]})]}),h.stories.length>0&&o.jsxs("div",{className:"collection-list__stories",children:[h.stories.slice(0,3).map(p=>o.jsx("span",{children:p.title},p.id)),h.stories.length>3&&o.jsxs("span",{children:["+",h.stories.length-3," more"]})]})]},h.id))}):o.jsx("p",{className:"studio-output__placeholder",children:"Organize your favourite reads by creating a collection."})]})]}),o.jsxs("section",{className:"section-shell",id:"stories",children:[o.jsxs("header",{className:"library-section__header",children:[o.jsx("h2",{children:"Trending now"}),o.jsx("p",{children:"Stories float to the top as likes pour in. Discover what the community is rallying behind."})]}),o.jsx("div",{className:"library-grid",children:b.length===0?o.jsx("p",{className:"studio-output__placeholder",children:"No stories have been published yet. Share yours from the studio once you are ready!"}):b.map(({story:h,avg:p})=>o.jsx(WA,{story:h,averageRating:p},h.id))})]})]})}function ix(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=ix(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Jr(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=ix(e))&&(r&&(r+=" "),r+=t);return r}function vu({value:e,onChange:t,size:n=18,readOnly:r=!1}){const s=g.useMemo(()=>[1,2,3,4,5],[]);return o.jsx("div",{className:"rating-stars",children:s.map(i=>{const a=e>=i;return o.jsx("button",{type:"button",className:Jr("rating-star",a&&"rating-star--active",r&&"rating-star--readonly"),onClick:()=>!r&&(t==null?void 0:t(i)),"aria-label":r?void 0:`Select ${i} star${i>1?"s":""}`,disabled:r,children:o.jsx(D0,{size:n})},i)})})}function YA({reviews:e,canModerate:t=!1,onDelete:n}){return e.length===0?o.jsx("p",{className:"studio-output__placeholder",children:"No reviews yet. Be the first to respond."}):o.jsx("div",{className:"review-list",children:e.map(r=>o.jsxs("article",{className:"review-card",children:[o.jsxs("header",{children:[o.jsx("strong",{children:r.reviewerName}),o.jsx("span",{children:new Date(r.createdAt).toLocaleString()})]}),o.jsx(vu,{value:r.rating,size:16,readOnly:!0}),o.jsx("p",{children:r.comment}),t&&o.jsx("div",{children:o.jsx("button",{type:"button",className:"ghost-button",onClick:()=>n==null?void 0:n(r.id),children:"Delete"})})]},r.id))})}function QA(){var pn,R,H;const e=eS(),t=$n(),{getStoryById:n,addReview:r,deleteStory:s,deleteReview:i,toggleStoryLike:a,getRandomStory:l}=gs(),{recordLog:c}=Zd(),u=e.storyId?n(e.storyId):void 0,{user:d,toggleSubscription:f}=Ge(),{collections:m,createCollection:S,addStoryToCollection:b,removeStoryFromCollection:w,recordReviewWritten:k,recordReviewReceived:h}=eh(),[p,y]=g.useState(5),[j,x]=g.useState(""),[N,A]=g.useState(null),[P,C]=g.useState(""),[E,T]=g.useState(""),[M,D]=g.useState(null),[$,Ye]=g.useState(0),[Se,q]=g.useState(!1),O=g.useRef(null),U=((pn=u==null?void 0:u.likeUserIds)==null?void 0:pn.length)??0,W=u&&d?((R=u.likeUserIds)==null?void 0:R.includes(d.id))??!1:!1,te=!!(u&&d&&d.id!==u.authorId),X=!!(u&&((H=d==null?void 0:d.subscriptions)!=null&&H.includes(u.authorId))),Qe=g.useMemo(()=>!u||u.reviews.length===0?0:u.reviews.reduce((K,Xe)=>K+Xe.rating,0)/u.reviews.length,[u]),ke=g.useMemo(()=>{var K;return u?(K=u.summary)!=null&&K.trim()?u.summary.trim().slice(0,400):(u.content.split(/\n\n+/).find(Boolean)??u.content).slice(0,400):""},[u]);g.useEffect(()=>{if(!d){T("");return}if(m.length===0){T("");return}m.some(V=>V.id===E)||T(m[0].id)},[m,d,E]),g.useEffect(()=>{Ye(0),typeof window<"u"&&"speechSynthesis"in window&&window.speechSynthesis.cancel(),q(!1)},[u==null?void 0:u.id]),g.useEffect(()=>()=>{typeof window<"u"&&"speechSynthesis"in window&&window.speechSynthesis.cancel()},[]);const Ct=g.useMemo(()=>m.filter(V=>V.stories.some(K=>K.id===(u==null?void 0:u.id))),[m,u==null?void 0:u.id]);if(!u)return o.jsxs("div",{className:"section-shell",children:[o.jsxs("button",{type:"button",className:"ghost-button",onClick:()=>t(-1),children:[o.jsx(Qf,{size:16})," Back"]}),o.jsx("p",{className:"studio-output__placeholder",children:"Story not found."})]});const Le=u.coverImage,Ue=u.coverGallery??(Le?[Le]:[]),Dt=()=>{!(d!=null&&d.isDev)||!window.confirm("Delete this story? This cannot be undone.")||(s(u.id),t("/stories",{replace:!0}))},vr=V=>{if(V.preventDefault(),!j.trim()){A("Please share a few thoughts along with your rating.");return}r({storyId:u.id,reviewerName:(d==null?void 0:d.displayName)??"Guest Reader",rating:p,comment:j.trim()}),d&&(k(u.id),u.authorId===d.id&&h(u.id)),x(""),A(null)},dn=()=>{if(D(null),!d){D("Log in to create collections.");return}if(!P.trim()){D("Choose a name for your collection.");return}const V=S(P.trim());V&&(T(V.id),C(""),D(`Collection "${V.name}" created.`))},dt=()=>{if(u){if(!d){window.alert("Log in to like stories. The most-loved tales rise to the top.");return}a(u.id,d.id)}},xr=()=>{if(!u||!d){window.alert("Sign in to follow authors and get their new releases first.");return}f(u.authorId)},wr=()=>{if(!u)return;const V=l(u.id);if(!V){window.alert("No other published stories yet. Be the first to share one!");return}t(`/stories/${V.id}`)},De=()=>{if(D(null),!d){D("Log in to save stories to collections.");return}if(!E){D("Create or select a collection first.");return}b(E,{id:u.id,title:u.metadata.title,authorName:u.authorName}),D("Added to collection.")},hn=V=>{w(V,u.id)},jr=()=>{if(!ke)return;if(typeof window>"u"||!("speechSynthesis"in window)){alert("Text-to-speech is not supported in this browser.");return}const V=window.speechSynthesis;if(Se){V.cancel(),q(!1);return}const K=new SpeechSynthesisUtterance(ke);K.onend=()=>q(!1),K.onerror=()=>q(!1),K.rate=1,K.pitch=1,V.cancel(),V.speak(K),O.current=K,q(!0)};return o.jsxs("div",{className:"story-detail",children:[o.jsxs("section",{className:"section-shell story-detail__header",children:[o.jsxs("div",{className:"story-detail__header-actions",children:[o.jsxs("button",{type:"button",className:"ghost-button",onClick:()=>t(-1),children:[o.jsx(Qf,{size:16})," Back"]}),(d==null?void 0:d.isDev)&&o.jsxs("button",{type:"button",className:"ghost-button",onClick:Dt,title:"Delete story",children:[o.jsx(Oi,{size:16})," Delete"]})]}),Ue.length>0&&o.jsxs("div",{className:"story-cover-gallery",children:[o.jsx("img",{src:Ue[$],alt:"Story cover"}),Ue.length>1&&o.jsx("div",{className:"story-cover-gallery__thumbs",children:Ue.map((V,K)=>o.jsx("button",{type:"button",className:K===$?"cover-thumb-button cover-thumb-button--active":"cover-thumb-button",onClick:()=>Ye(K),children:o.jsx("img",{src:V,alt:`Cover variant ${K+1}`})},K))})]}),o.jsxs(B.div,{initial:{opacity:0,y:24},animate:{opacity:1,y:0},transition:{duration:.45},children:[o.jsxs("span",{className:"story-detail__meta",children:["By ",u.authorName]}),o.jsx("h1",{children:u.metadata.title}),o.jsxs("div",{className:"story-detail__tags",children:[o.jsx("span",{children:u.metadata.genre}),o.jsx("span",{children:u.metadata.tone}),o.jsx("span",{children:u.metadata.targetLength})]}),o.jsxs("div",{className:"story-detail__ratings",children:[o.jsx(vu,{value:Math.round(Qe),readOnly:!0}),o.jsxs("span",{children:[Qe?Qe.toFixed(1):"No reviews yet"," | ",u.reviews.length," review",u.reviews.length===1?"":"s"]})]}),o.jsx("p",{className:"story-detail__summary",children:u.summary}),ke&&o.jsxs("div",{className:"story-detail__actions",children:[o.jsxs("button",{type:"button",className:"ghost-button",onClick:jr,children:[Se?o.jsx(PN,{size:16}):o.jsx(RN,{size:16})," ",Se?"Stop preview":"Play preview"]}),o.jsxs("button",{type:"button",className:`ghost-button story-detail__like${W?" is-liked":""}`,onClick:dt,"aria-pressed":W,children:[o.jsx(Wa,{size:16})," ",U," like",U===1?"":"s"]}),te&&o.jsxs("button",{type:"button",className:`ghost-button story-detail__subscribe${X?" is-subscribed":""}`,onClick:xr,"aria-pressed":X,children:[X?o.jsx(I0,{size:16}):o.jsx(O0,{size:16})," ",X?"Following author":"Follow author"]}),o.jsxs("button",{type:"button",className:"ghost-button",onClick:wr,children:[o.jsx(hu,{size:16})," Surprise me"]})]})]})]}),o.jsxs("section",{className:"section-shell story-detail__content",children:[o.jsx(B.article,{initial:{opacity:0,y:24},animate:{opacity:1,y:0},transition:{duration:.45},children:o.jsx("pre",{children:u.content})}),o.jsxs("aside",{className:"story-detail__aside",children:[o.jsxs("div",{className:"story-detail__info",children:[o.jsx("h2",{children:"Story snapshot"}),o.jsx("p",{className:"story-detail__info-text",children:"Keep readers oriented with the essentials  genre, tone, perspective, and the tags you set when publishing."}),o.jsxs("ul",{className:"story-detail__info-list",children:[o.jsxs("li",{children:[o.jsx("span",{children:"Published"}),o.jsx("strong",{children:new Date(u.publishedAt).toLocaleString()})]}),o.jsxs("li",{children:[o.jsx("span",{children:"Perspective"}),o.jsx("strong",{children:u.metadata.perspective})]}),o.jsxs("li",{children:[o.jsx("span",{children:"Tags"}),o.jsx("div",{className:"story-detail__tag-chips",children:u.tags.length?u.tags.map(V=>o.jsx("span",{children:V},V)):o.jsx("span",{children:"#fiction"})})]})]})]}),o.jsxs("div",{className:"story-collections-card",children:[o.jsx("h2",{children:"Collections"}),o.jsxs("div",{className:"story-collections-actions",children:[o.jsx("input",{type:"text",value:P,onChange:V=>C(V.target.value),placeholder:"New collection name"}),o.jsx("button",{type:"button",className:"ghost-button",onClick:dn,children:"Create"})]}),o.jsxs("div",{className:"story-collections-actions",children:[o.jsx("select",{value:E,onChange:V=>T(V.target.value),disabled:!m.length,children:m.length===0?o.jsx("option",{value:"",children:"No collections yet"}):m.map(V=>o.jsx("option",{value:V.id,children:V.name},V.id))}),o.jsx("button",{type:"button",className:"ghost-button",onClick:De,children:"Save story"})]}),M&&o.jsx("div",{className:"notice notice--muted",children:M}),Ct.length>0?o.jsx("ul",{className:"story-collections-list",children:Ct.map(V=>o.jsxs("li",{children:[o.jsx("span",{children:V.name}),o.jsx("button",{type:"button",onClick:()=>hn(V.id),children:"Remove"})]},V.id))}):o.jsx("p",{className:"story-detail__info-text",children:"This story hasn't been saved to any of your collections yet."})]})]})]}),o.jsxs("section",{className:"section-shell story-detail__reviews",children:[o.jsxs(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.45},children:[o.jsx("h2",{children:"Community reviews"}),o.jsx(YA,{reviews:u.reviews,canModerate:!!(d!=null&&d.isDev),onDelete:V=>{i(V),c({type:"delete_review",targetResourceId:V,details:`from story: ${u.id}`})}})]}),o.jsxs(B.form,{className:"review-form",onSubmit:vr,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.45},children:[o.jsx("h3",{children:"Leave your feedback"}),o.jsx(vu,{value:p,onChange:y}),o.jsx("textarea",{value:j,onChange:V=>x(V.target.value),placeholder:"Share what resonated, scenes you loved, or ways to improve.",rows:4}),N&&o.jsx("div",{className:"notice notice--error",children:N}),o.jsx("button",{type:"submit",className:"primary-button",children:"Post review"})]})]})]})}function xu({size:e="sm",showIcon:t=!0,className:n=""}){const r={sm:10,md:12,lg:14},s={sm:"dev-badge--sm",md:"dev-badge--md",lg:"dev-badge--lg"};return o.jsxs("span",{className:`dev-badge ${s[e]} ${n}`,title:"Developer","aria-label":"Developer",children:[t&&o.jsx(AN,{size:r[e],"aria-hidden":!0}),o.jsx("span",{className:"dev-badge__label",children:"DEV"}),o.jsx("span",{className:"dev-badge__dot","aria-hidden":!0})]})}const ox="sf:roles",Em="sf:user-roles",Ql=[{id:"paid",name:"paid",label:"PAID member",color:"#f59e0b",textColor:"#1a1306",emoji:""},{id:"free",name:"broke",label:"Broke",color:"rgba(255,255,255,0.14)",textColor:"#ffffff",emoji:""}];function XA(){try{const e=localStorage.getItem(ox);if(!e)return Ql;const t=JSON.parse(e),n=new Map(Ql.map(r=>[r.id,r]));for(const r of t)n.set(r.id,r);return Array.from(n.values())}catch{return Ql}}function Xl(e){localStorage.setItem(ox,JSON.stringify(e))}const ax=g.createContext(void 0);function JA({children:e}){const[t,n]=g.useState(()=>XA()),[r,s]=g.useState(()=>{try{return JSON.parse(localStorage.getItem(Em)||"{}")}catch{return{}}}),i=g.useCallback(m=>t.find(S=>S.id===m),[t]),a=g.useCallback(m=>{const S={id:xe("role"),...m};return n(b=>{const w=[...b,S];return Xl(w),w}),S},[]),l=g.useCallback((m,S)=>{n(b=>{const w=b.map(k=>k.id===m?{...k,...S}:k);return Xl(w),w})},[]),c=g.useCallback(m=>{n(S=>{const b=S.filter(w=>w.id!==m);return Xl(b),b})},[]),u=g.useCallback((m,S)=>{const b=r[m];return b||(S?"paid":"free")},[r]),d=g.useCallback((m,S)=>{s(b=>{const w={...b};return S?w[m]=S:delete w[m],localStorage.setItem(Em,JSON.stringify(w)),w})},[]),f=g.useMemo(()=>({roles:t,getRole:i,createRole:a,updateRole:l,deleteRole:c,getUserRoleId:u,assignRole:d}),[t,i,a,l,c,u,d]);return o.jsx(ax.Provider,{value:f,children:e})}function th(){const e=g.useContext(ax);if(!e)throw new Error("useRoles must be used within a RolesProvider");return e}function lx({role:e,size:t="sm"}){if(!e)return null;const n=t==="sm"?"2px 8px":"4px 10px",r=t==="sm"?11:12;return o.jsxs("span",{className:"role-badge",style:{display:"inline-flex",alignItems:"center",gap:6,borderRadius:999,padding:n,fontSize:r,fontWeight:700,color:e.textColor,background:e.color,border:"1px solid rgba(255,255,255,0.18)"},title:e.label,children:[e.emoji?o.jsx("span",{"aria-hidden":!0,children:e.emoji}):null,o.jsx("span",{children:e.label})]})}const qA=[{label:"Features",to:"/#features"},{label:"Stories",to:"/stories"},{label:"AI Studio",to:"/studio"},{label:"Pricing",to:"/#pricing"},{label:"FAQ",to:"/#faq"}];function ZA(){var d,f;const{user:e,logout:t}=Ge(),{getRole:n,getUserRoleId:r}=th(),{toggleConsole:s}=Vi(),[i,a]=g.useState(!1),l=Lt(),c=l.pathname==="/",u=()=>{a(!1)};return o.jsx("header",{className:Jr("site-header",l.pathname==="/"&&"site-header--glass"),children:o.jsxs("div",{className:"site-header__inner",children:[o.jsxs(Be,{to:"/",className:"site-logo",onClick:u,children:[o.jsx("span",{className:"site-logo__mark","aria-hidden":!0,children:o.jsx("img",{src:"/brand-mark.svg",alt:""})}),o.jsx("span",{className:"site-logo__text",children:"Dreamscribe"})]}),o.jsx("nav",{className:Jr("site-nav",i&&"site-nav--open"),children:qA.map(m=>o.jsx(AS,{to:m.to,onClick:u,className:({isActive:S})=>Jr("site-nav__link",S&&"site-nav__link--active"),children:m.label},m.label))}),o.jsxs("div",{className:"site-header__cta",children:[c&&o.jsx("span",{className:"site-header__version","aria-label":"Site version",children:"v1.0  Public"}),o.jsx("button",{type:"button",className:"site-header__link",onClick:s,children:"Debug"}),e&&o.jsxs(o.Fragment,{children:[o.jsx(Be,{to:"/settings",className:"site-header__link",onClick:u,children:"Settings"}),(e.isDev||e.isAdmin)&&o.jsx(Be,{to:"/dev",className:"site-header__link",onClick:u,children:"Dev tools"})]}),e?o.jsxs("div",{className:"site-header__user",children:[o.jsxs("div",{className:"site-header__user-main",children:[o.jsx("span",{className:"site-header__avatar",children:((f=(d=e.displayName)==null?void 0:d[0])==null?void 0:f.toUpperCase())??"U"}),o.jsxs("div",{className:"site-header__name-wrap",children:[o.jsx("span",{className:"site-header__username",children:e.displayName}),o.jsx("span",{className:"site-header__email",children:e.email})]})]}),o.jsxs("div",{className:"site-header__user-tags",children:[(()=>{const m=r(e.username,{isDev:e.isDev,isAdmin:e.isAdmin}),S=n(m);return o.jsx(lx,{role:S,size:"sm"})})(),e.isDev&&o.jsx(xu,{size:"sm"}),o.jsx("button",{type:"button",className:"logout-button",onClick:t,children:"Log out"})]})]}):o.jsxs("div",{className:"site-header__auth",children:[o.jsx(Be,{to:"/login",className:"ghost-button",onClick:u,children:"Log in"}),o.jsx(Be,{to:"/signup",className:"primary-button",onClick:u,children:"Sign up"})]})]}),o.jsx("button",{type:"button",className:"site-header__menu",onClick:()=>a(m=>!m),"aria-label":i?"Close navigation":"Open navigation",children:i?o.jsx(Yd,{size:20}):o.jsx(SN,{size:20})})]})})}function eP(){return o.jsxs("footer",{className:"site-footer",children:[o.jsxs("div",{className:"site-footer__content",children:[o.jsxs("div",{children:[o.jsx("span",{className:"site-footer__brand",children:"Dreamscribe"}),o.jsx("p",{className:"site-footer__tagline",children:"Craft immersive tales, revisit past drafts, and build the worlds you dream about."})]}),o.jsxs("div",{className:"site-footer__links",children:[o.jsx("a",{href:"#features",children:"Features"}),o.jsx("a",{href:"#pricing",children:"Pricing"}),o.jsx("a",{href:"#faq",children:"FAQ"}),o.jsx("a",{href:"mailto:support@dreamscribe.app",children:"Support"})]})]}),o.jsxs("div",{className:"site-footer__meta",children:[o.jsxs("span",{children:[" ",new Date().getFullYear()," Dreamscribe Labs"]}),o.jsxs("div",{className:"site-footer__meta-links",children:[o.jsx("a",{href:"#terms",children:"Terms"}),o.jsx("a",{href:"#privacy",children:"Privacy"})]})]})]})}const Jl={info:"Info",request:"Request",response:"Response",error:"Error"};function tP(){const{logs:e,clear:t,isConsoleOpen:n,toggleConsole:r}=Vi(),[s,i]=g.useState("all"),a=g.useMemo(()=>s==="all"?e:e.filter(c=>c.level===s),[e,s]),l=c=>{navigator.clipboard.writeText(JSON.stringify(c,null,2)).catch(u=>{console.error("Failed to copy payload",u)})};return o.jsx(sv,{children:n&&o.jsxs(B.div,{className:"debug-console",initial:{y:"100%"},animate:{y:0},exit:{y:"100%"},transition:{type:"spring",stiffness:180,damping:22},children:[o.jsxs("header",{className:"debug-console__header",children:[o.jsxs("div",{children:[o.jsx("span",{className:"debug-console__title",children:"Debug Console"}),o.jsx("span",{className:"debug-console__meta",children:"Inspect AI requests, responses, and errors"})]}),o.jsxs("div",{className:"debug-console__actions",children:[o.jsxs("button",{type:"button",className:"ghost-button",onClick:t,children:[o.jsx(Oi,{size:16})," Clear"]}),o.jsxs("button",{type:"button",className:"ghost-button",onClick:r,children:[o.jsx(Yd,{size:16})," Close"]})]})]}),o.jsxs("div",{className:"debug-console__filters",children:[o.jsxs("button",{type:"button",className:Jr("chip",s==="all"&&"chip--active"),onClick:()=>i("all"),children:["All (",e.length,")"]}),Object.keys(Jl).map(c=>o.jsx("button",{type:"button",className:Jr("chip",s===c&&"chip--active"),onClick:()=>i(c),children:Jl[c]},c))]}),o.jsx("div",{className:"debug-console__list",children:a.length===0?o.jsx("p",{className:"debug-console__empty",children:"No events captured yet. Trigger a generation or feedback request to populate logs."}):a.map(c=>o.jsxs("article",{className:`debug-entry debug-entry--${c.level}`,children:[o.jsxs("header",{className:"debug-entry__header",children:[o.jsx("span",{className:"debug-entry__level",children:Jl[c.level]}),o.jsx("time",{children:new Date(c.timestamp).toLocaleTimeString()})]}),o.jsx("p",{className:"debug-entry__summary",children:c.summary}),c.payload!=null&&o.jsxs("pre",{className:"debug-entry__payload",children:[JSON.stringify(c.payload,null,2),o.jsx("button",{type:"button",onClick:()=>l(c.payload),"aria-label":"Copy payload",children:o.jsx(yN,{size:16})})]})]},c.id))})]})})}function nP({open:e,onClose:t,commands:n}){const[r,s]=g.useState(""),[i,a]=g.useState(0),l=g.useMemo(()=>{const c=r.trim().toLowerCase();return c?n.filter(u=>{var d;return u.label.toLowerCase().includes(c)||((d=u.description)==null?void 0:d.toLowerCase().includes(c))}):n},[r,n]);return g.useEffect(()=>{if(!e){s(""),a(0);return}const c=u=>{if(u.key==="Escape"&&t(),u.key==="ArrowDown"&&(u.preventDefault(),a(d=>Math.min(d+1,Math.max(l.length-1,0)))),u.key==="ArrowUp"&&(u.preventDefault(),a(d=>Math.max(d-1,0))),u.key==="Enter"){u.preventDefault();const d=l[i];d&&(t(),requestAnimationFrame(()=>d.onSelect()))}};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[e,i,l,t]),g.useEffect(()=>{if(!e)return;const c=requestAnimationFrame(()=>{const u=document.querySelector(".command-palette__input");u==null||u.focus()});return()=>cancelAnimationFrame(c)},[e]),e?o.jsxs("div",{className:"command-palette",role:"dialog","aria-modal":!0,children:[o.jsx("div",{className:"command-palette__backdrop",onClick:t}),o.jsxs("div",{className:"command-palette__panel",children:[o.jsx("input",{className:"command-palette__input",placeholder:"Search commands",value:r,onChange:c=>{s(c.target.value),a(0)}}),o.jsx("ul",{className:"command-palette__list",children:l.length===0?o.jsx("li",{className:"command-palette__empty",children:'No matches. Try "studio" or "library".'}):l.map((c,u)=>o.jsx("li",{children:o.jsxs("button",{type:"button",className:u===i?"command-option command-option--active":"command-option",onClick:()=>{t(),c.onSelect()},children:[o.jsxs("div",{children:[o.jsx("span",{children:c.label}),c.description&&o.jsx("small",{children:c.description})]}),c.shortcut&&o.jsx("kbd",{children:c.shortcut})]})},c.id))})]})]}):null}const cx="sf:announcement",zs={current:null,dismissedBy:{},heartedBy:{}};function rP(){if(typeof window>"u")return zs;try{const e=window.localStorage.getItem(cx);if(!e)return zs;const t=JSON.parse(e);return t&&typeof t=="object"?{current:t.current??null,dismissedBy:t.dismissedBy??{},heartedBy:t.heartedBy??{}}:zs}catch{return zs}}const ux=g.createContext(void 0);function sP({children:e}){const[t,n]=g.useState(()=>rP());g.useEffect(()=>{if(!(typeof window>"u"))try{window.localStorage.setItem(cx,JSON.stringify(t))}catch{}},[t]);const r=g.useCallback(c=>{const u=c.message.trim();if(!u)throw new Error("Announcement message cannot be empty");const d={id:xe("ann"),message:u,createdAt:new Date().toISOString(),allowHearts:!!c.allowHearts};return n({current:d,dismissedBy:{},heartedBy:{}}),d},[]),s=g.useCallback(()=>{n(zs)},[]),i=g.useCallback(c=>{n(u=>!u.current||!c||u.dismissedBy[c]?u:{...u,dismissedBy:{...u.dismissedBy,[c]:new Date().toISOString()}})},[]),a=g.useCallback(c=>{n(u=>{if(!u.current||!u.current.allowHearts||!c)return u;const d={...u.heartedBy};return d[c]?delete d[c]:d[c]=new Date().toISOString(),{...u,heartedBy:d}})},[]),l=g.useMemo(()=>({announcement:t.current,dismissedBy:t.dismissedBy,heartedBy:t.heartedBy,publishAnnouncement:r,clearAnnouncement:s,dismissForUser:i,toggleHeart:a}),[t,r,s,i,a]);return o.jsx(ux.Provider,{value:l,children:e})}function dx(){const e=g.useContext(ux);if(!e)throw new Error("useAnnouncements must be used within an AnnouncementsProvider");return e}function iP(){const{user:e}=Ge(),{announcement:t,dismissedBy:n,heartedBy:r,dismissForUser:s,toggleHeart:i}=dx(),a=e?!!n[e.id]:!1,l=!!(e&&t&&!a),c=t?Object.keys(r).length:0,u=e?!!r[e.id]:!1;return o.jsx(sv,{children:l&&t&&e&&o.jsxs(B.aside,{className:"announcement-prompt",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:12},transition:{duration:.25},children:[o.jsx("button",{type:"button",className:"announcement-prompt__close",onClick:()=>s(e.id),"aria-label":"Dismiss announcement",children:o.jsx(Yd,{size:16})}),o.jsxs("div",{className:"announcement-prompt__body",children:[o.jsx("h3",{children:"Latest from the devs"}),o.jsx("p",{children:t.message})]}),o.jsxs("div",{className:"announcement-prompt__footer",children:[o.jsx("span",{children:new Date(t.createdAt).toLocaleString()}),t.allowHearts&&o.jsxs("button",{type:"button",className:`announcement-prompt__heart ${u?"is-active":""}`,onClick:()=>i(e.id),"aria-label":u?"Remove heart":"Send heart",children:[o.jsx(Wa,{size:16,fill:u?"currentColor":"none"}),o.jsx("span",{children:c})]})]})]},"global-announcement")})}function oP({children:e}){const[t,n]=g.useState(!1),r=$n(),s=Lt(),{user:i}=Ge(),{toggleConsole:a}=Vi();g.useEffect(()=>{const c=u=>{const d=u.key.toLowerCase();(u.metaKey||u.ctrlKey)&&d==="k"&&(u.preventDefault(),n(f=>!f))};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[]),g.useEffect(()=>{n(!1)},[s.pathname]);const l=g.useMemo(()=>{const c=[{id:"go-studio",label:"Go to Studio",description:"Open the writing workspace",shortcut:"G S",onSelect:()=>r("/studio")},{id:"go-library",label:"Browse Library",description:"Read and review published stories",shortcut:"G L",onSelect:()=>r("/stories")},{id:"go-home",label:"Back to landing",description:"Return to the hero page",onSelect:()=>r("/")},{id:"toggle-debug",label:"Toggle debug console",description:"Show or hide the request log",shortcut:"Alt + D",onSelect:a}];return i&&c.splice(1,0,{id:"go-settings",label:"Settings",description:"Update profile, security, and preferences",onSelect:()=>r("/settings")}),(i!=null&&i.isDev||i!=null&&i.isAdmin)&&c.push({id:"go-dev",label:"Developer tools",description:"Open the dev console and moderation boards",onSelect:()=>r("/dev")}),c},[r,a,i]);return o.jsxs("div",{className:"app-shell",children:[o.jsx(ZA,{}),o.jsx(iP,{}),o.jsx("main",{className:"app-shell__content",children:e}),o.jsx(eP,{}),o.jsx(tP,{}),o.jsx(nP,{open:t,onClose:()=>n(!1),commands:l})]})}function _m({children:e}){const{user:t,isLoading:n}=Ge(),r=Lt();return n?o.jsx("div",{className:"centered",children:"Loading..."}):t?o.jsx(o.Fragment,{children:e}):o.jsx(sa,{to:"/login",state:{from:r},replace:!0})}function aP({children:e}){const{user:t,isLoading:n}=Ge(),r=Lt();return n?o.jsx("div",{className:"centered",children:"Loading..."}):t?!t.isDev&&!t.isAdmin?o.jsx(sa,{to:"/",replace:!0}):o.jsx(o.Fragment,{children:e}):o.jsx(sa,{to:"/login",state:{from:r},replace:!0})}const wu="sf:theme",hx=g.createContext(void 0);function lP(){var e;if(typeof window>"u")return"radiant";try{const t=window.localStorage.getItem(wu);if(t==="radiant"||t==="dark")return t}catch{}return(e=window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches?"dark":"radiant"}function cP({children:e}){const[t,n]=g.useState(lP);g.useEffect(()=>{if(!(typeof document>"u")){document.documentElement.dataset.theme=t,document.body.dataset.theme=t;try{window.localStorage.setItem(wu,t)}catch{}}},[t]),g.useEffect(()=>{var u;if(typeof window>"u")return;const l=(u=window.matchMedia)==null?void 0:u.call(window,"(prefers-color-scheme: dark)");if(!l)return;const c=d=>{n(f=>{if(f!=="radiant"&&f!=="dark")return f;const m=window.localStorage.getItem(wu);return m==="radiant"||m==="dark"?f:d.matches?"dark":"radiant"})};return l.addEventListener("change",c),()=>l.removeEventListener("change",c)},[]);const r=l=>{n(l==="dark"?"dark":"radiant")},s=()=>{n(l=>l==="dark"?"radiant":"dark")},i=g.useMemo(()=>[{id:"radiant",label:"Radiant",description:"Signature Dreamscribe glow"},{id:"dark",label:"Dark Mode",description:"Low-light friendly contrast"}],[]),a=g.useMemo(()=>({theme:t,setTheme:r,toggleTheme:s,options:i}),[t,i]);return o.jsx(hx.Provider,{value:a,children:e})}function uP(){const e=g.useContext(hx);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e}function dP(){const{user:e,logout:t,updateProfile:n,updatePassword:r}=Ge(),{publishStory:s}=gs(),{theme:i,setTheme:a,options:l}=uP(),{getRole:c,getUserRoleId:u}=th(),[d,f]=g.useState(()=>({displayName:(e==null?void 0:e.displayName)??"",bio:(e==null?void 0:e.bio)??"",accentColor:(e==null?void 0:e.accentColor)??"#7c3aed",avatarEmoji:(e==null?void 0:e.avatarEmoji)??""})),[m,S]=g.useState(()=>({email:(e==null?void 0:e.email)??"",currentPassword:"",newPassword:"",confirmPassword:""})),[b,w]=g.useState(null),[k,h]=g.useState(null),[p,y]=g.useState(!1),[j,x]=g.useState(!1);if(!e)return null;const N=g.useMemo(()=>{const M=u(e.username,e.isDev);return c(M)},[c,u,e.isDev,e.username]),A=async M=>{M.preventDefault(),w(null);try{y(!0),await Promise.resolve(n({displayName:d.displayName,bio:d.bio,accentColor:d.accentColor,avatarEmoji:d.avatarEmoji})),w({type:"success",text:"Profile updated"})}catch(D){const $=D instanceof Error?D.message:"Unable to update profile";w({type:"error",text:$})}finally{y(!1)}},P=async()=>{h(null);try{x(!0),await Promise.resolve(n({email:m.email})),h({type:"success",text:"Email updated"})}catch(M){const D=M instanceof Error?M.message:"Unable to update email";h({type:"error",text:D})}finally{x(!1)}},C=async()=>{if(h(null),m.newPassword!==m.confirmPassword){h({type:"error",text:"Passwords do not match"});return}try{x(!0),await r({currentPassword:m.currentPassword,newPassword:m.newPassword}),S(M=>({...M,currentPassword:"",newPassword:"",confirmPassword:""})),h({type:"success",text:"Password updated"})}catch(M){const D=M instanceof Error?M.message:"Unable to update password";h({type:"error",text:D})}finally{x(!1)}},E=()=>{["sf:workspace","sf:published-stories","sf:provider-keys","sf:provider-selected","sf:provider-custom","sf:provider-models"].forEach(D=>localStorage.removeItem(D)),alert("Cleared local demo data. Reloading page"),window.location.reload()},T=()=>{[{metadata:{title:"The Clockwork Garden",genre:"Solarpunk mystery",tone:"Warm, hopeful, poetic",perspective:"First person",targetLength:"short"},summary:"In a city of living machines, a gardener follows a trail of missing pollinators into the heart of an ancient secret.",tags:["#solarpunk","#mystery","#hopepunk"],content:"Dawn warmed the copper leaves until they hummed. I pressed my palm to the trunk and felt the old tree wake..."},{metadata:{title:"Error: Tenderness Not Found",genre:"Near-future sci-fi",tone:"Reflective, wry",perspective:"Close third person",targetLength:"medium"},summary:"A maintenance engineer patches bugs in the city's empathy network and discovers a glitch that feels like love.",tags:["#scifi","#romance","#nearfuture"],content:"The alert chimed at 03:12: node E-19 had gone cold. Miri rolled out of bed, grabbed her toolkit, and told herself not to name the fault this time..."}].forEach(D=>{s({authorId:e.id,authorName:e.displayName,metadata:D.metadata,content:D.content,summary:D.summary,tags:D.tags})}),alert("Seeded a couple of sample stories into your library.")};return o.jsxs("div",{className:"section-shell",children:[o.jsxs(B.section,{className:"glass-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.35},children:[o.jsxs("header",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:16},children:[o.jsxs("div",{children:[o.jsx("h2",{style:{margin:0},children:"Profile"}),o.jsx("p",{style:{margin:"6px 0 0",color:"var(--color-text-muted)"},children:"Update how your name and avatar appear across Dreamscribe."})]}),e.isDev&&o.jsx(xu,{size:"md"})]}),o.jsxs("form",{onSubmit:A,style:{display:"grid",gap:16,marginTop:18},children:[o.jsxs("label",{children:[o.jsx("span",{style:{display:"block",fontWeight:600},children:"Display name"}),o.jsx("input",{value:d.displayName,onChange:M=>f(D=>({...D,displayName:M.target.value})),required:!0})]}),o.jsxs("label",{children:[o.jsx("span",{style:{display:"block",fontWeight:600},children:"Profile bio"}),o.jsx("textarea",{value:d.bio,onChange:M=>f(D=>({...D,bio:M.target.value})),rows:3,placeholder:"Share a short introduction or creative focus.",style:{resize:"vertical"}})]}),o.jsxs("div",{style:{display:"flex",gap:16,flexWrap:"wrap"},children:[o.jsxs("label",{style:{flex:"1 1 160px"},children:[o.jsx("span",{style:{display:"block",fontWeight:600},children:"Avatar emoji"}),o.jsx("input",{value:d.avatarEmoji,onChange:M=>f(D=>({...D,avatarEmoji:M.target.value.slice(0,4)})),maxLength:4,style:{fontSize:"1.6rem",textAlign:"center"}})]}),o.jsxs("label",{style:{flex:"1 1 160px"},children:[o.jsx("span",{style:{display:"block",fontWeight:600},children:"Accent colour"}),o.jsx("input",{type:"color",value:d.accentColor,onChange:M=>f(D=>({...D,accentColor:M.target.value})),style:{width:"100%",height:44,padding:0}})]})]}),o.jsxs("div",{className:"profile-preview-card",style:{borderColor:d.accentColor},children:[o.jsx("div",{className:"profile-preview-card__avatar",style:{backgroundColor:d.accentColor},children:o.jsx("span",{children:d.avatarEmoji||""})}),o.jsxs("div",{children:[o.jsx("strong",{children:d.displayName}),o.jsx("p",{children:d.bio?d.bio:"Add a bio so readers know what you create."})]})]}),b&&o.jsx("div",{className:`notice notice--${b.type==="error"?"error":"success"}`,children:b.text}),o.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap"},children:[o.jsx("button",{type:"submit",className:"primary-button",disabled:p,children:p?"Saving":"Save profile"}),o.jsx("button",{type:"button",className:"ghost-button",onClick:t,children:"Log out"})]})]})]}),o.jsxs(B.section,{className:"glass-card",initial:{opacity:0,y:22},animate:{opacity:1,y:0},transition:{duration:.35,delay:.04},style:{marginTop:18},children:[o.jsx("h3",{style:{marginTop:0},children:"Account security"}),o.jsx("p",{className:"notice--muted",children:"Manage your sign-in email and password."}),o.jsxs("div",{style:{display:"grid",gap:18,marginTop:16},children:[o.jsxs("div",{style:{display:"grid",gap:8},children:[o.jsxs("label",{children:[o.jsx("span",{style:{display:"block",fontWeight:600},children:"Email"}),o.jsx("input",{type:"email",value:m.email,onChange:M=>S(D=>({...D,email:M.target.value})),required:!0})]}),o.jsx("button",{type:"button",className:"primary-button",onClick:P,disabled:j,children:"Update email"})]}),o.jsxs("div",{style:{display:"grid",gap:8},children:[o.jsxs("label",{children:[o.jsx("span",{style:{display:"block",fontWeight:600},children:"Current password"}),o.jsx("input",{type:"password",value:m.currentPassword,onChange:M=>S(D=>({...D,currentPassword:M.target.value}))})]}),o.jsxs("label",{children:[o.jsx("span",{style:{display:"block",fontWeight:600},children:"New password"}),o.jsx("input",{type:"password",value:m.newPassword,onChange:M=>S(D=>({...D,newPassword:M.target.value}))})]}),o.jsxs("label",{children:[o.jsx("span",{style:{display:"block",fontWeight:600},children:"Confirm password"}),o.jsx("input",{type:"password",value:m.confirmPassword,onChange:M=>S(D=>({...D,confirmPassword:M.target.value}))})]}),o.jsx("button",{type:"button",className:"ghost-button",onClick:C,disabled:j,children:"Update password"})]}),k&&o.jsx("div",{className:`notice notice--${k.type==="error"?"error":"success"}`,children:k.text})]})]}),o.jsxs(B.section,{className:"glass-card",initial:{opacity:0,y:24},animate:{opacity:1,y:0},transition:{duration:.35,delay:.08},style:{marginTop:18},children:[o.jsx("h3",{style:{marginTop:0},children:"Appearance"}),o.jsx("p",{className:"notice--muted",children:"Pick a theme that matches your workspace."}),o.jsx("div",{style:{display:"grid",gap:12,marginTop:16},children:l.map(M=>o.jsxs("button",{type:"button",className:`theme-option ${i===M.id?"theme-option--active":""}`,onClick:()=>a(M.id),children:[o.jsxs("span",{children:[o.jsx("strong",{children:M.label}),o.jsx("span",{className:"theme-option__description",children:M.description})]}),o.jsx("span",{className:"theme-option__status",children:i===M.id?"Active":"Switch"})]},M.id))})]}),o.jsxs(B.section,{className:"glass-card",initial:{opacity:0,y:26},animate:{opacity:1,y:0},transition:{duration:.35,delay:.12},style:{marginTop:18},children:[o.jsx("h3",{style:{marginTop:0},children:"Account snapshot"}),o.jsxs("div",{style:{display:"grid",gap:12},children:[o.jsxs("div",{children:[o.jsx("strong",{children:"Member since:"})," ",new Date(e.createdAt).toLocaleString()]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},children:[o.jsx("strong",{children:"Role:"}),o.jsx(lx,{role:N}),e.isDev&&o.jsx(xu,{size:"sm"})]}),e.warnings&&e.warnings.length>0&&o.jsxs("div",{className:"notice notice--warning",children:[o.jsx("strong",{children:"Caution:"})," You have ",e.warnings.length," active warning",e.warnings.length>1?"s":"","."]})]}),o.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap",marginTop:18},children:[o.jsx("button",{type:"button",className:"ghost-button",onClick:E,children:"Reset demo data"}),o.jsx("button",{type:"button",className:"primary-button",onClick:T,children:"Seed sample stories"})]})]})]})}function hP(){const{user:e,getUsers:t,banUser:n,unbanUser:r,getBanAppeals:s,resolveBanAppeal:i}=Ge(),{append:a,toggleConsole:l}=Vi(),{providers:c,selectedProvider:u,selectedModel:d,selectProvider:f,setApiKey:m,apiKeys:S}=Y0(),{stories:b,deleteReview:w,deleteStory:k}=gs(),{blockedWords:h,addBlockedWord:p,removeBlockedWord:y,logs:j,validateText:x,recordLog:N}=Zd(),{roles:A,createRole:P,updateRole:C,deleteRole:E,getRole:T,getUserRoleId:M,assignRole:D}=th(),{announcement:$,publishAnnouncement:Ye,clearAnnouncement:Se,dismissedBy:q,heartedBy:O}=dx(),[U,W]=g.useState(""),[te,X]=g.useState(!0),[Qe,ke]=g.useState(null),[Ct,Le]=g.useState(()=>s());g.useEffect(()=>{Le(s())},[]),g.useEffect(()=>{$?(W($.message),X($.allowHearts)):(W(""),X(!0))},[$]);const Ue=g.useMemo(()=>Object.keys(O).length,[O]),Dt=g.useMemo(()=>Object.keys(q).length,[q]),vr=()=>Le(s());if(!e||!e.isDev&&!e.isAdmin)return o.jsx("div",{className:"section-shell",children:o.jsxs("div",{className:"glass-card",children:[o.jsx("h2",{style:{margin:0},children:"Restricted"}),o.jsx("p",{children:"This area is for developer accounts only."})]})});const dn=e.isDev;e.isAdmin&&e.isDev;const dt=dn,xr=dn,wr=()=>{a({level:"request",summary:`Mock request to ${u.id}`,payload:{model:d,ts:Date.now()}}),setTimeout(()=>a({level:"response",summary:"Mock response",payload:{tokens:1234,ok:!0}}),400)},De=()=>{const R=`sk-${u.id}-sample-key`;m(u.id,R)},hn=R=>{R.preventDefault();const H=U.trim();if(!H){ke({type:"error",text:"Enter a message before publishing."});return}Ye({message:H,allowHearts:te}),W(H),ke({type:"success",text:"Announcement saved. Users will see it on their next sign-in."})},jr=()=>{Se(),ke({type:"success",text:"Announcement cleared."})},pn=(R,H)=>{if(H==="approve"&&!window.confirm("Approve this appeal and unban the account?"))return;let V;if(H==="reject"){const K=window.prompt("Optional: Add a note for this decision");V=K!=null&&K.trim()?K.trim():void 0}i(R,H,V),vr()};return o.jsxs("div",{className:"section-shell",children:[o.jsxs(B.section,{className:"glass-card",initial:{opacity:0,y:18},animate:{opacity:1,y:0},transition:{duration:.4},children:[o.jsx("h2",{style:{marginTop:0},children:"Developer Tools"}),o.jsx("p",{className:"notice--muted",children:"Quick actions for verifying integrations, moderation, and UI flows."}),o.jsxs("div",{style:{display:"grid",gap:12,marginTop:12},children:[o.jsxs("div",{children:[o.jsx("strong",{children:"Provider:"})," ",o.jsx("select",{value:u.id,onChange:R=>f(R.target.value),children:c.map(R=>o.jsx("option",{value:R.id,children:R.label},R.id))})]}),o.jsxs("div",{children:[o.jsx("strong",{children:"API key:"})," ",o.jsx("code",{style:{opacity:.8},children:S[u.id]?"":"<empty>"})," ",o.jsx("button",{type:"button",className:"ghost-button",onClick:De,children:"Set sample key"})]}),o.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap"},children:[o.jsx("button",{type:"button",className:"primary-button",onClick:wr,children:"Emit mock request"}),o.jsx("button",{type:"button",className:"ghost-button",onClick:l,children:"Toggle Debug Console"})]})]})]}),o.jsxs(B.section,{className:"glass-card",initial:{opacity:0,y:18},animate:{opacity:1,y:0},transition:{duration:.4,delay:.03},style:{marginTop:16},children:[o.jsx("h3",{style:{marginTop:0},children:"Message all users"}),o.jsx("p",{className:"section-subtitle",children:"Publish a global announcement that appears after sign-in."}),o.jsxs("form",{onSubmit:hn,style:{display:"grid",gap:12,marginTop:12},children:[o.jsx("textarea",{value:U,onChange:R=>W(R.target.value),placeholder:"Share release notes, scheduled downtime, or community news.",rows:3,style:{padding:"0.8rem 0.95rem",borderRadius:12,border:"1px solid rgba(255,255,255,0.18)",background:"rgba(18, 16, 40, 0.82)",color:"inherit",resize:"vertical"}}),o.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:8},children:[o.jsx("input",{type:"checkbox",checked:te,onChange:R=>X(R.target.checked)}),"Allow  reactions"]}),o.jsxs("div",{style:{display:"flex",gap:12,flexWrap:"wrap"},children:[o.jsx("button",{type:"submit",className:"primary-button",children:$?"Update message":"Publish message"}),$&&o.jsx("button",{type:"button",className:"ghost-button",onClick:jr,children:"Clear message"})]})]}),$&&o.jsxs("div",{style:{display:"flex",gap:16,flexWrap:"wrap",marginTop:12,fontSize:13,opacity:.85},children:[o.jsxs("span",{children:["Active since ",new Date($.createdAt).toLocaleString()]}),o.jsxs("span",{children:["Hearts: ",Ue]}),o.jsxs("span",{children:["Dismissed: ",Dt]}),o.jsx("span",{children:$.allowHearts?"Heart reactions enabled":"Heart reactions disabled"})]}),Qe&&o.jsx("div",{className:`notice notice--${Qe.type==="error"?"error":"success"}`,style:{marginTop:12},children:Qe.text})]}),o.jsxs(B.section,{className:"glass-card",initial:{opacity:0,y:18},animate:{opacity:1,y:0},transition:{duration:.4,delay:.05},style:{marginTop:16},children:[o.jsx("h3",{style:{marginTop:0},children:"User management"}),o.jsx("p",{className:"section-subtitle",children:"Ban/unban local users in this browser."}),o.jsx("div",{style:{display:"grid",gap:8},children:t().map(R=>o.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:8},children:[o.jsxs("div",{children:[o.jsx("strong",{children:R.displayName})," ",o.jsxs("span",{style:{opacity:.7},children:["(",R.email,")"]})," ",R.isDev&&o.jsx("span",{className:"dev-badge dev-badge--sm",style:{marginLeft:8},children:"DEV"}),R.banned&&R.banReason&&o.jsxs("div",{style:{fontSize:12,opacity:.8,marginTop:4},children:["Reason: ",R.banReason]})]}),o.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[o.jsx("span",{style:{fontSize:12,opacity:.8},children:"Role"}),o.jsx("select",{value:M(R.username,{isDev:R.isDev,isAdmin:R.isAdmin}),onChange:H=>D(R.username,H.target.value),disabled:!xr,children:A.map(H=>o.jsx("option",{value:H.id,children:H.label},H.id))}),R.isDev?o.jsx("span",{className:"notice--muted",children:"Protected"}):R.banned?o.jsx("button",{type:"button",className:"primary-button",onClick:()=>{r(R.username),N({type:"unban",targetUserId:R.id,targetUsername:R.username});try{const H=localStorage.getItem("dreamscribe_users");if(H){const K=JSON.parse(H)[R.username];K&&(UN(K.email),K.password&&WN(K.password))}}catch{}},children:"Unban"}):o.jsx("button",{type:"button",className:"ghost-button",onClick:()=>{var V;if(dn&&R.isAdmin&&!R.isDev&&!window.confirm("Warning: you are about to ban the admin account. Continue?"))return;const H=(V=prompt("Enter ban reason (required)"))==null?void 0:V.trim();if(H){try{const K=localStorage.getItem("dreamscribe_users");if(K){const fn=JSON.parse(K)[R.username];fn&&(zN(fn.email),fn.password&&$N(fn.password))}}catch{}n(R.username,H),N({type:"ban",targetUserId:R.id,targetUsername:R.username,details:H})}},children:"Ban"})]})]},R.id))})]}),o.jsxs(B.section,{className:"glass-card",initial:{opacity:0,y:18},animate:{opacity:1,y:0},transition:{duration:.4,delay:.06},style:{marginTop:16},children:[o.jsx("h3",{style:{marginTop:0},children:"Roles"}),!dt&&o.jsx("p",{className:"notice--muted",style:{marginBottom:12},children:"Only developers can create or edit role definitions."}),dt&&o.jsxs("form",{onSubmit:R=>{R.preventDefault();const H=R.currentTarget,V=H.elements.namedItem("label").value.trim(),K=H.elements.namedItem("name").value.trim()||V.toLowerCase().replace(/\s+/g,"-"),Xe=H.elements.namedItem("color").value.trim()||"#444",fn=H.elements.namedItem("textColor").value.trim()||"#fff",Hn=H.elements.namedItem("emoji").value.trim();V&&(P({name:K,label:V,color:Xe,textColor:fn,emoji:Hn}),H.reset())},style:{display:"grid",gap:8,gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))"},children:[o.jsx("input",{name:"label",placeholder:"Label (e.g., VIP)"}),o.jsx("input",{name:"name",placeholder:"Key (optional)"}),o.jsx("input",{name:"emoji",placeholder:"Emoji (optional)"}),o.jsx("input",{name:"color",placeholder:"#f59e0b"}),o.jsx("input",{name:"textColor",placeholder:"#1a1306"}),o.jsx("button",{className:"primary-button",type:"submit",children:"Create role"})]}),o.jsx("div",{className:"card-grid",style:{marginTop:10},children:A.map(R=>o.jsxs("div",{className:"glass-card",style:{padding:12},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:8},children:[o.jsx("strong",{children:R.label}),o.jsxs("span",{style:{background:R.color,color:R.textColor,borderRadius:999,padding:"2px 8px",fontWeight:700},children:[R.emoji?R.emoji+" ":"",R.name]})]}),o.jsxs("div",{style:{display:"flex",gap:8,marginTop:8,flexWrap:"wrap"},children:[dt&&o.jsx("button",{type:"button",className:"ghost-button",onClick:()=>C(R.id,{label:prompt("New label",R.label)||R.label}),children:"Rename"}),dt&&R.id!=="paid"&&R.id!=="free"&&R.id!=="admin"&&o.jsx("button",{type:"button",className:"ghost-button",onClick:()=>E(R.id),children:"Delete"})]})]},R.id))})]}),o.jsxs(B.section,{className:"glass-card",initial:{opacity:0,y:18},animate:{opacity:1,y:0},transition:{duration:.4,delay:.08},style:{marginTop:16},children:[o.jsx("h3",{style:{marginTop:0},children:"Stories"}),b.length===0?o.jsx("p",{className:"notice--muted",children:"No stories published yet."}):o.jsx("div",{className:"card-grid",children:b.slice(0,12).map(R=>o.jsxs("div",{className:"glass-card",style:{padding:12},children:[o.jsx("strong",{children:R.metadata.title}),o.jsxs("div",{style:{fontSize:12,opacity:.8},children:["by ",R.authorName,"  ",new Date(R.publishedAt).toLocaleString()]}),o.jsx("div",{style:{display:"flex",gap:8,marginTop:8},children:o.jsx("button",{type:"button",className:"ghost-button",onClick:()=>{confirm("Delete this story?")&&(k(R.id),N({type:"note",details:`deleted story ${R.id}`}))},children:"Delete"})})]},R.id))})]}),o.jsxs(B.section,{className:"glass-card",initial:{opacity:0,y:18},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1},style:{marginTop:16},children:[o.jsx("h3",{style:{marginTop:0},children:"Reviews"}),o.jsx("div",{style:{display:"grid",gap:10},children:b.flatMap(R=>R.reviews.map(H=>({s:R,r:H}))).length===0?o.jsx("p",{className:"notice--muted",children:"No reviews yet."}):b.flatMap(R=>R.reviews.map(H=>({s:R,r:H}))).map(({s:R,r:H})=>o.jsxs("div",{style:{display:"grid",gap:6,border:"1px solid rgba(255,255,255,0.12)",borderRadius:8,padding:10},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:8},children:[o.jsx("strong",{children:H.reviewerName}),o.jsxs("span",{children:["on ",o.jsx("em",{children:R.metadata.title})]})]}),o.jsx("div",{style:{fontSize:14,opacity:.86},children:H.comment}),o.jsx("div",{style:{display:"flex",gap:8},children:o.jsx("button",{type:"button",className:"ghost-button",onClick:()=>{w(H.id),N({type:"delete_review",targetResourceId:H.id,details:`from story: ${R.id}`})},children:"Delete"})})]},H.id))})]}),o.jsxs(B.section,{className:"glass-card",initial:{opacity:0,y:18},animate:{opacity:1,y:0},transition:{duration:.4,delay:.07},style:{marginTop:16},children:[o.jsx("h3",{style:{marginTop:0},children:"Ban appeals"}),o.jsx("p",{className:"section-subtitle",children:"Review user appeals. Approving will unban and clear restrictions."}),Ct.length===0?o.jsx("p",{className:"notice--muted",children:"No appeals have been submitted yet."}):o.jsx("div",{style:{display:"grid",gap:12,marginTop:12},children:Ct.map(R=>o.jsxs("div",{className:"appeal-card",children:[o.jsxs("div",{className:"appeal-card__header",children:[o.jsxs("div",{children:[o.jsx("strong",{children:R.username})," ",o.jsxs("span",{style:{opacity:.75},children:["(",R.email,")"]})]}),o.jsx("span",{className:`appeal-card__status appeal-card__status--${R.status}`,children:R.status})]}),o.jsx("p",{style:{margin:"0.65rem 0",lineHeight:1.5},children:R.message}),o.jsx("div",{className:"appeal-card__meta",children:o.jsxs("span",{children:["Submitted ",new Date(R.submittedAt).toLocaleString()]})}),R.status==="pending"?o.jsxs("div",{style:{display:"flex",gap:10,flexWrap:"wrap",marginTop:10},children:[o.jsx("button",{type:"button",className:"primary-button",onClick:()=>pn(R.id,"approve"),children:"Approve & unban"}),o.jsx("button",{type:"button",className:"ghost-button",onClick:()=>pn(R.id,"reject"),children:"Reject appeal"})]}):o.jsxs("div",{className:"appeal-card__resolution",children:[o.jsxs("strong",{children:["Resolved ",R.resolvedAt?new Date(R.resolvedAt).toLocaleString():""]}),o.jsxs("span",{children:["by ",R.resolvedBy??"system",R.resolutionNote?`  ${R.resolutionNote}`:""]})]})]},R.id))})]}),o.jsxs(B.section,{className:"glass-card",initial:{opacity:0,y:18},animate:{opacity:1,y:0},transition:{duration:.4,delay:.15},style:{marginTop:16},children:[o.jsx("h3",{style:{marginTop:0},children:"Blocked words"}),o.jsx("p",{className:"section-subtitle",children:"Applies to publishing and new reviews."}),o.jsxs("form",{onSubmit:R=>{R.preventDefault();const H=R.currentTarget.elements.namedItem("word"),V=H.value.trim();V&&p(V),H.value=""},style:{display:"flex",gap:8,flexWrap:"wrap"},children:[o.jsx("input",{name:"word",placeholder:"Add word or phrase"}),o.jsx("button",{type:"submit",className:"primary-button",children:"Add"})]}),o.jsx("div",{className:"chip-group",style:{marginTop:10},children:h.map(R=>o.jsxs("button",{type:"button",className:"chip",title:"Remove",onClick:()=>y(R),children:[R," "]},R))})]}),o.jsxs(B.section,{className:"glass-card",initial:{opacity:0,y:18},animate:{opacity:1,y:0},transition:{duration:.4,delay:.18},style:{marginTop:16},children:[o.jsx("h3",{style:{marginTop:0},children:"Automod tester"}),o.jsxs("form",{onSubmit:R=>{R.preventDefault();const V=R.currentTarget.elements.namedItem("sample").value,K=x(V);alert(K.ok?"OK (no blocked words detected)":`Blocked: ${K.word}`)},style:{display:"flex",gap:8,flexWrap:"wrap"},children:[o.jsx("input",{name:"sample",placeholder:"Type text to test",style:{flex:1,minWidth:240}}),o.jsx("button",{className:"primary-button",type:"submit",children:"Test"})]})]}),o.jsxs(B.section,{className:"glass-card",initial:{opacity:0,y:18},animate:{opacity:1,y:0},transition:{duration:.4,delay:.2},style:{marginTop:16},children:[o.jsx("h3",{style:{marginTop:0},children:"Local data"}),o.jsx("div",{style:{display:"flex",gap:8,flexWrap:"wrap"},children:o.jsx("button",{className:"ghost-button",type:"button",onClick:()=>{const R=["sf:workspace","sf:published-stories","sf:provider-keys","sf:provider-selected","sf:provider-custom","sf:provider-models","dreamscribe_users","dreamscribe_current_user","sf:blocked-words","sf:moderation-logs"],H={};R.forEach(Xe=>{try{H[Xe]=JSON.parse(localStorage.getItem(Xe)||"null")}catch{H[Xe]=localStorage.getItem(Xe)}});const V=new Blob([JSON.stringify(H,null,2)],{type:"application/json"}),K=document.createElement("a");K.href=URL.createObjectURL(V),K.download="dreamscribe-data.json",K.click(),URL.revokeObjectURL(K.href)},children:"Export JSON"})})]}),o.jsxs(B.section,{className:"glass-card",initial:{opacity:0,y:18},animate:{opacity:1,y:0},transition:{duration:.4,delay:.2},style:{marginTop:16},children:[o.jsx("h3",{style:{marginTop:0},children:"Moderation logs"}),j.length===0?o.jsx("p",{className:"notice--muted",children:"No moderation events captured yet."}):o.jsx("div",{style:{display:"grid",gap:8},children:j.map(R=>o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:8,fontSize:14,opacity:.9},children:[o.jsxs("span",{children:[o.jsx("strong",{children:R.type}),"  ",R.details||""]}),o.jsx("time",{children:new Date(R.timestamp).toLocaleTimeString()})]},R.id))})]})]})}function pP(){return o.jsx(oP,{children:o.jsxs(yS,{children:[o.jsx(Ft,{path:"/",element:o.jsx(VN,{})}),o.jsx(Ft,{path:"/signup",element:o.jsx(QN,{})}),o.jsx(Ft,{path:"/login",element:o.jsx(XN,{})}),o.jsx(Ft,{path:"/stories",element:o.jsx(GA,{})}),o.jsx(Ft,{path:"/stories/:storyId",element:o.jsx(QA,{})}),o.jsx(Ft,{path:"/settings",element:o.jsx(_m,{children:o.jsx(dP,{})})}),o.jsx(Ft,{path:"/studio",element:o.jsx(_m,{children:o.jsx($A,{})})}),o.jsx(Ft,{path:"/dev",element:o.jsx(aP,{children:o.jsx(hP,{})})}),o.jsx(Ft,{path:"*",element:o.jsx(sa,{to:"/",replace:!0})})]})})}const px="sf:feedback";function fP(){try{const e=localStorage.getItem(px);return e?{messages:JSON.parse(e)}:{messages:[]}}catch{return{messages:[]}}}function Rm(e){localStorage.setItem(px,JSON.stringify(e.messages))}const mP=g.createContext(void 0);function yP(e,t){switch(t.type){case"submit":{const r={messages:[t.message,...e.messages].slice(0,200)};return Rm(r),r}case"reply":{const r={messages:e.messages.map(s=>s.id===t.id?{...s,reply:{text:t.text,createdAt:t.createdAt}}:s)};return Rm(r),r}default:return e}}function gP({children:e}){const[t,n]=g.useReducer(yP,void 0,fP),r=g.useCallback(a=>{const l={id:xe("fbk"),message:a.message,promptLabel:a.promptLabel,authorName:a.authorName,createdAt:new Date().toISOString()};return n({type:"submit",message:l}),l},[]),s=g.useCallback((a,l)=>{n({type:"reply",id:a,text:l,createdAt:new Date().toISOString()})},[]),i=g.useMemo(()=>({messages:t.messages,submitMessage:r,replyToMessage:s}),[t.messages,r,s]);return o.jsx(mP.Provider,{value:i,children:e})}const fx=document.getElementById("root");if(!fx)throw new Error("Root element #root not found");ql.createRoot(fx).render(o.jsx($m.StrictMode,{children:o.jsx(bS,{children:o.jsx(cP,{children:o.jsx(pA,{children:o.jsx(YN,{children:o.jsx(sP,{children:o.jsx(MA,{children:o.jsx(JA,{children:o.jsx(gP,{children:o.jsx(FA,{children:o.jsx(dA,{children:o.jsx(IA,{children:o.jsx(cA,{children:o.jsx(pP,{})})})})})})})})})})})})})}));
